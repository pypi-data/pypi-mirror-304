"use strict";(self.webpackChunkjupyterlab_freeze=self.webpackChunkjupyterlab_freeze||[]).push([[580],{580:(e,t,o)=>{o.r(t),o.d(t,{default:()=>k});var a=o(448),n=o(658),l=o(376),r=o(444),d=o(29),s=o.n(d),c=o(434);function i(e){return m(e)?!0===e.model.getMetadata("frozen")?"frozen":!1===e.model.getMetadata("editable")?"read_only":"normal":"normal"}function m(e){return"code"==e.model.type||"markdown"==e.model.type}function u(e,t){if(m(t)){switch(e){case"normal":t.model.setMetadata("editable",!0),t.model.setMetadata("deletable",!0),t.model.setMetadata("frozen",!1),t.removeClass("jp-mod-frozen"),t.removeClass("jp-mod-frozen-readonly");break;case"read_only":t.model.setMetadata("editable",!1),t.model.setMetadata("deletable",!1),t.model.setMetadata("frozen",!1),t.removeClass("jp-mod-frozen"),t.addClass("jp-mod-frozen-readonly");break;case"frozen":t.model.setMetadata("editable",!1),t.model.setMetadata("deletable",!1),t.model.setMetadata("frozen",!0),t.addClass("jp-mod-frozen"),t.removeClass("jp-mod-frozen-readonly")}t.update()}}const p=e=>{function t(t){e.notebook.content.selectedCells.forEach((e=>{u(t,e)})),e.notebook.update()}return s().createElement(s().Fragment,null,s().createElement("div",{title:"Lift restrictions from selected cells"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>t("normal")},s().createElement(c.jcU,null))),s().createElement("div",{title:"Make selected cells read-only"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>t("read_only")},s().createElement(c.kUi,null))),s().createElement("div",{title:"Freeze selected cells"},s().createElement("button",{className:"jp-ToolbarButtonComponent jp-mod-minimal jp-Button","aria-pressed":"false","aria-disabled":"false",onClick:()=>t("frozen")},s().createElement(c.pKb,null))))};class f extends r.ReactWidget{constructor(e){super(),this.notebook=e,this.notebook.context.ready.then((()=>{var e;let t=this.notebook.content;const o=(null===(e=t.model)||void 0===e?void 0:e.cells.length)||0;for(var a=0;a<o;a++){let e=t.widgets[a];u(i(e),e)}this.notebook.update()}))}render(){return s().createElement(p,{notebook:this.notebook})}}const b=l.CodeCell.execute;l.CodeCell.execute=async function(e,t,o){if(!e.model.getMetadata("frozen"))return b(e,t,o)};const z="jupyterlab_freeze:plugin",y="--jp-freeze-frozen-bg",j="--jp-freeze-readonly-bg",k={id:z,description:"Jupyterlab version of freeze extension",autoStart:!0,requires:[n.INotebookTracker,a.ISettingRegistry],activate:(e,t,o)=>{console.log("JupyterLab extension jupyterlab_freeze is activated!");let a=null,n=null;function l(e){a=e.get(y).composite,n=e.get(j).composite,document.documentElement.style.setProperty(y,a),document.documentElement.style.setProperty(j,n)}Promise.all([e.restored,o.load(z)]).then((([,e])=>{l(e),e.changed.connect(l)})).catch((e=>{console.error(`jupyterlab_freeze: Something went wrong when reading the settings.\n${e}`)})),t.widgetAdded.connect(((e,t)=>{const o=t.toolbar,a=new f(t);o.addItem("freeze",a),t.disposed.connect((()=>{a.dispose()}))}))}}}}]);