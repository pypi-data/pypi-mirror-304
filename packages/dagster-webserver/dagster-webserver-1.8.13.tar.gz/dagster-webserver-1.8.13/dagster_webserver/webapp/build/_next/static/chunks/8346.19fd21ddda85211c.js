"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8346],{59672:function(e,t,n){n.r(t),n.d(t,{MergedAutomationRoot:function(){return ek},default:function(){return eT}});var s=n(52322),r=n(14934),o=n(45774),a=n(37483),l=n(35292),i=n(63019),c=n(39013),d=n(74580),u=n(74159),h=n(35002),p=n(2784),m=n(55010),x=n(60603),j=n(38491),g=n(15358),f=n(34147),y=n(92506),v=n(20958),S=n(71406),w=n(54724),b=n(94062),C=n(99417),E=n(89398);let N=e=>{let{openWithIntent:t,onClose:n,onComplete:r,automations:o}=e,a=o.length,[l,d]=(0,w.s)();(0,p.useEffect)(()=>{"not-open"===t&&d({type:"reset"})},[t,d]);let[u]=(0,v.Db)(E.VE),[h]=(0,v.Db)(E.Xu),[m]=(0,v.Db)(C.Wz),[x]=(0,v.Db)(C.d0),N=async e=>{let{repoAddress:t,name:n,type:s}=e,r={repositoryLocationName:t.location,repositoryName:t.name};switch(s){case"sensor":{let{data:e}=await u({variables:{sensorSelector:{...r,sensorName:n}}});switch(null==e?void 0:e.startSensor.__typename){case"Sensor":d({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":d({type:"update-error",name:n,error:e.startSensor.message})}break}case"schedule":{let{data:e}=await m({variables:{scheduleSelector:{...r,scheduleName:n}}});switch(null==e?void 0:e.startSchedule.__typename){case"ScheduleStateResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:n,error:e.startSchedule.message})}break}default:(0,S.UT)(s)}},k=async e=>{let{name:t,type:n,instigationState:s}=e,r={id:s.id};switch(n){case"sensor":{let{data:e}=await h({variables:r});switch(null==e?void 0:e.stopSensor.__typename){case"StopSensorMutationResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:t,error:e.stopSensor.message})}break}case"schedule":{let{data:e}=await x({variables:r});switch(null==e?void 0:e.stopRunningSchedule.__typename){case"ScheduleStateResult":d({type:"update-success"});return;case"UnauthorizedError":case"PythonError":d({type:"update-error",name:t,error:e.stopRunningSchedule.message})}break}default:(0,S.UT)(n)}},T=async()=>{if("not-open"!==t){for(let e of(d({type:"start"}),o))"start"===t?await N(e):await k(e);d({type:"complete"}),r()}},_="updating"!==l.step;return(0,s.jsxs)(y.Vq,{isOpen:"not-open"!==t,title:"start"===t?"Start automations":"Stop automations",canEscapeKeyClose:_,canOutsideClickClose:_,onClose:n,children:[(0,s.jsx)(y.a7,{children:(0,s.jsxs)(f.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===t)return null;switch(l.step){case"initial":if("stop"===t)return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be stopped. Do you want to continue?")});return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be started. Do you want to continue?")});case"updating":case"completed":let e=a>0?l.completion.completed/a:1;return(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[(0,s.jsx)(g.k,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===l.step?(0,s.jsx)(b.c,{message:"Automations are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===t||"initial"===l.step)return null;if("updating"===l.step)return(0,s.jsx)("div",{children:"Please do not close the window or navigate away while automations are being updated."});let e=l.completion.errors,n=Object.keys(e).length,r=l.completion.completed-n;return(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[r?(0,s.jsxs)(f.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(i.JO,{name:"check_circle",color:c.fA()}),(0,s.jsx)("div",{children:"start"===t?"Successfully started ".concat(1===r?"1 automation":"".concat(r," automations"),"."):"Successfully stopped ".concat(1===r?"1 automation":"".concat(r," automations"),".")})]}):null,n?(0,s.jsxs)(f.Z,{direction:"column",spacing:8,children:[(0,s.jsxs)(f.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(i.JO,{name:"warning",color:c.qr()}),(0,s.jsx)("div",{children:"start"===t?"Could not start ".concat(1===n?"1 automation":"".concat(n," automations"),":"):"Could not stop ".concat(1===n?"1 automation":"".concat(n," automations"),":")})]}),(0,s.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(t=>(0,s.jsx)("li",{children:(0,s.jsxs)(f.Z,{direction:"row",spacing:8,children:[(0,s.jsxs)("strong",{children:[t,":"]}),e[t]?(0,s.jsx)("div",{children:e[t]}):null]})},t))})]}):null]})})()]})}),(0,s.jsx)(y.cN,{children:(()=>{if("not-open"===t)return null;switch(l.step){case"initial":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(j.zx,{onClick:n,children:"Cancel"}),(0,s.jsx)(j.zx,{intent:"primary",onClick:T,children:"start"===t?"Start ".concat(1===a?"1 automation":"".concat(a," automations")):"Stop ".concat(1===a?"1 automation":"".concat(a," automations"))})]});case"updating":return(0,s.jsx)(j.zx,{intent:"primary",disabled:!0,children:"start"===t?"Starting ".concat(1===a?"1 automation":"".concat(a," automations")):"Stopping ".concat(1===a?"1 automation":"".concat(a," automations"))});case"completed":return(0,s.jsx)(j.zx,{intent:"primary",onClick:n,children:"Done"})}})()})]})};var k=n(69557);let T=e=>{let{automations:t,onDone:n}=e,r=t.length,[o,a]=(0,p.useState)("not-open"),{anyOff:l,anyOn:c}=(0,p.useMemo)(()=>(0,k.H)(t.map(e=>{let{instigationState:t}=e;return t})),[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.J,{content:(0,s.jsxs)(x.v2,{children:[(0,s.jsx)(x.sN,{text:"Start ".concat(1===r?"1 automation":"".concat(r," automations")),disabled:!l,"aria-disabled":!l,icon:"toggle_on",onClick:()=>{a("start")}}),(0,s.jsx)(x.sN,{text:"Stop ".concat(1===r?"1 automation":"".concat(r," automations")),disabled:!c,"aria-disabled":!c,icon:"toggle_off",onClick:()=>{a("stop")}})]}),placement:"bottom-end",children:(0,s.jsx)(j.zx,{disabled:!r,intent:"primary",rightIcon:(0,s.jsx)(i.JO,{name:"expand_more"}),children:"Actions"})}),(0,s.jsx)(N,{openWithIntent:o,automations:t,onClose:()=>a("not-open"),onComplete:()=>{n()}})]})};var _=n(18259),z=n(43212),M=n(88510),A=n(35505),L=n(17008);let q="60px minmax(400px, 1.5fr) 240px 1fr 200px 200px",O=e=>{let{checkbox:t}=e;return(0,s.jsxs)(L.VJ,{templateColumns:q,sticky:!0,children:[(0,s.jsx)(L.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:t})}),(0,s.jsx)(L.qN,{children:"Name"}),(0,s.jsx)(L.qN,{children:"Type"}),(0,s.jsx)(L.qN,{children:"Target"}),(0,s.jsx)(L.qN,{children:"Last tick"}),(0,s.jsx)(L.qN,{children:"Last run"})]})},R=(0,A.ZP)(r.x).withConfig({componentId:"sc-40d0a0cf-0"})(["display:grid;grid-template-columns:",";height:100%;"],q);var U=n(37504),I=n(53664),P=n(47933),D=n(24427),Z=n(16336),V=n(88257),$=n(60648),H=n(92474),W=n(6750),F=n(4219),X=n(73310),J=n(86269),Y=n(58905),B=n(27028),K=n(83738),G=n(10539);let Q=(0,p.forwardRef)((e,t)=>{var n;let{index:o,name:a,repoAddress:i,checked:c,onToggleChecked:d}=e,[u,m]=(0,v.td)(B.B8,{variables:{selector:{repositoryName:i.name,repositoryLocationName:i.location,scheduleName:a}},notifyOnNetworkStatusChange:!0}),[x,j]=(0,v.td)(W.d,{variables:{scheduleSelector:{repositoryName:i.name,repositoryLocationName:i.location,scheduleName:a}}});(0,K.v5)((0,p.useCallback)(()=>{u(),x()},[u,x])),(0,Z.C4)(m,Z.dT),(0,Z.C4)(j,Z.dT);let{data:g}=m,f=(0,p.useMemo)(()=>(null==g?void 0:g.scheduleOrError.__typename)!=="Schedule"?null:g.scheduleOrError,[g]),y=null==f?void 0:f.scheduleState,S=(0,p.useMemo)(()=>{if(!y)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=y;return n!==V.ynu.RUNNING||t?n!==V.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[y]),w=null==f?void 0:f.scheduleState.ticks[0],b=(null==f?void 0:f.pipelineName)?[{pipelineName:f.pipelineName}]:null,C=(null===(n=j.data)||void 0===n?void 0:n.scheduleOrError.__typename)==="Schedule"?j.data.scheduleOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":o,children:(0,s.jsxs)(R,{border:"bottom",children:[(0,s.jsx)(L.E5,{children:(0,s.jsx)(h.u,{canShow:S.disabled,content:S.message||"",placement:"top",children:(0,s.jsx)(U.X,{disabled:S.disabled,checked:c,onChange:e=>{if(d&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;d({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(L.E5,{children:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[f?(0,s.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(F.M,{repoAddress:i,schedule:f},a),(0,X.l)(f.scheduleState.status,f.scheduleState.runningCount)]}):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(P.rU,{to:(0,G.$U)(i,"/schedules/".concat(a)),children:(0,s.jsx)(I.g,{text:a})})]})}),(0,s.jsx)(L.E5,{children:f?(0,s.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(H.P,{cronSchedule:f.cronSchedule,executionTimezone:f.executionTimezone}),f.scheduleState.nextTick&&f.scheduleState.status===V.ynu.RUNNING?(0,s.jsx)(l.YS,{children:(0,s.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,s.jsx)(J.v,{timestamp:f.scheduleState.nextTick.timestamp,timezone:f.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,s.jsx)(K.mq,{queryResult:m})}),(0,s.jsx)(L.E5,{children:(0,s.jsx)("div",{children:(0,s.jsx)(D.p,{repoAddress:i,automationType:"schedule",targets:b,assetSelection:C})})}),(0,s.jsx)(L.E5,{children:w?(0,s.jsx)("div",{children:(0,s.jsx)(Y.a,{tick:w,tickResultType:"runs"})}):(0,s.jsx)(K.mq,{queryResult:m})}),(0,s.jsx)(L.E5,{children:(null==f?void 0:f.scheduleState)&&(null==f?void 0:f.scheduleState.runs[0])?(0,s.jsx)($.Z,{run:f.scheduleState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(K.mq,{queryResult:m})})]})})});var ee=n(5112),et=n(60918),en=n(53029);let es=(0,p.forwardRef)((e,t)=>{var n;let{index:o,name:a,repoAddress:l,checked:i,onToggleChecked:c}=e,[d,u]=(0,v.td)(en.bL,{variables:{selector:{repositoryName:l.name,repositoryLocationName:l.location,sensorName:a}}}),[m,x]=(0,v.td)(ee.Z,{variables:{sensorSelector:{repositoryName:l.name,repositoryLocationName:l.location,sensorName:a}}});(0,K.v5)((0,p.useCallback)(()=>{d(),m()},[d,m])),(0,Z.C4)(u,Z.dT),(0,Z.C4)(x,Z.dT);let{data:j}=u,g=(0,p.useMemo)(()=>(null==j?void 0:j.sensorOrError.__typename)!=="Sensor"?null:j.sensorOrError,[j]),f=null==g?void 0:g.sensorState,y=(0,p.useMemo)(()=>{if(!f)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=f;return n!==V.ynu.RUNNING||t?n!==V.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[f]),S=null==g?void 0:g.sensorState.ticks[0],w=null==g?void 0:g.sensorType,b=w?en.W_[w]:null,C=(null===(n=x.data)||void 0===n?void 0:n.sensorOrError.__typename)==="Sensor"?x.data.sensorOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":o,children:(0,s.jsxs)(R,{border:"bottom",children:[(0,s.jsx)(L.E5,{children:(0,s.jsx)(h.u,{canShow:y.disabled,content:y.message||"",placement:"top",children:(0,s.jsx)(U.X,{disabled:y.disabled,checked:i,onChange:e=>{if(c&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;c({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(L.E5,{children:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[g?(0,s.jsx)(et.c,{repoAddress:l,sensor:g},a):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(P.rU,{to:(0,G.$U)(l,"/sensors/".concat(a)),children:(0,s.jsx)(I.g,{text:a})})]})}),(0,s.jsx)(L.E5,{children:(0,s.jsx)("div",{children:b?b.description?(0,s.jsx)(h.u,{content:(0,s.jsx)("div",{style:{maxWidth:"300px"},children:b.description}),placement:"top",children:(0,s.jsx)(z.V,{icon:b.icon,children:b.name})}):(0,s.jsx)(z.V,{icon:b.icon,children:b.name}):null})}),(0,s.jsx)(L.E5,{children:g?(0,s.jsx)("div",{children:(0,s.jsx)(D.p,{targets:g.targets||null,repoAddress:l,assetSelection:C,automationType:g.sensorType})}):(0,s.jsx)(K.mq,{queryResult:x})}),(0,s.jsx)(L.E5,{children:S?(0,s.jsx)("div",{children:(0,s.jsx)(Y.a,{tick:S,tickResultType:"runs"})}):(0,s.jsx)(K.mq,{queryResult:u})}),(0,s.jsx)(L.E5,{children:(null==g?void 0:g.sensorState)&&(null==g?void 0:g.sensorState.runs[0])?(0,s.jsx)($.Z,{run:g.sensorState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)(K.mq,{queryResult:u})})]})})});var er=n(22921),eo=n(40389),ea=n(98956),el=n(50646),ei=n(22563);let ec=e=>{let{repos:t,headerCheckbox:n,checkedKeys:o,onToggleCheckFactory:a}=e,l=p.useRef(null),i=p.useMemo(()=>t.map(e=>{let{repoAddress:t}=e;return(0,ei.Uz)(t)}),[t]),{expandedKeys:c,onToggle:d,onToggleAll:u}=(0,el.N)(er.y,i),m=p.useMemo(()=>{let e=[];return t.forEach(t=>{let{repoAddress:n,schedules:s,sensors:r}=t;e.push({type:"header",repoAddress:n,scheduleCount:s.length,sensorCount:r.length});let o=(0,ei.Uz)(n);if(c.includes(o)){let t=new Set(r),o=new Set(s);[...r,...s].sort((e,t)=>S.Bl.compare(e,t)).forEach(s=>{t.has(s)?e.push({type:"sensor",repoAddress:n,sensor:s}):o.has(s)&&e.push({type:"schedule",repoAddress:n,schedule:s})})}}),e},[t,c]),x=(0,ea.w)(t.map(e=>{let{repoAddress:t}=e;return t.name})),j=(0,M.MG)({count:m.length,getScrollElement:()=>l.current,estimateSize:e=>{let t=m[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:15}),g=j.getTotalSize(),f=j.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(L.W2,{ref:l,children:[(0,s.jsx)(O,{checkbox:n}),(0,s.jsx)(L.Nh,{$totalHeight:g,children:f.map(e=>{let{index:t,key:n,size:l,start:i}=e,p=m[t],g=p.type;if("header"===g)return(0,s.jsx)(_.X2,{$height:l,$start:i,children:(0,s.jsx)(K._$,{repoAddress:p.repoAddress,ref:j.measureElement,index:t,onToggle:d,onToggleAll:u,expanded:c.includes((0,ei.Uz)(p.repoAddress)),showLocation:x.has(p.repoAddress.name),rightElement:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:4},children:[(0,s.jsx)(h.u,{content:1===p.sensorCount?"1 sensor":"".concat(p.sensorCount," sensors"),placement:"top",children:(0,s.jsx)(z.V,{icon:"sensors",children:p.sensorCount})}),(0,s.jsx)(h.u,{content:1===p.scheduleCount?"1 schedule":"".concat(p.scheduleCount," schedules"),placement:"top",children:(0,s.jsx)(z.V,{icon:"schedule",children:p.scheduleCount})})]})},n)},n);if("sensor"===g){let e=(0,eo.M)(p.repoAddress,p.sensor);return(0,s.jsx)(_.X2,{$height:l,$start:i,children:(0,s.jsx)(es,{index:t,ref:j.measureElement,name:p.sensor,checked:o.has(e),onToggleChecked:a(e),repoAddress:p.repoAddress},n)},n)}if("schedule"===g){let e=(0,eo.M)(p.repoAddress,p.schedule);return(0,s.jsx)(_.X2,{$height:l,$start:i,children:(0,s.jsx)(Q,{index:t,ref:j.measureElement,name:p.schedule,checked:o.has(e),onToggleChecked:a(e),repoAddress:p.repoAddress},n)},n)}return(0,s.jsx)("div",{},n)})})]})})};var ed=n(69737),eu=n(20171),eh=n(4378),ep=n(52154),em=n(77044),ex=n(907),ej=n(49455),eg=n(97211),ef=n(74548),ey=n(2389),ev=n(50027),eS=n(59030),ew=n(2949),eb=n(8355),eC=n(65822);let eE={schedules:{label:"Schedules",value:{type:"schedules",label:"Schedules"},match:["schedules"]},sensors:{label:"Sensors",value:{type:"sensors",label:"Sensors"},match:["sensors"]}},eN=Object.values(eE),ek=()=>{(0,ed.Px)(),(0,eu.j)("Automation");let{allRepos:e,visibleRepos:t,loading:n,data:m,refetch:x}=(0,p.useContext)(eb.C5),[j,g]=(0,eh.q)({queryKey:"search",defaults:{search:""}}),[f,y]=(0,eh.q)({encode:e=>({automationType:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.automationType)||void 0===t?void 0:t.split(","))||[])}}),v=(0,p.useMemo)(()=>new Set(Array.from(f).map(e=>eE[e].value)),[f]),S=(0,ev.A)(),w=(0,ew.g)(),b=(0,ef.im)({name:"Automation type",allValues:eN,icon:"auto_materialize_policy",getStringValue:e=>e.label,state:v,renderLabel:e=>{let{value:t}=e;return(0,s.jsx)("span",{children:t.label})},onStateChanged:e=>{y(new Set(Array.from(e).map(e=>e.type)))}}),C=(0,p.useMemo)(()=>{let e=Object.values(m).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=(0,ej.S)(t);return e_(e).filter(e=>{let{repoAddress:t}=e;return n.has((0,ei.Uz)(t))})},[m,t]),E=(0,eS.in)({allTags:(0,eS.gP)(C,(0,p.useCallback)(e=>[...e.schedules.flatMap(e=>e.tags),...e.sensors.flatMap(e=>e.tags)],[]))}),{state:N}=E,k=(0,p.useMemo)(()=>[S,w,b,E],[S,w,b,E]),{button:_,activeFiltersJsx:z}=(0,eg.m)({filters:k}),{state:M}=w,A=(0,p.useMemo)(()=>C.map(e=>{let{sensors:t,schedules:n,...s}=e;return{...s,sensors:t.filter(e=>{let{sensorState:t,tags:n}=e;return(!N.size||!!(0,eS.wH)(Array.from(N),n))&&(!M.size||!!M.has(t.status))&&(!f.size||!!f.has("sensors"))}),schedules:n.filter(e=>{let{scheduleState:t,tags:n}=e;return(!N.size||!!(0,eS.wH)(Array.from(N),n))&&(!M.size||!!M.has(t.status))&&(!f.size||!!f.has("schedules"))})}}),[C,N,M,f]),L=j.trim().toLocaleLowerCase(),q=L.length>0,O=(0,p.useMemo)(()=>{let e=L.toLocaleLowerCase();return A.map(t=>{let{repoAddress:n,schedules:s,sensors:r}=t;return{repoAddress:n,schedules:s.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t}),sensors:r.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t})}}).filter(e=>{let{sensors:t,schedules:n}=e;return t.length>0||n.length>0})},[A,L]),R=(0,p.useMemo)(()=>A.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...s.filter(e=>{let{sensorState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,sensorState:s}=e;return{repoAddress:t,name:n,type:"sensor",instigationState:s}}),...n.filter(e=>{let{scheduleState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,scheduleState:s}=e;return{repoAddress:t,name:n,type:"schedule",instigationState:s}})]}).flat(),[A]),U=(0,p.useMemo)(()=>R.map(e=>{let{repoAddress:t,name:n}=e;return(0,eo.M)(t,n)}),[R]),[{checkedIds:I},{onToggleFactory:P,onToggleAll:D}]=(0,ep.a)(U),Z=(0,p.useMemo)(()=>{let e=new Set(O.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...n,...s].map(e=>(0,eo.M)(t,e))}).flat());return U.filter(t=>e.has(t))},[U,O]),V=(0,p.useMemo)(()=>{let e=new Set(Z.filter(e=>I.has(e)));return R.filter(t=>{let{repoAddress:n,name:s}=t;return e.has((0,eo.M)(n,s))})},[Z,R,I]),$=U.length>0,H=V.length,W=Z.length>0;return(0,s.jsxs)(r.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(d.m,{title:(0,s.jsx)(l.X6,{children:"Automation"})}),(0,s.jsxs)(r.x,{padding:{horizontal:24,vertical:12},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,s.jsxs)(r.x,{flex:{direction:"row",gap:12},children:[_,(0,s.jsx)(u.oi,{icon:"search",value:j,onChange:e=>g(e.target.value),placeholder:"Filter by name…",style:{width:"340px"}})]}),(0,s.jsx)(h.u,{content:"You do not have permission to start or stop these schedules",canShow:W&&!$,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(T,{automations:V,onDone:()=>x()})})]}),z.length?(0,s.jsx)(r.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:z}):null,(()=>{if(n)return(0,s.jsx)(r.x,{flex:{direction:"row",justifyContent:"center"},padding:{top:64},children:(0,s.jsx)(o.f,{label:"Loading automations…"})});let d=e.length>t.length;return O.length?(0,s.jsx)(ec,{headerCheckbox:$?(0,s.jsx)(ey.W,{checkedCount:H,totalCount:Z.length,onToggleAll:D}):void 0,repos:O,checkedKeys:I,onToggleCheckFactory:P}):q?(0,s.jsx)(r.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No matching automations",description:d?(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:j})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:j})," were found in your definitions"]})})}):(0,s.jsx)(r.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No automations",description:d?"No automations were found in the selected code locations":(0,s.jsxs)(l.pN,{children:["There are no automations in this deployment."," ",(0,s.jsx)("a",{href:"https://docs.dagster.io/concepts/automation",target:"_blank",rel:"noreferrer",children:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:4,alignItems:"center"},children:["Learn more about automations",(0,s.jsx)(i.JO,{name:"open_in_new",color:c.Es()})]})})]})})})})()]})};var eT=ek;let e_=e=>{let t=e.map(e=>e.locationOrLoadError),n=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:s,schedules:r,sensors:o}=t,a=(0,eC.kQ)(s,e.name);(o.length>0||r.length>0)&&n.push({repoAddress:a,schedules:r,sensors:o})}return(0,ex.S)(n)}},907:function(e,t,n){n.d(t,{S:function(){return r}});var s=n(22563);let r=e=>[...e].sort((e,t)=>{let n=(0,s.Uz)(e.repoAddress),r=(0,s.Uz)(t.repoAddress);return n.localeCompare(r)})},49455:function(e,t,n){n.d(t,{S:function(){return o}});var s=n(65822),r=n(22563);let o=e=>new Set(e.map(e=>(0,r.Uz)((0,s.kQ)(e.repository.name,e.repositoryLocation.name))))}}]);
//# sourceMappingURL=8346.19fd21ddda85211c.js.map