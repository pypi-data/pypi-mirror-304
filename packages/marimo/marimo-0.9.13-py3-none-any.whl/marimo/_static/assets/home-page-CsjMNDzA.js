import{a$ as e,R as s,b0 as a,b1 as t,F as r,ah as o,b2 as n,K as i,b3 as l,b4 as c,b5 as d,b6 as h,b7 as x,b8 as m,b9 as p,ba as u,bb as f,bc as b,bd as y,V as j,be as g,bf as v,a5 as k,bg as w,bh as N,bi as C,af as z,bj as M,bk as S,bl as I,ar as P,bm as D,bn as $,bo as A,bp as O,_ as T,bq as R,br as B,bs as _,bt as H,bu as L,aq as W,bv as q,bw as E,M as F,bx as V,by as G,bz as U,bA as Y,bB as J,bC as K,bD as Q,bE as X}from"./index-DFw-6z0m.js";import{u as Z,C as ee,S as se,T as ae,M as te,P as re,G as oe}from"./tree-R18GHyPL.js";import"./main-cdvIQCIX.js";import"./index-38CwJ4HF.js";
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=e("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),ie=e("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),le=e("BookText",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]),ce=e("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]),de=e("CirclePlay",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),he=e("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),xe=e("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]),me=e("Orbit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["circle",{cx:"19",cy:"5",r:"2",key:"mhkx31"}],["circle",{cx:"5",cy:"19",r:"2",key:"v8kfzx"}],["path",{d:"M10.4 21.9a10 10 0 0 0 9.941-15.416",key:"eohfx2"}],["path",{d:"M13.5 2.1a10 10 0 0 0-9.841 15.416",key:"19pvbm"}]]),pe=e("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]),ue=s.createContext({runningNotebooks:new Map,setRunningNotebooks:a.NOOP}),fe=s.createContext(""),be=t("marimo:home:include-markdown",!1,void 0,{getOnInit:!0}),ye=t("marimo:home:expanded-folders",{},void 0,{getOnInit:!0});
/**
 * @license lucide-react v0.428.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */function je(e){return`${F()}-${encodeURIComponent(e)}`}const ge=()=>{const[e,s]=r.useState(0),a=o((()=>V()),[]);Z((()=>{s((e=>e+1))}),{delayMs:1e4,whenVisible:!0});const t=o((async()=>{const e=await G();return O.keyBy(e.files,(e=>e.path))}),[e]),d=n(a,t);if(d.error)throw d.error;const h=d.data;if(!h)return i.jsx(l,{centered:!0,size:"xlarge"});const[x,m]=h;return i.jsx(r.Suspense,{children:i.jsxs(ue.Provider,{value:{runningNotebooks:m,setRunningNotebooks:t.setData},children:[i.jsxs("div",{className:"absolute top-3 right-5 flex gap-2 z-50",children:[i.jsx($e,{}),i.jsx(ee,{showAppConfig:!1}),i.jsx(se,{description:`This will shutdown the notebook server and terminate all running notebooks (${m.size}). You'll lose all data that's in memory.`})]}),i.jsxs("div",{className:"flex flex-col gap-6 max-w-5xl container pt-5 pb-20 z-10",children:[i.jsx("img",{src:"logo.png",alt:"marimo logo",className:"w-64 mb-4"}),i.jsx(Pe,{}),i.jsx(ze,{header:i.jsx(Me,{Icon:de,children:"Running notebooks"}),files:[...m.values()]}),i.jsx(ze,{header:i.jsx(Me,{Icon:he,children:"Recent notebooks"}),files:x.files}),i.jsx(c,{children:i.jsx(ve,{})})]})]})})},ve=()=>{const[e,s]=d(be),[a,t]=r.useState(""),n=o((()=>U({includeMarkdown:e})),[e]);if(n.error)return i.jsx(h,{kind:"danger",className:"rounded p-4",children:x(n.error)});if(n.loading||!n.data)return i.jsx(l,{centered:!0,size:"xlarge",className:"mt-6"});const c=n.data;return i.jsx(fe.Provider,{value:c.root,children:i.jsxs("div",{className:"flex flex-col gap-2",children:[i.jsxs(Me,{Icon:le,control:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(m,{id:"search",value:a,icon:i.jsx(p,{size:13}),onChange:e=>t(e.target.value),placeholder:"Search",className:"mb-0 border-border"}),i.jsx(ke,{}),i.jsx(u,{"data-testid":"include-markdown-checkbox",id:"include-markdown",checked:e,onCheckedChange:e=>s(Boolean(e))}),i.jsx(f,{htmlFor:"include-markdown",children:"Include markdown"})]}),children:["Workspace",i.jsx(b,{className:"w-4 h-4 ml-1 cursor-pointer opacity-70 hover:opacity-100",onClick:()=>n.reload()}),n.loading&&i.jsx(l,{size:"small"})]}),i.jsx("div",{className:"flex flex-col divide-y divide-[var(--slate-3)] border rounded overflow-hidden max-h-[48rem] overflow-y-auto shadow-sm bg-background",children:i.jsx(we,{searchText:a,files:c.files})})]})})},ke=()=>{const e=y(ye);return i.jsxs(j,{variant:"text",size:"sm",className:"h-fit",onClick:()=>{e({})},children:[i.jsx(g,{className:"w-4 h-4 mr-1"}),"Collapse all"]})},we=({files:e,searchText:s})=>{const[a,t]=d(ye),o=0===Object.keys(a).length,n=r.useRef();return r.useEffect((()=>{var e;o&&(null==(e=n.current)||e.closeAll())}),[o]),0===e.length?i.jsx("div",{className:"flex flex-col px-5 py-10 items-center justify-center",children:i.jsx("p",{className:"text-center text-muted-foreground",children:"No files in this workspace"})}):i.jsx(ae,{ref:n,width:"100%",height:500,searchTerm:s,className:"h-full",idAccessor:e=>e.path,data:e,openByDefault:!1,initialOpenState:a,onToggle:async e=>{const s=a[e]??!1;t({...a,[e]:!s})},padding:5,rowHeight:35,indent:15,overscanCount:1e3,renderCursor:()=>null,disableDrop:!0,disableDrag:!0,disableEdit:!0,disableMultiSelection:!0,children:Ne})},Ne=({node:e,style:s})=>{const a=e.data.isDirectory?"directory":v(e.data.name),t=X[a],o=i.jsx(t,{className:"w-5 h-5 flex-shrink-0",strokeWidth:1.5}),n=r.useContext(fe);return i.jsxs("div",{style:s,className:k("flex items-center cursor-pointer ml-1 text-muted-foreground whitespace-nowrap group h-full"),onClick:s=>{s.stopPropagation(),e.data.isDirectory&&e.toggle()},children:[i.jsx(Ce,{node:e}),(()=>{const s="flex items-center pl-1 cursor-pointer hover:bg-accent/50 hover:text-accent-foreground rounded-l flex-1 overflow-hidden h-full pr-3 gap-2";if(e.data.isDirectory)return i.jsxs("span",{className:s,children:[o,e.data.name]});const a=e.data.path.startsWith(n)&&Y.isAbsolute(e.data.path)?Y.rest(e.data.path,n):e.data.path,t=a.endsWith(".md");return i.jsxs("a",{className:s,href:z(`?file=${a}`).toString(),target:je(a),children:[o,i.jsxs("span",{className:"flex-1 overflow-hidden text-ellipsis",children:[e.data.name,t&&i.jsx(te,{className:"ml-2 inline opacity-80"})]}),i.jsx(Ie,{filePath:a}),i.jsx(M,{size:20,className:"group-hover:opacity-100 opacity-0 text-primary"})]})})()]})},Ce=({node:e})=>e.data.isDirectory?e.isOpen?i.jsx(w,{className:"w-5 h-5 flex-shrink-0"}):i.jsx(N,{className:"w-5 h-5 flex-shrink-0"}):i.jsx("span",{className:"w-5 h-5 flex-shrink-0"}),ze=({header:e,files:s})=>0===s.length?null:i.jsxs("div",{className:"flex flex-col gap-2",children:[e,i.jsx("div",{className:"flex flex-col divide-y divide-[var(--slate-3)] border rounded overflow-hidden max-h-[48rem] overflow-y-auto shadow-sm bg-background",children:s.map((e=>i.jsx(Se,{file:e},e.path)))})]}),Me=({Icon:e,control:s,children:a})=>i.jsxs("div",{className:"flex items-center justify-between gap-2",children:[i.jsxs("h2",{className:"flex items-center gap-2 text-xl font-semibold text-muted-foreground select-none",children:[i.jsx(e,{className:"h-5 w-5"}),a]}),s]}),Se=({file:e})=>{const s=C(e.path),a=z(s?`?file=${e.initializationId}&session_id=${e.path}`:`?file=${e.path}`),t=e.path.endsWith(".md");return i.jsxs("a",{className:"py-1.5 px-4 hover:bg-[var(--blue-2)] hover:text-primary transition-all duration-300 cursor-pointer group relative flex gap-4 items-center",href:a.toString(),target:je(e.initializationId||e.path),children:[i.jsxs("div",{className:"flex flex-col justify-between flex-1",children:[i.jsxs("span",{className:"flex items-center gap-2",children:[e.name,t&&i.jsx("span",{className:"opacity-80",children:i.jsx(te,{})})]}),i.jsx("p",{title:e.path,className:"text-sm text-muted-foreground overflow-hidden whitespace-nowrap overflow-ellipsis",children:e.path})]}),i.jsxs("div",{className:"flex flex-col gap-1 items-end",children:[i.jsxs("div",{className:"flex gap-3 items-center",children:[i.jsx("div",{children:i.jsx(Ie,{filePath:e.path})}),i.jsx(M,{size:20,className:"group-hover:opacity-100 opacity-0 transition-all duration-300 text-primary"})]}),!!e.lastModified&&i.jsx("div",{className:"text-xs text-muted-foreground opacity-80",children:S(1e3*e.lastModified)})]})]},e.path)},Ie=({filePath:e})=>{const{openConfirm:s,closeModal:a}=I(),{runningNotebooks:t,setRunningNotebooks:o}=r.useContext(ue);return t.has(e)?i.jsx(P,{content:"Shutdown",children:i.jsx(j,{size:"icon",variant:"outline",className:"opacity-80 hover:opacity-100 hover:bg-accent text-destructive border-destructive hover:border-destructive hover:text-destructive bg-background hover:bg-[var(--red-1)]",onClick:r=>{r.stopPropagation(),r.preventDefault(),s({title:"Shutdown",description:"This will terminate the Python kernel. You'll lose all data that's in memory.",variant:"destructive",confirmAction:i.jsx(D,{onClick:s=>{const r=t.get(e);$(r),A({sessionId:r.sessionId}).then((e=>{o(O.keyBy(e.files,(e=>e.path)))})),a(),T({description:"Notebook has been shutdown."})},"aria-label":"Confirm Shutdown",children:"Shutdown"})})},children:i.jsx(re,{size:14})})}):null},Pe=()=>{const e=`__new__${R()}`;return i.jsxs("a",{className:"relative rounded-lg p-6 group\n      text-primary hover:bg-[var(--blue-2)] shadow-mdSolid shadow-accent border\n      transition-all duration-300 cursor-pointer\n      ",href:z(`?file=${e}`).toString(),target:je(e),children:[i.jsx("h2",{className:"text-lg font-semibold",children:"Create a new notebook"}),i.jsx("div",{className:"group-hover:opacity-100 opacity-0 absolute right-5 top-0 bottom-0 rounded-lg flex items-center justify-center transition-all duration-300",children:i.jsx(M,{size:24})})]})},De={intro:["Introduction",ie],dataflow:["Dataflow",ne],ui:["UI Elements",pe],markdown:["Markdown",J],plots:["Plots",ce],sql:["SQL",K],layout:["Layout",oe],fileformat:["File format",Q],"for-jupyter-users":["For Jupyter users",me],"markdown-format":["Markdown format",te]},$e=()=>i.jsxs(B,{children:[i.jsx(_,{asChild:!0,children:i.jsxs(j,{"data-testid":"open-tutorial-button",size:"xs",variant:"outline",children:[i.jsx(xe,{className:"w-4 h-4 mr-2"}),"Tutorials",i.jsx(H,{className:"w-3 h-3 ml-1"})]})}),i.jsx(L,{side:"bottom",className:"no-print",children:W.entries(De).map((([e,[s,a]])=>i.jsxs(q,{onSelect:async()=>{const s=await E({tutorialId:e});s&&window.open(z(`?file=${s.path}`).toString(),"_blank")},children:[i.jsx(a,{strokeWidth:1.5,className:"w-4 h-4 mr-2"}),s]},e)))})]});export{ge as default};
