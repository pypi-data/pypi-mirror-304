"use strict";(self.webpackChunkjupyterlab_datadog_rum=self.webpackChunkjupyterlab_datadog_rum||[]).push([[509],{509:(e,t,a)=>{a.r(t),a.d(t,{IDDRum:()=>i,PLUGIN_ID:()=>s,default:()=>d});var n=a(614),o=a(262);const s="jupyterlab-datadog-rum:plugin",i=new o.Token(`${s}:IDDRum`),r={id:s,autoStart:!0,provides:i,requires:[n.ISettingRegistry],activate:async(e,t)=>{console.debug(`${s}: activated`),window.DD_RUM={q:[],onReady:e=>window.DD_RUM.q.push(e),init:e=>{},setUser:e=>{}};const a=(await t.load(r.id)).composite.private;if(!a.applicationId||!a.clientToken)return console.warn(`${s}: applicationId or clientToken not set`),window.DD_RUM;const n=document.createElement("script");return n.async=!0,n.src="https://www.datadoghq-browser-agent.com/us1/v5/datadog-rum.js",document.head.appendChild(n),window.DD_RUM.onReady((()=>{window.DD_RUM.init({applicationId:a.applicationId,clientToken:a.clientToken,site:a.site,service:a.service,env:a.env||c(/jupyterhub-([^.]+)/,window.location.hostname),version:a.version,sessionSampleRate:a.sessionSampleRate,sessionReplaySampleRate:a.sessionReplaySampleRate,trackUserInteractions:a.trackUserInteractions,trackResources:a.trackResources,trackLongTasks:a.trackLongTasks,defaultPrivacyLevel:a.defaultPrivacyLevel}),console.debug(`${s}: RUM initialized`);const e=c(/\/user\/([^/]+)\//,window.location.pathname);e&&(window.DD_RUM.setUser({id:e}),console.debug(`${s}: detected user: ${e}`))})),window.DD_RUM}};function c(e,t){const a=t.match(e);return a?a[1]:""}const d=r}}]);