import{_ as da,g as ca,V as ma}from"./DrawerNavigation.vue_vue_type_style_index_0_scoped_42f910eb_lang-CgWVZiwA.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{M as fe,_ as va,i as Me,a as $t,b as pa,V as ya,g as ht}from"./VCheckbox-Csgo84SF.js";import{e as me,_ as Re}from"./eventbus-obT-FP9Y.js";import{d as A,r as q,o as Ae,a as Oe,b as _,M as te,P as _t,c as u,e as V,w as y,f as v,u as e,$ as we,g as S,h as g,i as Z,t as k,j as C,F as N,s as t,A as fa,p as ae,k as le,l as ha,m as _a,n as Ee,q as It,v as X,x as I,y as Ye,z as St,B as Pe,C as Qt,D as F,E as Tt,G as Xe,H as Bt,I as ga,J as Te,K as re,L as ba,N as qt,O as wa,Q as zt,R as ka,S as Pa,T as Ca,U as Be,V as R,W as L,X as Qe,Y as He,Z as Ue,_ as qe,a0 as U,a1 as he,a2 as H,a3 as Ce,a4 as J,a5 as K,a6 as ne,a7 as Va,a8 as Mt,a9 as $a,aa as ze,ab as Le,ac as Ia,ad as gt,ae as At,af as Sa,ag as Qa,ah as Ta,ai as bt,aj as Ba,ak as qa,al as za,am as Ma}from"./index-CbqyiSMI.js";import{T as Aa,V as Fe}from"./Toolbar-acHr9fKA.js";import{V as De,a as Ve,u as Ge}from"./VList-2BQBE8QJ.js";import{V as se,m as ge,a as Ea,b as Se,u as La,c as ie,d as Et,e as Lt,f as Wt,g as Rt,h as Wa,i as Ht,j as je,k as Ut,l as Ft,n as Dt,o as Nt,p as Ra,q as Ha,r as Ua,s as $e,t as Fa,v as Da,M as Na,w as W,x as xe,y as Oa,z as Ya}from"./VListItem-BYxrnyeM.js";import{V as We}from"./VCard-B6sm4saY.js";import{V as Ot}from"./VDialog-CqakStlV.js";import{V as Xa,a as Ga}from"./VInfiniteScroll-DYhI3uXA.js";import{u as ja,m as Yt,a as Xt,b as xa,c as Ka}from"./layout-CR-LchnQ.js";import{f as Ja,a as Za,s as el,m as tl,u as al,b as ll,V as Gt,c as jt}from"./VMenu-1DOA9SEI.js";import{m as il,V as wt,a as ol}from"./VCheckboxBtn-DxTJLbWV.js";import{V as xt,a as sl,b as nl,c as rl}from"./VExpansionPanels-Nrk2ITNM.js";import{B as ee}from"./Button-CLDMkOkF.js";import{L as ul}from"./ListItem-B7bHYA4R.js";import{V as dl}from"./VToolbar-BG8y1FYY.js";import{V as ke,a as ye}from"./VCardText-_gwoREqT.js";import{V as cl}from"./VVirtualScroll-ChC1ngc2.js";const ml=x(da,[["__scopeId","data-v-42f910eb"]]),vl={class:"media-thumb"},pl={style:{"margin-left":"-10px","padding-right":"5px"}},yl=A({__name:"AddToPlaylistDialog",setup(l){const a=q(!1),s=q([]),o=q([]),n=q(),i=q([]);Ae(()=>{me.on("playlistdialog",async h=>{a.value=!0,i.value=h.items,n.value=h.parentItem,await d()}),Oe(()=>{me.off("playlistdialog")})});const d=async function(){s.value=[],o.value=[];const h=await _.getLibraryPlaylists(),p=i.value.length?i.value[0]:void 0;for(const m of h){if(!m.provider_mappings.filter($=>$.available).length||!m.is_editable||n.value&&n.value.media_type===te.PLAYLIST&&m.item_id===n.value.item_id)continue;const P=_.providers[m.provider_mappings[0].provider_instance];P&&(P.domain=="builtin"||P.is_streaming_provider||p!=null&&p.provider_mappings.filter($=>$.provider_instance==P.instance_id).length)&&s.value.push(m)}for(const m of Object.values(_.providers))m.supported_features.includes(_t.PLAYLIST_CREATE)&&m.supported_features.includes(_t.PLAYLIST_TRACKS_EDIT)&&(m.domain=="builtin"||m.is_streaming_provider||p!=null&&p.provider_mappings.filter(P=>P.provider_instance==m.instance_id).length)&&o.value.push(m.instance_id)},c=async function(h){if(i.value[0].media_type===te.TRACK)_.addPlaylistTracks(h.item_id,i.value.map(m=>m.uri));else if(i.value[0].media_type===te.ALBUM){var p=await _.getAlbumTracks(i.value[0].item_id,i.value[0].provider);_.addPlaylistTracks(h.item_id,p.map(m=>m.uri))}r(),t.activeAlert={type:fa.INFO,message:we("background_task_added"),persistent:!1}},f=async function(h){const p=prompt(we("new_playlist_name"));if(!p)return;const m=await _.createPlaylist(p,h);c(m)},r=function(){a.value=!1};return(h,p)=>(u(),V(Ot,{modelValue:a.value,"onUpdate:modelValue":[p[0]||(p[0]=m=>a.value=m),p[1]||(p[1]=m=>{e(t).dialogActive=m})],fullscreen:"",transition:"dialog-bottom-transition"},{default:y(()=>[v(We,null,{default:y(()=>[v(Aa,{icon:"mdi-playlist-plus",title:e(we)("add_playlist"),"menu-items":[{label:"close",icon:"mdi-close",action:r}]},null,8,["title","menu-items"]),v(De),p[4]||(p[4]=S("br",null,null,-1)),v(Ve,null,{default:y(()=>[(u(!0),g(N,null,Z(s.value,m=>(u(),g("div",{key:m.item_id},[v(se,{onClick:P=>c(m)},{prepend:y(()=>[S("div",vl,[v(fe,{item:m,size:50},null,8,["item"])])]),title:y(()=>[S("div",null,k(m.name),1)]),subtitle:y(()=>[S("div",null,k(m.owner),1)]),append:y(()=>[m.provider_mappings?(u(),V(Re,{key:0,domain:m.provider_mappings[0].provider_domain,size:20},null,8,["domain"])):C("",!0)]),_:2},1032,["onClick"])]))),128)),p[2]||(p[2]=S("div",{style:{height:"30px"}},null,-1)),v(De),p[3]||(p[3]=S("div",{style:{height:"30px"}},null,-1)),(u(!0),g(N,null,Z(o.value,m=>(u(),g("div",{key:m},[v(se,{onClick:P=>f(m)},{prepend:y(()=>[S("div",pl,[v(Re,{domain:e(_).providers[m].domain,size:50},null,8,["domain"])])]),title:y(()=>[S("div",null,k(e(we)("new_playlist")),1)]),subtitle:y(()=>[S("div",null,k(e(we)("create_playlist_on",[e(_).providers[m].name])),1)]),append:y(()=>[v(Re,{domain:e(_).providers[m].domain,size:20},null,8,["domain"])]),_:2},1032,["onClick"])]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"]))}}),fl=x(yl,[["__scopeId","data-v-a7c53a67"]]),hl=x(va,[["__scopeId","data-v-05ea19a8"]]),_l=ae({scrollable:Boolean,...ge(),...Ea(),...Se({tag:"main"})},"VMain"),gl=le()({name:"VMain",props:_l(),setup(l,a){let{slots:s}=a;const{dimensionStyles:o}=La(l),{mainStyles:n}=ja(),{ssrBootStyles:i}=Ge();return ie(()=>v(l.tag,{class:["v-main",{"v-main--scrollable":l.scrollable},l.class],style:[n.value,i.value,o.value,l.style]},{default:()=>{var d,c;return[l.scrollable?v("div",{class:"v-main__scroller"},[(d=s.default)==null?void 0:d.call(s)]):(c=s.default)==null?void 0:c.call(s)]}})),{}}}),bl=A({__name:"View",setup(l){return(a,s)=>{const o=ha("router-view");return u(),V(gl,{id:"cont",class:"overflow-y-auto",style:{height:"0px"}},{default:y(()=>{var n,i,d;return[e(t).navigationMenuStyle=="vertical"?(u(),V(ml,{key:0})):C("",!0),v(o,null,{default:y(({Component:c})=>[(u(),V(_a(c)))]),_:1}),v(fl),v(hl),v(Xa,{"model-value":e(t).activeAlert!==void 0,color:((n=e(t).activeAlert)==null?void 0:n.type)||"grey",text:(i=e(t).activeAlert)==null?void 0:i.message,"close-on-content-click":"",position:"sticky",timeout:(d=e(t).activeAlert)!=null&&d.persistent?-1:5e3,"z-index":"999999",style:{"z-index":"999999"},"onUpdate:modelValue":s[0]||(s[0]=()=>e(t).activeAlert=void 0)},null,8,["model-value","color","text","timeout"])]}),_:1})}}}),wl=ae({baseColor:String,bgColor:String,color:String,grow:Boolean,mode:{type:String,validator:l=>!l||["horizontal","shift"].includes(l)},height:{type:[Number,String],default:56},active:{type:Boolean,default:!0},...Et(),...ge(),...Lt(),...Wt(),...Rt(),...Yt({name:"bottom-navigation"}),...Se({tag:"header"}),...Wa({selectedClass:"v-btn--selected"}),...Ee()},"VBottomNavigation"),kl=le()({name:"VBottomNavigation",props:wl(),emits:{"update:active":l=>!0,"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const{themeClasses:o}=It(),{borderClasses:n}=Ht(l),{backgroundColorClasses:i,backgroundColorStyles:d}=je(X(l,"bgColor")),{densityClasses:c}=Ut(l),{elevationClasses:f}=Ft(l),{roundedClasses:r}=Dt(l),{ssrBootStyles:h}=Ge(),p=I(()=>Number(l.height)-(l.density==="comfortable"?8:0)-(l.density==="compact"?16:0)),m=Ye(l,"active",l.active),{layoutItemStyles:P}=Xt({id:l.name,order:I(()=>parseInt(l.order,10)),position:I(()=>"bottom"),layoutSize:I(()=>m.value?p.value:0),elementSize:p,active:m,absolute:X(l,"absolute")});return Nt(l,Ra),St({VBtn:{baseColor:X(l,"baseColor"),color:X(l,"color"),density:X(l,"density"),stacked:I(()=>l.mode!=="horizontal"),variant:"text"}},{scoped:!0}),ie(()=>v(l.tag,{class:["v-bottom-navigation",{"v-bottom-navigation--active":m.value,"v-bottom-navigation--grow":l.grow,"v-bottom-navigation--shift":l.mode==="shift"},o.value,i.value,n.value,c.value,f.value,r.value,l.class],style:[d.value,P.value,{height:Pe(p.value)},h.value,l.style]},{default:()=>[s.default&&v("div",{class:"v-bottom-navigation__content"},[s.default()])]})),{}}}),Ke=Symbol.for("vuetify:v-tabs"),Pl=ae({fixed:Boolean,sliderColor:String,hideSlider:Boolean,direction:{type:String,default:"horizontal"},...Qt(Ha({selectedClass:"v-tab--selected",variant:"text"}),["active","block","flat","location","position","symbol"])},"VTab"),_e=le()({name:"VTab",props:Pl(),setup(l,a){let{slots:s,attrs:o}=a;const{textColorClasses:n,textColorStyles:i}=Ua(l,"sliderColor"),d=q(),c=q(),f=I(()=>l.direction==="horizontal"),r=I(()=>{var p,m;return((m=(p=d.value)==null?void 0:p.group)==null?void 0:m.isSelected.value)??!1});function h(p){var P,$;let{value:m}=p;if(m){const z=($=(P=d.value)==null?void 0:P.$el.parentElement)==null?void 0:$.querySelector(".v-tab--selected .v-tab__slider"),E=c.value;if(!z||!E)return;const T=getComputedStyle(z).color,Y=z.getBoundingClientRect(),G=E.getBoundingClientRect(),b=f.value?"x":"y",w=f.value?"X":"Y",B=f.value?"right":"bottom",M=f.value?"width":"height",D=Y[b],j=G[b],O=D>j?Y[B]-G[B]:Y[b]-G[b],ue=Math.sign(O)>0?f.value?"right":"bottom":Math.sign(O)<0?f.value?"left":"top":"center",de=(Math.abs(O)+(Math.sign(O)<0?Y[M]:G[M]))/Math.max(Y[M],G[M])||0,ce=Y[M]/G[M]||0,be=1.5;Za(E,{backgroundColor:[T,"currentcolor"],transform:[`translate${w}(${O}px) scale${w}(${ce})`,`translate${w}(${O/be}px) scale${w}(${(de-1)/be+1})`,"none"],transformOrigin:Array(3).fill(ue)},{duration:225,easing:el})}}return ie(()=>{const p=$e.filterProps(l);return v($e,F({symbol:Ke,ref:d,class:["v-tab",l.class],style:l.style,tabindex:r.value?0:-1,role:"tab","aria-selected":String(r.value),active:!1},p,o,{block:l.fixed,maxWidth:l.fixed?300:void 0,"onGroup:selected":h}),{...s,default:()=>{var m;return v(N,null,[((m=s.default)==null?void 0:m.call(s))??l.text,!l.hideSlider&&v("div",{ref:c,class:["v-tab__slider",n.value],style:i.value},null)])}})}),Ja({},d)}}),Cl=l=>{const{touchstartX:a,touchendX:s,touchstartY:o,touchendY:n}=l,i=.5,d=16;l.offsetX=s-a,l.offsetY=n-o,Math.abs(l.offsetY)<i*Math.abs(l.offsetX)&&(l.left&&s<a-d&&l.left(l),l.right&&s>a+d&&l.right(l)),Math.abs(l.offsetX)<i*Math.abs(l.offsetY)&&(l.up&&n<o-d&&l.up(l),l.down&&n>o+d&&l.down(l))};function Vl(l,a){var o;const s=l.changedTouches[0];a.touchstartX=s.clientX,a.touchstartY=s.clientY,(o=a.start)==null||o.call(a,{originalEvent:l,...a})}function $l(l,a){var o;const s=l.changedTouches[0];a.touchendX=s.clientX,a.touchendY=s.clientY,(o=a.end)==null||o.call(a,{originalEvent:l,...a}),Cl(a)}function Il(l,a){var o;const s=l.changedTouches[0];a.touchmoveX=s.clientX,a.touchmoveY=s.clientY,(o=a.move)==null||o.call(a,{originalEvent:l,...a})}function Sl(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a={touchstartX:0,touchstartY:0,touchendX:0,touchendY:0,touchmoveX:0,touchmoveY:0,offsetX:0,offsetY:0,left:l.left,right:l.right,up:l.up,down:l.down,start:l.start,move:l.move,end:l.end};return{touchstart:s=>Vl(s,a),touchend:s=>$l(s,a),touchmove:s=>Il(s,a)}}function Ql(l,a){var c;const s=a.value,o=s!=null&&s.parent?l.parentElement:l,n=(s==null?void 0:s.options)??{passive:!0},i=(c=a.instance)==null?void 0:c.$.uid;if(!o||!i)return;const d=Sl(a.value);o._touchHandlers=o._touchHandlers??Object.create(null),o._touchHandlers[i]=d,Tt(d).forEach(f=>{o.addEventListener(f,d[f],n)})}function Tl(l,a){var i,d;const s=(i=a.value)!=null&&i.parent?l.parentElement:l,o=(d=a.instance)==null?void 0:d.$.uid;if(!(s!=null&&s._touchHandlers)||!o)return;const n=s._touchHandlers[o];Tt(n).forEach(c=>{s.removeEventListener(c,n[c])}),delete s._touchHandlers[o]}const Kt={mounted:Ql,unmounted:Tl},Jt=Symbol.for("vuetify:v-window"),Zt=Symbol.for("vuetify:v-window-group"),ea=ae({continuous:Boolean,nextIcon:{type:[Boolean,String,Function,Object],default:"$next"},prevIcon:{type:[Boolean,String,Function,Object],default:"$prev"},reverse:Boolean,showArrows:{type:[Boolean,String],validator:l=>typeof l=="boolean"||l==="hover"},touch:{type:[Object,Boolean],default:void 0},direction:{type:String,default:"horizontal"},modelValue:null,disabled:Boolean,selectedClass:{type:String,default:"v-window-item--active"},mandatory:{type:[Boolean,String],default:"force"},...ge(),...Se(),...Ee()},"VWindow"),kt=le()({name:"VWindow",directives:{Touch:Kt},props:ea(),emits:{"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const{themeClasses:o}=Xe(l),{isRtl:n}=Bt(),{t:i}=ga(),d=Nt(l,Zt),c=q(),f=I(()=>n.value?!l.reverse:l.reverse),r=Te(!1),h=I(()=>{const b=l.direction==="vertical"?"y":"x",B=(f.value?!r.value:r.value)?"-reverse":"";return`v-window-${b}${B}-transition`}),p=Te(0),m=q(void 0),P=I(()=>d.items.value.findIndex(b=>d.selected.value.includes(b.id)));re(P,(b,w)=>{const B=d.items.value.length,M=B-1;B<=2?r.value=b<w:b===M&&w===0?r.value=!0:b===0&&w===M?r.value=!1:r.value=b<w}),ba(Jt,{transition:h,isReversed:r,transitionCount:p,transitionHeight:m,rootRef:c});const $=I(()=>l.continuous||P.value!==0),z=I(()=>l.continuous||P.value!==d.items.value.length-1);function E(){$.value&&d.prev()}function T(){z.value&&d.next()}const Y=I(()=>{const b=[],w={icon:n.value?l.nextIcon:l.prevIcon,class:`v-window__${f.value?"right":"left"}`,onClick:d.prev,"aria-label":i("$vuetify.carousel.prev")};b.push($.value?s.prev?s.prev({props:w}):v($e,w,null):v("div",null,null));const B={icon:n.value?l.prevIcon:l.nextIcon,class:`v-window__${f.value?"left":"right"}`,onClick:d.next,"aria-label":i("$vuetify.carousel.next")};return b.push(z.value?s.next?s.next({props:B}):v($e,B,null):v("div",null,null)),b}),G=I(()=>l.touch===!1?l.touch:{...{left:()=>{f.value?E():T()},right:()=>{f.value?T():E()},start:w=>{let{originalEvent:B}=w;B.stopPropagation()}},...l.touch===!0?{}:l.touch});return ie(()=>qt(v(l.tag,{ref:c,class:["v-window",{"v-window--show-arrows-on-hover":l.showArrows==="hover"},o.value,l.class],style:l.style},{default:()=>{var b,w;return[v("div",{class:"v-window__container",style:{height:m.value}},[(b=s.default)==null?void 0:b.call(s,{group:d}),l.showArrows!==!1&&v("div",{class:"v-window__controls"},[Y.value])]),(w=s.additional)==null?void 0:w.call(s,{group:d})]}}),[[wa("touch"),G.value]])),{group:d}}}),Bl=ae({...Qt(ea(),["continuous","nextIcon","prevIcon","showArrows","touch","mandatory"])},"VTabsWindow"),ql=le()({name:"VTabsWindow",props:Bl(),emits:{"update:modelValue":l=>!0},setup(l,a){let{slots:s}=a;const o=zt(Ke,null),n=Ye(l,"modelValue"),i=I({get(){var d;return n.value!=null||!o?n.value:(d=o.items.value.find(c=>o.selected.value.includes(c.id)))==null?void 0:d.value},set(d){n.value=d}});return ie(()=>{const d=kt.filterProps(l);return v(kt,F({_as:"VTabsWindow"},d,{modelValue:i.value,"onUpdate:modelValue":c=>i.value=c,class:["v-tabs-window",l.class],style:l.style,mandatory:!1,touch:!1}),s)}),{}}}),ta=ae({reverseTransition:{type:[Boolean,String],default:void 0},transition:{type:[Boolean,String],default:void 0},...ge(),...Fa(),...tl()},"VWindowItem"),Pt=le()({name:"VWindowItem",directives:{Touch:Kt},props:ta(),emits:{"group:selected":l=>!0},setup(l,a){let{slots:s}=a;const o=zt(Jt),n=Da(l,Zt),{isBooted:i}=Ge();if(!o||!n)throw new Error("[Vuetify] VWindowItem must be used inside VWindow");const d=Te(!1),c=I(()=>i.value&&(o.isReversed.value?l.reverseTransition!==!1:l.transition!==!1));function f(){!d.value||!o||(d.value=!1,o.transitionCount.value>0&&(o.transitionCount.value-=1,o.transitionCount.value===0&&(o.transitionHeight.value=void 0)))}function r(){var $;d.value||!o||(d.value=!0,o.transitionCount.value===0&&(o.transitionHeight.value=Pe(($=o.rootRef.value)==null?void 0:$.clientHeight)),o.transitionCount.value+=1)}function h(){f()}function p($){d.value&&Pa(()=>{!c.value||!d.value||!o||(o.transitionHeight.value=Pe($.clientHeight))})}const m=I(()=>{const $=o.isReversed.value?l.reverseTransition:l.transition;return c.value?{name:typeof $!="string"?o.transition.value:$,onBeforeEnter:r,onAfterEnter:f,onEnterCancelled:h,onBeforeLeave:r,onAfterLeave:f,onLeaveCancelled:h,onEnter:p}:!1}),{hasContent:P}=al(l,n.isSelected);return ie(()=>v(Na,{transition:m.value,disabled:!i.value},{default:()=>{var $;return[qt(v("div",{class:["v-window-item",n.selectedClass.value,l.class],style:l.style},[P.value&&(($=s.default)==null?void 0:$.call(s))]),[[ka,n.isSelected.value]])]}})),{groupItem:n}}}),zl=ae({...ta()},"VTabsWindowItem"),Ml=le()({name:"VTabsWindowItem",props:zl(),setup(l,a){let{slots:s}=a;return ie(()=>{const o=Pt.filterProps(l);return v(Pt,F({_as:"VTabsWindowItem"},o,{class:["v-tabs-window-item",l.class],style:l.style}),s)}),{}}});function Al(l){return l?l.map(a=>Ca(a)?a:{text:a,value:a}):[]}const El=ae({alignTabs:{type:String,default:"start"},color:String,fixedTabs:Boolean,items:{type:Array,default:()=>[]},stacked:Boolean,bgColor:String,grow:Boolean,height:{type:[Number,String],default:void 0},hideSlider:Boolean,sliderColor:String,...il({mandatory:"force",selectedClass:"v-tab-item--selected"}),...Lt(),...Se()},"VTabs"),Ne=le()({name:"VTabs",props:El(),emits:{"update:modelValue":l=>!0},setup(l,a){let{attrs:s,slots:o}=a;const n=Ye(l,"modelValue"),i=I(()=>Al(l.items)),{densityClasses:d}=Ut(l),{backgroundColorClasses:c,backgroundColorStyles:f}=je(X(l,"bgColor")),{scopeId:r}=ll();return St({VTab:{color:X(l,"color"),direction:X(l,"direction"),stacked:X(l,"stacked"),fixed:X(l,"fixedTabs"),sliderColor:X(l,"sliderColor"),hideSlider:X(l,"hideSlider")}}),ie(()=>{const h=wt.filterProps(l),p=!!(o.window||l.items.length>0);return v(N,null,[v(wt,F(h,{modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,class:["v-tabs",`v-tabs--${l.direction}`,`v-tabs--align-tabs-${l.alignTabs}`,{"v-tabs--fixed-tabs":l.fixedTabs,"v-tabs--grow":l.grow,"v-tabs--stacked":l.stacked},d.value,c.value,l.class],style:[{"--v-tabs-height":Pe(l.height)},f.value,l.style],role:"tablist",symbol:Ke},r,s),{default:()=>{var m;return[((m=o.default)==null?void 0:m.call(o))??i.value.map(P=>{var $;return(($=o.tab)==null?void 0:$.call(o,{item:P}))??v(_e,F(P,{key:P.text,value:P.value}),{default:o[`tab.${P.value}`]?()=>{var z;return(z=o[`tab.${P.value}`])==null?void 0:z.call(o,{item:P})}:void 0})})]}}),p&&v(ql,F({modelValue:n.value,"onUpdate:modelValue":m=>n.value=m,key:"tabs-window"},r),{default:()=>{var m;return[i.value.map(P=>{var $;return(($=o.item)==null?void 0:$.call(o,{item:P}))??v(Ml,{value:P.value},{default:()=>{var z;return(z=o[`item.${P.value}`])==null?void 0:z.call(o,{item:P})}})}),(m=o.window)==null?void 0:m.call(o)]}})])}),{}}}),Ll={class:"menuButton"},Wl={class:"menuButton"},Rl={class:"menuButton"},Hl=A({__name:"BottomNavigation",props:{height:{}},setup(l){const a=ca(),s=I(()=>{for(const o of a)if(Be.currentRoute.value.path.startsWith(o.path))return!R("tablet")&&o.isLibraryNode?"library":o.label;return""});return(o,n)=>(u(),V(kl,{height:o.height,grow:"",elevation:"15",style:{"border-top":"1px solid #20202035"}},{default:y(()=>[e(R)("tablet")?(u(),V(Ne,{key:0,stacked:"",grow:"","show-arrows":!1,"model-value":s.value,color:"accent","center-active":""},{default:y(()=>[(u(!0),g(N,null,Z(e(a),i=>(u(),V(_e,{key:i.label,to:i.path,value:i.label},{default:y(()=>[v(W,{size:"xx-large"},{default:y(()=>[L(k(i.icon),1)]),_:2},1024),S("span",Ll,k(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128))]),_:1},8,["model-value"])):(u(),V(Ne,{key:1,stacked:"",grow:"","show-arrows":!1,"model-value":s.value,color:"accent"},{default:y(()=>[(u(!0),g(N,null,Z(e(a).filter(i=>!i.isLibraryNode),i=>(u(),V(_e,{key:i.label,to:i.path,value:i.label},{default:y(()=>[v(W,{size:"xx-large"},{default:y(()=>[L(k(i.icon),1)]),_:2},1024),S("span",Wl,k(o.$t(i.label)),1)]),_:2},1032,["to","value"]))),128)),v(Gt,null,{activator:y(({props:i})=>[v(_e,F({key:"library"},i,{value:"library"}),{default:y(()=>[v(W,{size:"xx-large"},{default:y(()=>n[0]||(n[0]=[L("mdi-bookshelf")])),_:1}),S("span",Rl,k(o.$t("library")),1)]),_:2},1040)]),default:y(()=>[v(Ve,null,{default:y(()=>[(u(!0),g(N,null,Z(e(a).filter(i=>i.isLibraryNode),i=>(u(),V(se,{key:i.label,title:o.$t(i.label),"prepend-icon":i.icon,to:i.path},null,8,["title","prepend-icon","to"]))),128))]),_:1})]),_:1})]),_:1},8,["model-value"]))]),_:1},8,["height"]))}}),Ul={style:{width:"auto"}},Fl={key:0,style:{width:"100%"}},Dl={key:0,class:"time-text-row"},Nl={class:"text-caption time-text-right"},Ol=A({__name:"PlayerTimeline",props:{showLabels:{type:Boolean,default:!1}},setup(l){const a=q(!1),s=q(!0),o=q(!1),n=q(0),i=q(0),d=I(()=>t.curQueueItem?a.value?`-${Qe(t.curQueueItem.duration-f.value)}`:`${Qe(f.value)}`:"0:00"),c=I(()=>{var m;if(!t.curQueueItem||!t.curQueueItem.duration||((m=t.curQueueItem.media_item)==null?void 0:m.media_type)==te.RADIO)return"";const p=t.curQueueItem.duration;return Qe(p)}),f=I(()=>o.value?(i.value=n.value,n.value):t.activePlayerQueue?t.activePlayerQueue.elapsed_time:0);re(f,p=>{o.value||(n.value=p)});const r=function(){o.value=!0},h=()=>{o.value=!1,!o.value&&t.activePlayer&&_.playerCommandSeek(t.activePlayer.player_id,Math.round(i.value))};return(p,m)=>{var P;return u(),g("div",Ul,[e(t).activePlayerQueue?(u(),g("div",Fl,[v(xt,{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=$=>n.value=$),disabled:!e(t).curQueueItem||!e(t).curQueueItem.media_item||((P=e(t).curQueueItem.media_item)==null?void 0:P.media_type)!=e(te).TRACK,style:{width:"100%"},min:0,max:e(t).curQueueItem&&e(t).curQueueItem.duration,"hide-details":"","track-size":2,"thumb-size":s.value?0:10,onTouchstart:m[1]||(m[1]=$=>s.value=!1),onTouchend:m[2]||(m[2]=$=>s.value=!0),onMouseenter:m[3]||(m[3]=$=>s.value=!1),onMouseleave:m[4]||(m[4]=$=>s.value=!0),onStart:r,onEnd:h},null,8,["modelValue","disabled","max","thumb-size"]),p.showLabels?(u(),g("div",Dl,[S("div",{class:"text-caption time-text-left",onClick:m[5]||(m[5]=$=>a.value?a.value=!1:a.value=!0)},k(d.value),1),S("div",Nl,k(c.value),1)])):C("",!0)])):C("",!0)])}}}),aa=x(Ol,[["__scopeId","data-v-e32beba8"]]),Yl=A({__name:"ResponsiveIcon",props:{width:{default:void 0},height:{default:void 0},staticWidth:{default:void 0},staticHeight:{default:void 0},maxWidth:{default:void 0},maxHeight:{default:void 0},minWidth:{default:"24px"},minHeight:{default:"24px"},icon:{default:void 0},type:{default:"icon"},color:{default:void 0},disabled:{type:Boolean},badge:{type:Boolean,default:void 0}},emits:["click"],setup(l,{emit:a}){const s=()=>{if(o.value){const i=o.value.offsetWidth,d=o.value.offsetHeight,c=Math.min(i,d);n.value.$el.style.fontSize=`${c}px`}},o=q(),n=q();return Ae(()=>{s(),window.addEventListener("resize",s)}),Oe(()=>{window.removeEventListener("resize",s)}),(i,d)=>(u(),g("div",{ref_key:"responsiveIconHolder",ref:o,class:qe([i.type=="btn"&&!i.disabled?"responsive-icon-holder-btn":"responsive-icon-holder"]),style:U({width:i.staticWidth?i.staticWidth:i.width,height:i.staticWidth?i.staticWidth:i.height,maxHeight:i.staticHeight?i.staticHeight:i.maxHeight,maxWidth:i.staticWidth?i.staticWidth:i.maxWidth,minHeight:i.staticHeight?i.staticHeight:i.minHeight,minWidth:i.staticWidth?i.staticWidth:i.minWidth}),onClick:d[0]||(d[0]=c=>i.disabled?c.preventDefault():i.$emit("click",c))},[v(Fe,{"model-value":i.badge==!0,color:"error",dot:""},{default:y(()=>[i.type==="icon"?(u(),V(W,{key:0,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},He({_:2},[Z(i.$slots,(c,f)=>({name:f,fn:y(()=>[Ue(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):i.type==="btn"?(u(),V(W,{key:1,ref_key:"responsiveIcon",ref:n,class:"responsive-icon",style:{cursor:"pointer"},color:i.color?i.color:"",icon:i.icon?i.icon:"mdi-check",width:i.staticWidth?i.staticWidth:null,height:i.staticHeight?i.staticHeight:null,disabled:i.disabled},He({_:2},[Z(i.$slots,(c,f)=>({name:f,fn:y(()=>[Ue(i.$slots,f,{},void 0,!0)])}))]),1032,["color","icon","width","height","disabled"])):C("",!0)]),_:3},8,["model-value"])],6))}}),ve=x(Yl,[["__scopeId","data-v-8f009710"]]),la=A({__name:"RepeatBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){return(a,s)=>{var o,n;return a.isVisible&&a.playerQueue?(u(),V(ve,F({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(he)((o=a.icon)==null?void 0:o.color,[[a.playerQueue.repeat_mode==e(H).OFF,null],[a.playerQueue.repeat_mode==e(H).ALL,"primary"],[a.playerQueue.repeat_mode==e(H).ONE,"primary"]]),icon:e(he)((n=a.icon)==null?void 0:n.icon,[[a.playerQueue.repeat_mode==e(H).OFF,"mdi-repeat-off"],[a.playerQueue.repeat_mode==e(H).ALL,"mdi-repeat"],[a.playerQueue.repeat_mode==e(H).ONE,"mdi-repeat-once"],[!0,"mdi-repeat-off"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(_).queueCommandRepeat(a.playerQueue.queue_id||"",e(he)(null,[[a.playerQueue.repeat_mode==e(H).OFF,e(H).ONE],[a.playerQueue.repeat_mode==e(H).ALL,e(H).OFF],[a.playerQueue.repeat_mode==e(H).ONE,e(H).ALL]])))}),null,16,["disabled","color","icon"])):C("",!0)}}}),ia=A({__name:"ShuffleBtn",props:{playerQueue:{},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){return(a,s)=>{var o,n;return a.isVisible&&a.playerQueue?(u(),V(ve,F({key:0},a.icon,{disabled:!a.playerQueue.active||a.playerQueue.items==0,color:e(he)((o=a.icon)==null?void 0:o.color,[[a.playerQueue.shuffle_enabled,"primary",""]]),icon:e(he)((n=a.icon)==null?void 0:n.icon,[[a.playerQueue.shuffle_enabled,"mdi-shuffle"],[a.playerQueue.shuffle_enabled==!1,"mdi-shuffle-disabled"],[!0,"mdi-shuffle"]]),type:"btn",onClick:s[0]||(s[0]=i=>e(_).queueCommandShuffle(a.playerQueue.queue_id,!a.playerQueue.shuffle_enabled))}),null,16,["disabled","color","icon"])):C("",!0)}}}),Je=A({__name:"PlayBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},withCircle:{type:Boolean,default:!0},icon:{default:void 0},iconStyle:{default:"circle"}},setup(l){const a=l,s=I(()=>a.playerQueue?a.playerQueue.items>0:!1),o=I(()=>{var i;return!(!a.player||(i=a.playerQueue)!=null&&i.active||!a.player.current_media)}),n=I(()=>{var i;return((i=a.player)==null?void 0:i.state)==Ce.PLAYING?"mdi-pause":"mdi-play"});return(i,d)=>i.isVisible&&i.player?(u(),V(ve,F({key:0},i.icon,{disabled:!s.value&&!o.value,icon:i.iconStyle?`${n.value}-${i.iconStyle}`:n.value,type:"btn",onClick:d[0]||(d[0]=c=>e(_).playerCommandPlayPause(i.player.player_id))}),null,16,["disabled","icon"])):C("",!0)}}),oa=A({__name:"PreviousBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=l,s=I(()=>{var n,i;return!((n=a.playerQueue)!=null&&n.active)||!((i=a.playerQueue)!=null&&i.items)||!a.playerQueue.current_index?!1:a.playerQueue.current_index>0}),o=I(()=>{var n;return!a.player||(n=a.playerQueue)!=null&&n.active||!a.player.current_media?!1:a.player.supported_features.includes(J.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(u(),V(ve,F({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-previous-outline",type:"btn",onClick:i[0]||(i[0]=d=>e(_).playerCommandPrevious(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),sa=A({__name:"NextBtn",props:{player:{},playerQueue:{default:void 0},isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=l,s=I(()=>{var n;return(n=a.playerQueue)!=null&&n.active?(a.playerQueue.current_index||0)<a.playerQueue.items-1:!1}),o=I(()=>{var n;return!a.player||(n=a.playerQueue)!=null&&n.active||!a.player.current_media?!1:a.player.supported_features.includes(J.NEXT_PREVIOUS)});return(n,i)=>n.isVisible&&n.player?(u(),V(ve,F({key:0},n.icon,{disabled:!s.value&&!o.value,icon:"mdi-skip-next-outline",type:"btn",onClick:i[0]||(i[0]=d=>e(_).playerCommandNext(n.player.player_id))}),null,16,["disabled"])):C("",!0)}}),Xl={key:0,class:"player-controls"},Gl={key:0,class:"player-controls-elements"},jl={key:1,class:"player-controls-elements"},xl={key:2},Kl={key:3,class:"player-controls-elements"},Jl={key:4,class:"player-controls-elements"},Ct=A({__name:"PlayerControls",props:{visibleComponents:{default:()=>({repeat:{isVisible:!0},shuffle:{isVisible:!0},play:{isVisible:!0},previous:{isVisible:!0},next:{isVisible:!0}})}},setup(l){return(a,s)=>{var o,n,i,d,c;return a.visibleComponents?(u(),g("div",Xl,[a.visibleComponents&&((o=a.visibleComponents.shuffle)!=null&&o.isVisible)?(u(),g("div",Gl,[v(ia,{"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.shuffle.icon},null,8,["player-queue","icon"])])):C("",!0),a.visibleComponents&&((n=a.visibleComponents.previous)!=null&&n.isVisible)?(u(),g("div",jl,[v(oa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item",icon:a.visibleComponents.previous.icon},null,8,["player","player-queue","icon"])])):C("",!0),a.visibleComponents&&((i=a.visibleComponents.play)!=null&&i.isVisible)?(u(),g("div",xl,[v(Je,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","icon-style":a.visibleComponents.play.withCircle?"circle":"",icon:a.visibleComponents.play.icon},null,8,["player","player-queue","icon-style","icon"])])):C("",!0),a.visibleComponents&&((d=a.visibleComponents.next)!=null&&d.isVisible)?(u(),g("div",Kl,[v(sa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.next.icon,"static-height":"24px","static-width":"24px"},null,8,["player","player-queue","icon"])])):C("",!0),a.visibleComponents&&((c=a.visibleComponents.repeat)!=null&&c.isVisible)?(u(),g("div",Jl,[v(la,{"player-queue":e(t).activePlayerQueue,icon:a.visibleComponents.repeat.icon,"static-height":"24px","static-width":"24px"},null,8,["player-queue","icon"])])):C("",!0)])):C("",!0)}}}),Zl={props:{width:String,height:String,style:String,isPowered:Boolean,allowWheel:Boolean},emits:["update:model-value"],setup(l,a){const s=q(!0),o=I(()=>({class:"player-volume",hideDetails:!0,trackSize:2,thumbSize:s.value?0:10,step:2,elevation:0,style:`width: ${l.width}; height:${l.height}; display: inline-grid; ${l.style}`,disabled:!l.isPowered})),n=I(()=>({...o.value,...a}));return{isThumbHidden:s,playerVolumeProps:n,onWheel:({deltaY:d})=>{if(!l.allowWheel)return;const c=n.value.step,f=a.attrs["model-value"],r=d<0?c:-c;a.emit("update:model-value",f+r)}}}};function ei(l,a,s,o,n,i){return u(),V(xt,F(o.playerVolumeProps,{onTouchstart:a[0]||(a[0]=d=>o.isThumbHidden=!1),onTouchend:a[1]||(a[1]=d=>o.isThumbHidden=!0),onMouseenter:a[2]||(a[2]=d=>o.isThumbHidden=!1),onMouseleave:a[3]||(a[3]=d=>o.isThumbHidden=!0),onWheel:K(o.onWheel,["prevent"]),onEnd:a[4]||(a[4]=d=>l.$emit("update:model-value",d))}),He({_:2},[Z(l.$slots,(d,c)=>({name:c,fn:y(()=>[Ue(l.$slots,c,{},void 0,!0)])}))]),1040,["onWheel"])}const Ie=x(Zl,[["render",ei],["__scopeId","data-v-dce2c4f7"]]),na=A({__name:"QueueBtn",props:{isVisible:{type:Boolean,default:!0},icon:{default:void 0}},setup(l){const a=function(){t.showFullscreenPlayer&&t.showQueueItems?t.showQueueItems=!1:t.showFullscreenPlayer&&!t.showQueueItems?t.showQueueItems=!0:(t.showQueueItems=!0,t.showFullscreenPlayer=!0)};return(s,o)=>{var n;return s.isVisible?(u(),V(ve,F({key:0},s.icon,{disabled:!e(t).activePlayerId||e(t).showFullscreenPlayer&&!e(t).curQueueItem&&!e(t).showQueueItems,icon:"mdi-playlist-play",color:e(he)((n=s.icon)==null?void 0:n.color,[[e(t).showFullscreenPlayer&&e(t).showQueueItems,"primary",""]]),type:"btn",onClick:a}),null,16,["disabled","color"])):C("",!0)}}}),ra=(l,a)=>{const s=[{label:l.powered?"power_off_player":"power_on_player",labelArgs:[],action:()=>{_.playerCommandPowerToggle(l.player_id)},icon:"mdi-power"}],o=Object.values(_.players).filter(n=>n.player_id!=l.player_id&&n.available&&n.enabled&&n.provider==l.provider&&n.supported_features.includes(J.SYNC)&&!n.synced_to);return l.supported_features.includes(J.SYNC)&&!l.synced_to&&l.type==ne.PLAYER&&l.group_childs.length==0&&o.length>0&&s.push({label:"sync_player_with",labelArgs:[],icon:"mdi-link-variant",subItems:o.map(n=>({label:n.display_name,labelArgs:[],action:()=>{_.playerCommandSync(l.player_id,n.player_id)}})).sort((n,i)=>{var d;return n.label.toUpperCase()>((d=i.label)==null?void 0:d.toUpperCase())?1:-1})}),a&&s.push({label:a.shuffle_enabled?"shuffle_disable":"shuffle_enable",labelArgs:[],action:()=>{_.queueCommandShuffleToggle(a.queue_id)},icon:a.shuffle_enabled?"mdi-shuffle-disabled":"mdi-shuffle"}),a&&s.push({label:"select_repeat_mode",labelArgs:[],subItems:[{label:"repeat_mode.off",labelArgs:[],action:()=>{_.queueCommandRepeat(a.queue_id,H.OFF)},selected:a.repeat_mode==H.OFF},{label:"repeat_mode.all",labelArgs:[],action:()=>{_.queueCommandRepeat(a.queue_id,H.ALL)},selected:a.repeat_mode==H.ALL},{label:"repeat_mode.one",labelArgs:[],action:()=>{_.queueCommandRepeat(a.queue_id,H.ONE)},selected:a.repeat_mode==H.ONE}],icon:"mdi-repeat"}),a!=null&&a.items&&s.push({label:"transfer_queue",icon:"mdi-swap-horizontal",subItems:Object.values(_.players).filter(n=>n.player_id!=a.queue_id&&n.player_id!=l.player_id&&n.available&&n.enabled&&!n.synced_to).map(n=>({label:n.display_name,labelArgs:[],action:()=>{_.queueCommandTransfer(a.queue_id,n.player_id),t.activePlayerId=n.player_id}})).sort((n,i)=>{var d;return n.label.toUpperCase()>((d=i.label)==null?void 0:d.toUpperCase())?1:-1})}),a!=null&&a.items&&s.push({label:"queue_clear",labelArgs:[],action:()=>{_.queueCommandClear(a.queue_id)},icon:"mdi-cancel"}),a&&"dont_stop_the_music_enabled"in a&&s.push({label:a.dont_stop_the_music_enabled?"dont_stop_the_music_disable":"dont_stop_the_music_enable",labelArgs:[],action:()=>{_.queueCommandDontStopTheMusicToggle(a.queue_id)},icon:"mdi-all-inclusive"}),s.push({label:"open_player_settings",labelArgs:[],action:()=>{t.showFullscreenPlayer=!1,t.showPlayersMenu=!1,Be.push(`/settings/editplayer/${l.player_id}`)},icon:"mdi-cog-outline"}),s},ti={class:"main"},ai={key:0,class:"main-media-details"},li={key:0,class:"main-media-details-image"},ii={class:"main-media-details-track-info"},oi={key:0},si={key:0},ni={style:{margin:"auto","padding-top":"20px"}},ri={key:1,class:"main-queue-items"},ui={class:"queue-items-scroll-box"},di={class:"media-thumb listitem-media-thumb"},ci={key:0},mi={key:2,class:"main-queue-items"},vi={class:"main-media-details-image main-media-details-image-alt"},pi={class:"player-bottom"},yi={class:"row",style:{"margin-left":"5%","margin-right":"5%"}},fi={class:"media-controls"},hi={key:0,class:"row",style:{"margin-left":"5%","margin-right":"5%"}},_i={key:1,class:"row",style:{height:"70px",display:"flex","justify-content":"center","align-items":"center","padding-bottom":"15px","padding-top":"15px"}},gi=A({__name:"PlayerFullscreen",props:{colorPalette:{}},setup(l){Va();const{name:a}=Mt(),s=l,o=q([]),n=q(""),i=q(0),d=q(!1),c=I(()=>t.activePlayerQueue?o.value.slice(t.activePlayerQueue.current_index):[]),f=I(()=>t.activePlayerQueue?o.value.slice(0,t.activePlayerQueue.current_index):[]),r=I(()=>{switch(a.value){case"xs":return"1.2em";case"sm":return"1.6em";case"md":return"2em";case"lg":return t.showQueueItems?"1.5em":"2.5em";case"xl":return t.showQueueItems?"1.6em":"3em";case"xxl":return t.showQueueItems?"1.7em":"3.2em";default:return"1.0em."}}),h=I(()=>{switch(a.value){case"xs":return"1.0em";case"sm":return"1.2em";case"md":return"1.7em";case"lg":return t.showQueueItems?"1.0em":"1.6em";case"xl":return t.showQueueItems?"1.2em":"2em";case"xxl":return t.showQueueItems?"1.2em":"2em";default:return"1.0em."}}),p=function(b){t.showFullscreenPlayer=!1,Be.push({name:b.media_type,params:{itemId:b.item_id,provider:b.provider}})},m=function(b){t.globalSearchTerm=b,Be.push({name:"search"}),t.showFullscreenPlayer=!1},P=function(b,w){var D,j,O,ue,pe,de,ce;const B=o.value.indexOf(w),M=[{label:"play_now",labelArgs:[],action:()=>{z(w,"play_now")},icon:"mdi-play-circle-outline",disabled:B===((D=t.activePlayerQueue)==null?void 0:D.current_index)||B===((j=t.activePlayerQueue)==null?void 0:j.index_in_buffer)},{label:"play_next",labelArgs:[],action:()=>{z(w,"move_next")},icon:"mdi-skip-next-circle-outline",disabled:B<=(((O=t.activePlayerQueue)==null?void 0:O.index_in_buffer)||0)},{label:"queue_move_up",labelArgs:[],action:()=>{z(w,"up")},icon:"mdi-arrow-up",disabled:B<=(((ue=t.activePlayerQueue)==null?void 0:ue.index_in_buffer)||0)},{label:"queue_move_down",labelArgs:[],action:()=>{z(w,"down")},icon:"mdi-arrow-down",disabled:B<=(((pe=t.activePlayerQueue)==null?void 0:pe.index_in_buffer)||0)},{label:"queue_delete",labelArgs:[],action:()=>{z(w,"delete")},icon:"mdi-delete",disabled:B<=(((de=t.activePlayerQueue)==null?void 0:de.index_in_buffer)||0)}];((ce=w==null?void 0:w.media_item)==null?void 0:ce.media_type)==te.TRACK&&M.push({label:"show_info",labelArgs:[],action:()=>{p(w.media_item)},icon:"mdi-information-outline",disabled:!1}),me.emit("contextmenu",{items:M,posX:b.clientX,posY:b.clientY})},$=function(b){t.activePlayer&&me.emit("contextmenu",{items:ra(t.activePlayer,t.activePlayerQueue),posX:b.clientX,posY:b.clientY})},z=function(b,w){var B,M,D,j,O;!b||!t.activePlayerQueue||(w=="play_now"?_.queueCommandPlayIndex((B=t.activePlayerQueue)==null?void 0:B.queue_id,b.queue_item_id):w=="move_next"?_.queueCommandMoveNext((M=t.activePlayerQueue)==null?void 0:M.queue_id,b.queue_item_id):w=="up"?_.queueCommandMoveUp((D=t.activePlayerQueue)==null?void 0:D.queue_id,b.queue_item_id):w=="down"?_.queueCommandMoveDown((j=t.activePlayerQueue)==null?void 0:j.queue_id,b.queue_item_id):w=="delete"&&_.queueCommandDelete((O=t.activePlayerQueue)==null?void 0:O.queue_id,b.queue_item_id))},E=async function(){d.value=!0,o.value=[],await gt(100),d.value=!1},T=async function({done:b}){var D;if(!t.activePlayerQueue||t.activePlayerQueue.items==0){b("empty");return}if(o.value.length>=((D=t.activePlayerQueue)==null?void 0:D.items)){b("empty");return}const w=o.value.length,B=(t.activePlayerQueue.current_index||0)+50,M=await _.getPlayerQueueItems(t.activePlayerQueue.queue_id,B,w);o.value.push(...M),M.length<50?b("empty"):b("ok")};Ae(()=>{const b=_.subscribe($a.QUEUE_ITEMS_UPDATED,w=>{var B;w.object_id==((B=t.activePlayerQueue)==null?void 0:B.queue_id)&&(w.data,E())});Oe(b)});const Y=function(b){var B;if(!((B=t.curQueueItem)!=null&&B.media_item))return;if(!t.curQueueItem.media_item.favorite){_.toggleFavorite(t.curQueueItem.media_item);return}const w=[{label:"favorites_remove",labelArgs:[],action:()=>{_.toggleFavorite(t.curQueueItem.media_item)},icon:"mdi-heart"},{label:"add_playlist",labelArgs:[],action:()=>{me.emit("playlistdialog",{items:[t.curQueueItem.media_item]})},icon:"mdi-plus-circle-outline"}];me.emit("contextmenu",{items:w,posX:b.clientX,posY:b.clientY})},G=function(){d.value=!0,gt(100).then(()=>{d.value=!1})};return re(()=>t.activePlayerId,b=>{E()},{immediate:!0}),re(()=>s.colorPalette,b=>{!b.darkColor||!b.lightColor?n.value=ze.theme.current.value.dark?"#000":"#fff":n.value=ze.theme.current.value.dark?b.darkColor:b.lightColor}),(b,w)=>(u(),V(Ot,{modelValue:e(t).showFullscreenPlayer,"onUpdate:modelValue":w[12]||(w[12]=B=>e(t).showFullscreenPlayer=B),fullscreen:"",scrim:!1,transition:"dialog-bottom-transition","z-index":"9999"},{default:y(()=>[v(We,{color:e(Ia)(n.value,70,80)},{default:y(()=>{var B,M,D,j,O,ue,pe,de,ce,be,Ze,et,tt,at,lt,it,ot,st,nt,rt,ut,dt;return[v(dl,{class:"v-toolbar-default",color:"transparent"},{prepend:y(()=>[v(ee,{icon:"",onClick:w[0]||(w[0]=Q=>e(t).showFullscreenPlayer=!1)},{default:y(()=>[v(W,{icon:"mdi-chevron-down"})]),_:1})]),append:y(()=>[v(ee,{icon:"",onClick:w[1]||(w[1]=Q=>e(t).showFullscreenPlayer=!1)},{default:y(()=>[v(W,{icon:"mdi-dots-vertical",onClick:K($,["stop"])})]),_:1})]),_:1}),S("div",ti,[e(R)("bp7")||!e(t).showQueueItems?(u(),g("div",ai,[b.$vuetify.display.height>600?(u(),g("div",li,[!((B=e(t).curQueueItem)!=null&&B.image)&&((D=(M=e(t).activePlayer)==null?void 0:M.current_media)!=null&&D.image_url)?(u(),V(xe,{key:0,style:{"max-width":"100%",width:"auto","border-radius":"4px"},src:e(t).activePlayer.current_media.image_url},null,8,["src"])):(u(),V(fe,{key:1,item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"},fallback:b.$vuetify.theme.current.dark?e(Me):e($t)},null,8,["item","fallback"]))])):C("",!0),S("div",ii,[((j=e(t).activePlayer)==null?void 0:j.powered)==!1?(u(),V(ke,{key:0,style:U(`font-size: ${r.value};`)},{default:y(()=>{var Q;return[L(k((Q=e(t).activePlayer)==null?void 0:Q.display_name),1)]}),_:1},8,["style"])):(O=e(t).curQueueItem)!=null&&O.media_item?(u(),V(ke,{key:1,style:U(`font-size: ${r.value};cursor:pointer;`),onClick:w[2]||(w[2]=Q=>p(e(t).curQueueItem.media_item))},{default:y(()=>[L(k(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(u(),g("span",oi,"("+k(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)]),_:1},8,["style"])):(pe=(ue=e(t).activePlayer)==null?void 0:ue.current_media)!=null&&pe.title?(u(),V(ke,{key:2},{default:y(()=>{var Q,oe,ct,mt,vt,pt,yt,ft;return[(oe=(Q=e(t).activePlayer)==null?void 0:Q.current_media)!=null&&oe.artist?(u(),g("div",si,k((mt=(ct=e(t).activePlayer)==null?void 0:ct.current_media)==null?void 0:mt.artist),1)):C("",!0),(pt=(vt=e(t).activePlayer)==null?void 0:vt.current_media)!=null&&pt.title?(u(),g("div",{key:1,style:U(`font-size: ${h.value};`)},k((ft=(yt=e(t).activePlayer)==null?void 0:yt.current_media)==null?void 0:ft.title),5)):C("",!0)]}),_:1})):(u(),V(ke,{key:3,style:U(`font-size: ${r.value};cursor:pointer;`),onClick:w[3]||(w[3]=Q=>e(t).showPlayersMenu=!0)},{default:y(()=>{var Q;return[L(k(((Q=e(t).activePlayer)==null?void 0:Q.display_name)||b.$t("no_player")),1)]}),_:1},8,["style"])),(de=e(t).activePlayer)!=null&&de.powered?C("",!0):(u(),V(ye,{key:4,class:"text-h6 text-md-h5 text-lg-h4"},{default:y(()=>[L(k(b.$t("off")),1)]),_:1})),((be=(ce=e(t).curQueueItem)==null?void 0:ce.media_item)==null?void 0:be.media_type)==e(te).RADIO&&((et=(Ze=e(t).curQueueItem)==null?void 0:Ze.streamdetails)!=null&&et.stream_title)?(u(),V(ye,{key:5,class:"text-h6 text-md-h5 text-lg-h4",onClick:w[4]||(w[4]=Q=>m(e(t).curQueueItem.streamdetails.stream_title))},{default:y(()=>[L(k(e(t).curQueueItem.streamdetails.stream_title),1)]),_:1})):C("",!0),(tt=e(t).curQueueItem)!=null&&tt.media_item&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album?(u(),V(ye,{key:6,style:U(`font-size: ${h.value};cursor:pointer;`),onClick:w[5]||(w[5]=Q=>p(e(t).curQueueItem.media_item.album))},{default:y(()=>[L(k(e(t).curQueueItem.media_item.album.name),1)]),_:1},8,["style"])):C("",!0),(at=e(t).curQueueItem)!=null&&at.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length?(u(),V(ye,{key:7,style:U(`font-size: ${h.value};cursor:pointer;`),onClick:w[6]||(w[6]=Q=>p(e(t).curQueueItem.media_item.artists[0]))},{default:y(()=>[L(k(e(t).curQueueItem.media_item.artists[0].name),1)]),_:1},8,["style"])):((lt=e(t).activePlayer)==null?void 0:lt.active_source)!=((it=e(t).activePlayer)==null?void 0:it.player_id)?(u(),V(ye,{key:8},{default:y(()=>{var Q;return[L(k(b.$t("external_source_active",[(Q=e(t).activePlayer)==null?void 0:Q.active_source])),1)]}),_:1})):e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(u(),V(ye,{key:9,style:U(`font-size: ${h.value}`)},{default:y(()=>[L(k(b.$t("queue_empty")),1)]),_:1},8,["style"])):C("",!0),S("div",ni,[v(pa)])])])):C("",!0),e(t).showQueueItems?(u(),g("div",ri,[v(Ne,{modelValue:i.value,"onUpdate:modelValue":w[7]||(w[7]=Q=>i.value=Q),"hide-slider":"",density:"compact",onClick:G},{default:y(()=>[v(_e,{value:0},{default:y(()=>{var Q,oe;return[L(k(b.$t("queue"))+" ",1),v(Fe,{color:"grey",content:(((Q=e(t).activePlayerQueue)==null?void 0:Q.items)||0)-(((oe=e(t).activePlayerQueue)==null?void 0:oe.current_index)||0),inline:""},null,8,["content"])]}),_:1}),v(_e,{value:1},{default:y(()=>{var Q;return[L(k(b.$t("played"))+" ",1),v(Fe,{color:"grey",content:(Q=e(t).activePlayerQueue)==null?void 0:Q.current_index,inline:""},null,8,["content"])]}),_:1})]),_:1},8,["modelValue"]),S("div",ui,[d.value?C("",!0):(u(),V(Ga,{key:0,onLoad:T,"empty-text":"",height:"100%"},{default:y(()=>[v(cl,{"item-height":70,"max-height":"90%",items:i.value==0?c.value:f.value},{default:y(({item:Q})=>[v(ul,{link:"","show-menu-btn":!0,onClick:K(oe=>P(oe,Q),["stop"]),onMenu:K(oe=>P(oe,Q),["stop"])},{prepend:y(()=>[S("div",di,[v(fe,{size:"50",item:Q},null,8,["item"])])]),title:y(()=>[L(k(Q.name),1)]),subtitle:y(()=>[L(k(e(Qe)(Q.duration))+" ",1),Q.media_item&&"album"in Q.media_item&&Q.media_item.album?(u(),g("span",ci," | "+k(Q.media_item.album.name),1)):C("",!0)]),_:2},1032,["onClick","onMenu"])]),_:1},8,["items"])]),_:1}))])])):C("",!0),!e(t).showQueueItems&&b.$vuetify.display.height<=600?(u(),g("div",mi,[S("div",vi,[v(fe,{item:e(t).curQueueItem,thumbnail:!1,style:{"max-width":"100%",width:"auto"}},null,8,["item"])])])):C("",!0)]),S("div",pi,[S("div",yi,[v(aa,{"show-labels":!0})]),S("div",fi,[e(t).activePlayerQueue?(u(),V(ve,{key:0,disabled:!((ot=e(t).curQueueItem)!=null&&ot.media_item),icon:(nt=(st=e(t).curQueueItem)==null?void 0:st.media_item)!=null&&nt.favorite?"mdi-heart":"mdi-heart-outline",title:b.$t("tooltip.favorite"),type:"btn",class:"media-controls-item","max-height":"30px",onClick:Y},null,8,["disabled","icon","title"])):C("",!0),b.$vuetify.display.mdAndUp?(u(),V(ia,{key:1,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"30px"},null,8,["player-queue"])):C("",!0),v(oa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),v(Je,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"100px"},null,8,["player","player-queue"]),v(sa,{player:e(t).activePlayer,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"45px"},null,8,["player","player-queue"]),b.$vuetify.display.mdAndUp?(u(),V(la,{key:2,"player-queue":e(t).activePlayerQueue,class:"media-controls-item","max-height":"35px"},null,8,["player-queue"])):C("",!0),e(t).activePlayerQueue?(u(),V(na,{key:3,class:"media-controls-item","max-height":"30px"})):C("",!0)]),e(t).activePlayer?(u(),g("div",hi,[v(Ie,{width:"100%","is-powered":(rt=e(t).activePlayer)==null?void 0:rt.powered,disabled:!e(t).activePlayer||!((ut=e(t).activePlayer)!=null&&ut.powered),"model-value":Math.round(((dt=e(t).activePlayer)==null?void 0:dt.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":w[8]||(w[8]=Q=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,Q):e(_).playerCommandVolumeSet(e(t).activePlayerId,Q)),"onClick:prepend":w[9]||(w[9]=Q=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume-5):e(_).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level-5)),"onClick:append":w[10]||(w[10]=Q=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume+5):e(_).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level+5))},null,8,["is-powered","disabled","model-value"])])):C("",!0),b.$vuetify.display.height>800?(u(),g("div",_i,[v($e,{class:"responsive-icon-holder-btn",variant:"outlined",onClick:w[11]||(w[11]=Q=>e(t).showPlayersMenu=!0)},{default:y(()=>{var Q;return[v(W,{icon:((Q=e(t).activePlayer)==null?void 0:Q.icon)||"mdi-speaker"},null,8,["icon"]),L(" "+k(e(t).activePlayer?e(Le)(e(t).activePlayer):""),1)]}),_:1})])):C("",!0)])]}),_:1},8,["color"])]),_:1},8,["modelValue"]))}}),bi=x(gi,[["__scopeId","data-v-90d1e339"]]),wi={key:1},ki={key:2,class:"icon-thumb"},Pi={key:0},Ci={key:2},Vi={key:3},$i={key:5,class:"line-clamp-1"},Ii={class:"d-flex justify-center",style:{width:"100%"}},Si={key:0},Qi={key:1},Ti={key:2},Bi={key:3,class:"line-clamp-1"},qi={key:4,class:"line-clamp-1"},zi={key:5},Mi={key:6,class:"line-clamp-1"},Ai={key:7},Ei=A({__name:"PlayerTrackDetails",props:{showOnlyArtist:{type:Boolean,default:!1},showQualityDetailsBtn:{type:Boolean,default:!0},colorPalette:{},primaryColor:{default:""}},setup(l){const a=l,s=I(()=>{var o,n;return(n=(o=t.activePlayerQueue)==null?void 0:o.current_item)==null?void 0:n.streamdetails});return(o,n)=>(u(),g(N,null,[v(se,{style:{height:"auto",width:"fit-content",margin:"0px",padding:"0px"},lines:"two"},{prepend:y(()=>{var i,d,c,f,r,h,p,m,P;return[S("div",{class:"media-thumb player-media-thumb",style:U(`cursor: pointer;height: ${e(R)({breakpoint:"phone"})?50:64}px; width: ${e(R)({breakpoint:"phone"})?50:64}px; `),onClick:n[0]||(n[0]=$=>e(t).showFullscreenPlayer=!0)},[(i=e(t).curQueueItem)!=null&&i.media_item||(d=e(t).curQueueItem)!=null&&d.image?(u(),V(fe,{key:0,item:((c=e(t).curQueueItem)==null?void 0:c.media_item)||e(t).curQueueItem,fallback:e(Me)},null,8,["item","fallback"])):(f=e(t).activePlayer)!=null&&f.powered&&((h=(r=e(t).activePlayer)==null?void 0:r.current_media)!=null&&h.image_url)?(u(),g("div",wi,[v(xe,{class:"media-thumb",style:{"border-radius":"4px"},size:"55",src:e(t).activePlayer.current_media.image_url},null,8,["src"])])):(u(),g("div",ki,[v(W,{size:"35",icon:((p=e(t).activePlayer)==null?void 0:p.type)==e(ne).PLAYER&&((m=e(t).activePlayer)!=null&&m.group_childs.length)?"mdi-speaker-multiple":((P=e(t).activePlayer)==null?void 0:P.icon)||"mdi-speaker",style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))],4)]}),title:y(()=>{var i,d,c,f,r;return[S("div",{style:U({cursor:"pointer",color:o.primaryColor})},[((i=e(t).activePlayer)==null?void 0:i.powered)==!1?(u(),g("div",{key:0,onClick:n[1]||(n[1]=h=>e(t).showPlayersMenu=!0)},k((d=e(t).activePlayer)==null?void 0:d.display_name),1)):(c=e(t).curQueueItem)!=null&&c.media_item?(u(),g("div",{key:1,onClick:n[2]||(n[2]=h=>e(t).showFullscreenPlayer=!0)},[L(k(e(t).curQueueItem.media_item.name)+" ",1),"version"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.version?(u(),g("span",Pi,"("+k(e(t).curQueueItem.media_item.version)+")",1)):C("",!0)])):e(t).curQueueItem?(u(),g("div",Ci,k(e(t).curQueueItem.name),1)):(r=(f=e(t).activePlayer)==null?void 0:f.current_media)!=null&&r.title?(u(),g("div",Vi,k(e(t).activePlayer.current_media.title),1)):e(t).activePlayer?e(t).activePlayerQueue&&e(t).activePlayerQueue.items==0?(u(),g("div",$i,k(o.$t("queue_empty")),1)):C("",!0):(u(),g("div",{key:4,onClick:n[3]||(n[3]=h=>e(t).showPlayersMenu=!0)},k(o.$t("no_player")),1))],4)]}),append:y(()=>{var i,d,c;return[(i=s.value)!=null&&i.audio_format.content_type&&!e(R)({breakpoint:"phone"})&&o.showQualityDetailsBtn?(u(),V(ol,F({key:0,disabled:!e(t).activePlayerQueue||!((d=e(t).activePlayerQueue)!=null&&d.active)||((c=e(t).activePlayerQueue)==null?void 0:c.items)==0,class:"player-track-content-type",style:o.$vuetify.theme.current.dark?"color: #000; background: #fff; margin-left: 15px;":"color: #fff; background: #000; margin-left: 15px;",label:"",ripple:!1},a),{default:y(()=>[S("div",Ii,k(s.value.audio_format.content_type.toUpperCase()),1)]),_:1},16,["disabled","style"])):C("",!0)]}),subtitle:y(()=>{var i,d,c,f,r,h,p,m,P,$,z,E,T;return[S("div",{style:U({cursor:"pointer",color:o.primaryColor}),class:"line-clamp-1",onClick:n[4]||(n[4]=Y=>e(t).showFullscreenPlayer=!0)},[(i=e(t).activePlayer)!=null&&i.powered?e(t).curQueueItem&&((d=e(t).curQueueItem.media_item)==null?void 0:d.media_type)==e(te).TRACK&&"album"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.album&&!a.showOnlyArtist?(u(),g("div",Qi,k(e(At)(e(t).curQueueItem.media_item.artists))+"  "+k(e(t).curQueueItem.media_item.album.name),1)):e(t).curQueueItem&&e(t).curQueueItem.media_item&&"artists"in e(t).curQueueItem.media_item&&e(t).curQueueItem.media_item.artists.length>0?(u(),g("div",Ti,k(e(t).curQueueItem.media_item.artists[0].name),1)):(f=(c=e(t).curQueueItem)==null?void 0:c.streamdetails)!=null&&f.stream_title?(u(),g("div",Bi,k((h=(r=e(t).curQueueItem)==null?void 0:r.streamdetails)==null?void 0:h.stream_title),1)):e(t).curQueueItem&&((p=e(t).curQueueItem.media_item)!=null&&p.metadata.description)?(u(),g("div",qi,k(e(t).curQueueItem.media_item.metadata.description),1)):(P=(m=e(t).activePlayer)==null?void 0:m.current_media)!=null&&P.artist?(u(),g("div",zi,k(e(t).activePlayer.current_media.artist),1)):(($=e(t).activePlayer)==null?void 0:$.active_source)!=((z=e(t).activePlayer)==null?void 0:z.player_id)?(u(),g("div",Mi,k(o.$t("external_source_active",[(E=e(t).activePlayer)==null?void 0:E.active_source])),1)):C("",!0):(u(),g("div",Si,k(o.$t("off")),1)),e(t).activePlayer&&((T=e(t).activePlayer)!=null&&T.powered)?(u(),g("div",Ai,k(e(Le)(e(t).activePlayer)),1)):C("",!0)],4)]}),_:1}),v(bi,{"show-fullscreen":e(t).showFullscreenPlayer,"color-palette":o.colorPalette},null,8,["show-fullscreen","color-palette"])],64))}}),Li=A({__name:"SpeakerBtn",props:{color:{}},setup(l){return(a,s)=>(u(),V(ee,{variant:"icon",ripple:!1,icon:"",onClick:s[0]||(s[0]=o=>e(t).showPlayersMenu=!0)},{default:y(()=>{var o;return[v(W,{color:a.color?a.color:"",size:24,icon:(o=e(t).activePlayer)!=null&&o.group_childs.length?"mdi-speaker-multiple":"mdi-speaker"},null,8,["color","icon"])]}),_:1}))}}),Wi={key:1,class:"text-caption volumecaption"},Ri={key:0,class:"text-caption volumecaption"},Hi=A({__name:"VolumeControl",props:{player:{},showSyncControls:{type:Boolean},showSubPlayers:{type:Boolean},hideHeadingRow:{type:Boolean}},setup(l){const a=l,s=q([]),o=q([]),n=q(void 0),i=I(()=>a.player.group_childs.length>0),d=function(r,h=!0){var m,P,$,z;const p=[];h&&r.type!=ne.GROUP&&p.push(r);for(const E of r.group_childs){const T=(m=_)==null?void 0:m.players[E];T&&T.available&&!p.includes(T)&&p.push(T)}if(a.showSyncControls&&r.type==ne.PLAYER&&r.supported_features.includes(J.SYNC))for(const E of Object.keys((P=_)==null?void 0:P.players)){const T=($=_)==null?void 0:$.players[E];T.provider===r.provider&&T.available&&(T.active_group&&T.active_group!=r.player_id||T.active_source&&T.state==Ce.PLAYING&&![r.player_id,T.player_id].includes(T.active_source)||p.includes(T)||p.push(T))}else if(a.showSyncControls&&r.type==ne.GROUP&&r.supported_features.includes(J.SYNC)&&r.player_id.startsWith("syncgroup_")){const E=_.players[r.group_childs[0]].provider;for(const T of Object.values((z=_)==null?void 0:z.players))T.provider===E&&T.available&&(T.active_group&&T.active_group!=r.player_id||T.active_source&&T.state==Ce.PLAYING&&![r.player_id,T.player_id].includes(T.active_source)||p.includes(T)||p.push(T))}return p.sort((E,T)=>E.display_name.toUpperCase()>T.display_name.toUpperCase()?1:-1),p},c=async function(r){for(const h of r)_.players[h].powered&&!_.players[h].active_group?await _.playerCommandPower(h,!1):await _.playerCommandUnSync(h)},f=async function(r,h){const p=a.player.player_id;console.log("syncCheckBoxChange",r,h),h?(o.value.includes(r)&&(o.value=o.value.filter(m=>m!=r)),s.value.includes(r)||s.value.push(r),_.players[p].group_childs.push(r)):(s.value.includes(r)&&(s.value=s.value.filter(m=>m!=r)),o.value.includes(r)||o.value.push(r),_.players[p].group_childs=_.players[p].group_childs.filter(m=>m!=r)),n.value!=null&&clearTimeout(n.value),n.value=setTimeout(async()=>{o.value.length>0&&c(o.value).catch(async()=>{_.players[p]=await _.getPlayer(p)}).finally(()=>{o.value=[]}),s.value.length>0&&_.playerCommandSyncMany(p,s.value).catch(async()=>{_.players[p]=await _.getPlayer(p)}).finally(()=>{s.value=[]})},1e3)};return(r,h)=>(u(),V(Ve,{style:{overflow:"hidden",padding:"0"},lines:"two"},{default:y(()=>[r.hideHeadingRow?C("",!0):(u(),V(se,{key:0,class:"volumesliderrow heading",link:!1,style:U(r.player.powered?"opacity: 1":"opacity: 0.6")},{prepend:y(()=>[v(W,{size:25,icon:r.player.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[S("h5",null,k(e(Le)(r.player,27)),1)]),append:y(()=>[v(ee,{class:"powerbtn",variant:"icon",onClick:h[0]||(h[0]=K(p=>e(_).playerCommandPowerToggle(r.player.player_id),["stop"]))},{default:y(()=>[v(W,{size:25,icon:"mdi-power"})]),_:1})]),_:1},8,["style"])),v(se,{class:"volumesliderrow",link:!1,style:U(r.player.powered?"opacity: 0.75":"opacity: 0.35")},{prepend:y(()=>[v(ee,{icon:"",style:{height:"25px"},disabled:r.player.type==e(ne).GROUP||r.player.group_childs.length>0,onClick:h[1]||(h[1]=K(p=>e(_).playerCommandMuteToggle(r.player.player_id),["stop"]))},{default:y(()=>[v(W,{size:25,icon:r.player.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:1},8,["disabled"])]),default:y(()=>[v(Ie,{color:"secondary",width:"100%","is-powered":r.player.powered,disabled:!r.player.available||!r.player.powered||!r.player.supported_features.includes(e(J).VOLUME_SET)&&!r.player.group_childs.length,"model-value":Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level),onClick:h[2]||(h[2]=K(()=>{},["stop"])),"onUpdate:modelValue":h[3]||(h[3]=p=>r.player.group_childs.length>0?e(_).playerCommandGroupVolume(r.player.player_id,p):e(_).playerCommandVolumeSet(r.player.player_id,p))},null,8,["is-powered","disabled","model-value"])]),append:y(()=>[i.value&&!r.showSubPlayers?(u(),V(W,{key:0,class:"expandbtn"},{default:y(()=>h[7]||(h[7]=[L(" mdi-chevron-down ")])),_:1})):(u(),g("div",Wi,k(Math.round(r.player.group_childs.length?r.player.group_volume:r.player.volume_level)),1))]),_:1},8,["style"]),r.showSubPlayers&&r.player.powered&&(r.player.group_childs.length>0||r.showSyncControls)?(u(),g("div",{key:1,onClick:h[6]||(h[6]=K(()=>{},["stop"]))},[v(De,{style:{"margin-top":"10px","margin-bottom":"15px"}}),(u(!0),g(N,null,Z(d(r.player,!r.showSyncControls),p=>(u(),g("div",{key:p.player_id},[v(se,{class:"volumesliderrow",link:!1,style:U(p.powered||r.showSyncControls?"opacity: 0.75":"opacity: 0.4"),onClick:h[4]||(h[4]=K(()=>{},["stop"]))},{prepend:y(()=>[v(W,{size:30,icon:p.icon,style:{"margin-left":"6px",opacity:"0.6"}},null,8,["icon"])]),default:y(()=>[S("h6",null,k(e(Sa)(p.display_name,27)),1)]),append:y(()=>[r.showSyncControls?(u(),V(ya,{key:0,ripple:!1,disabled:p.player_id==r.player.player_id,"model-value":r.player.group_childs.includes(p.player_id)||p.player_id==r.player.player_id,size:"22",class:"checkbox","onUpdate:modelValue":m=>f(p.player_id,m)},null,8,["disabled","model-value","onUpdate:modelValue"])):C("",!0)]),_:2},1032,["style"]),v(se,{class:"volumesliderrow",link:!1,style:U(p.powered?"opacity: 0.75":"opacity: 0.4"),onClick:h[5]||(h[5]=K(()=>{},["stop"]))},{prepend:y(()=>[v(ee,{icon:"",disabled:!p.supported_features.includes(e(J).VOLUME_MUTE),style:{height:"25px"},onClick:m=>e(_).playerCommandMuteToggle(p.player_id)},{default:y(()=>[v(W,{size:25,icon:p.volume_muted?"mdi-volume-mute":"mdi-volume-medium"},null,8,["icon"])]),_:2},1032,["disabled","onClick"])]),default:y(()=>[v(Ie,{color:"secondary",width:"100%","is-powered":p.powered,disabled:!p.available||!p.supported_features.includes(e(J).VOLUME_SET),"model-value":Math.round(p.volume_level),"onUpdate:modelValue":m=>e(_).playerCommandVolumeSet(p.player_id,m)},null,8,["is-powered","disabled","model-value","onUpdate:modelValue"])]),append:y(()=>[p.supported_features.includes(e(J).VOLUME_SET)?(u(),g("div",Ri,k(p.volume_level),1)):C("",!0)]),_:2},1032,["style"]),h[8]||(h[8]=S("div",{style:{height:"14px"}},null,-1))]))),128))])):C("",!0)]),_:1}))}}),ua=x(Hi,[["__scopeId","data-v-9ce88259"]]),Ui={key:0},Fi={key:0},Di={class:"text-caption"},Ni={key:1},Oi=A({__name:"VolumeBtn",props:{volumeSize:{default:"150px"},responsiveVolumeSize:{type:Boolean,default:!0},isVisible:{type:Boolean,default:!0},color:{default:""}},setup(l){const a=l,s=q(!1);return(o,n)=>a.isVisible&&e(t).activePlayer?(u(),g("div",Ui,[v(Gt,{modelValue:s.value,"onUpdate:modelValue":n[1]||(n[1]=i=>s.value=i),class:"volume-control-dialog","close-on-content-click":!1,location:"top",scrim:o.$vuetify.theme.current.dark?"rgba(0,0,0,.75)":"rgba(0,0,0,.85)"},{activator:y(({props:i})=>{var d,c;return[e(R)("bp6")||!o.responsiveVolumeSize?(u(),g("div",Fi,[v(Ie,{style:"margin-right: 0px; margin-left: 0px;",width:o.volumeSize,"is-powered":!0,"model-value":e(t).activePlayer.group_childs.length>0?Math.round(((d=e(t).activePlayer)==null?void 0:d.group_volume)||0):Math.round(((c=e(t).activePlayer)==null?void 0:c.volume_level)||0),"onUpdate:modelValue":n[0]||(n[0]=f=>{var r,h;return e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(((r=e(t).activePlayer)==null?void 0:r.player_id)||"",f):e(_).playerCommandVolumeSet(((h=e(t).activePlayer)==null?void 0:h.player_id)||"",f)})},{prepend:y(()=>[v(ee,F({variant:"icon",size:"48",ripple:!1},{...i}),{default:y(()=>{var f,r;return[v(W,{color:a.color?o.color:"",size:24,icon:"mdi-volume-high"},null,8,["color"]),S("div",Di,k(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((r=e(t).activePlayer)==null?void 0:r.volume_level)||0)),1)]}),_:2},1040)]),_:2},1032,["width","model-value"])])):(u(),g("div",Ni,[v(ee,F({...i},{size:"48",variant:"icon"}),{default:y(()=>{var f,r;return[v(W,{color:a.color?o.color:"",icon:"mdi-volume-high"},null,8,["color"]),S("div",{class:"text-caption",style:U({color:a.color?o.color:""})},k(e(t).activePlayer.group_childs.length>0?Math.round(((f=e(t).activePlayer)==null?void 0:f.group_volume)||0):Math.round(((r=e(t).activePlayer)==null?void 0:r.volume_level)||0)),5)]}),_:2},1040)]))]}),default:y(()=>[v(We,{"min-width":300,style:{overflow:"hidden","padding-top":"20px","padding-bottom":"20px","padding-right":"20px"}},{default:y(()=>[e(t).activePlayer?(u(),V(ua,{key:0,player:e(t).activePlayer,"show-sub-players":!0,"show-sync-controls":!1,"hide-heading-row":!1,style:{"margin-left":"18px"}},null,8,["player"])):C("",!0)]),_:1})]),_:1},8,["modelValue","scrim"])])):C("",!0)}}),Yi=x(Oi,[["__scopeId","data-v-7022cdda"]]),Xi=A({__name:"PlayerExtendedControls",props:{queue:{default:()=>({isVisible:!0,showQueueDialog:!1})},player:{default:()=>({isVisible:!0})},volume:{default:()=>({isVisible:!0,volumeSize:"150px",responsiveVolumeSize:!1})}},setup(l){return(a,s)=>(u(),g(N,null,[a.player&&a.player.isVisible?(u(),V(Li,{key:0,color:a.player.color},null,8,["color"])):C("",!0),a.queue&&a.queue.isVisible?(u(),V(na,{key:1,color:a.player.color,style:{"padding-left":"15px","padding-right":"20px"}},null,8,["color"])):C("",!0),a.volume&&a.volume.isVisible?(u(),V(Yi,{key:2,color:a.volume.color,"volume-size":a.volume.volumeSize,"responsive-volume-size":a.volume.responsiveVolumeSize},null,8,["color","volume-size","responsive-volume-size"])):C("",!0)],64))}}),Gi=["data-floating"],ji=["data-mobile"],xi={class:"mediacontrols-left"},Ki={class:"mediacontrols-bottom-center"},Ji={class:"mediacontrols-bottom-right"},Zi={key:0,class:"volume-slider"},eo=A({__name:"Player",props:{useFloatingPlayer:{type:Boolean}},setup(l){Qa(i=>({"4e17711c":n.value})),It();const{mobile:a}=Mt({mobileBreakpoint:576}),s=q({0:"",1:"",2:"",3:"",4:"",5:"",lightColor:"",darkColor:""}),o=new Image;o.src=ze.theme.current.value.dark?Me:$t,o.crossOrigin="Anonymous",o.addEventListener("load",function(){s.value=Ta(o)});const n=I(()=>ze.theme.current.value.dark?s.value&&s.value.darkColor?s.value.darkColor+"26":"CCCCCC26":s.value&&s.value.lightColor?s.value.lightColor+"26":"CCCCCC26");return re(()=>{var i;return(i=t.curQueueItem)==null?void 0:i.queue_item_id},()=>{var i;(i=t.curQueueItem)!=null&&i.media_item?o.src=ht(t.curQueueItem.media_item,bt.THUMB)||"":t.curQueueItem?o.src=ht(t.curQueueItem,bt.THUMB)||"":o.src=""}),(i,d)=>{var c,f,r,h,p,m,P;return u(),g(N,null,[S("div",{class:"mediacontrols-bg","data-floating":i.useFloatingPlayer},null,8,Gi),S("div",{class:"mediacontrols","data-mobile":e(a)},[S("div",xi,[v(Ei,{"show-quality-details-btn":!!e(R)("bp8"),"show-only-artist":!e(R)("bp7"),"color-palette":s.value,"primary-color":i.$vuetify.theme.current.dark?"#fff":"#000"},null,8,["show-quality-details-btn","show-only-artist","color-palette","primary-color"])]),S("div",Ki,[v(Ct,{"visible-components":{repeat:{isVisible:e(R)("bp3")},shuffle:{isVisible:e(R)("bp3")},play:{isVisible:!0,icon:{staticWidth:"50px",staticHeight:"50px"},withCircle:i.useFloatingPlayer},previous:{isVisible:e(R)("bp3")},next:{isVisible:e(R)("bp3")}}},null,8,["visible-components"]),e(R)("bp6")?(u(),V(aa,{key:0,color:i.$vuetify.theme.current.dark?s.value.lightColor||"#fff":s.value.darkColor||"#000","is-progress-bar":!1,disabled:!((c=e(t).activePlayerQueue)!=null&&c.active)||((h=(r=(f=e(t).activePlayerQueue)==null?void 0:f.current_item)==null?void 0:r.media_item)==null?void 0:h.media_type)!==e(te).TRACK},null,8,["color","disabled"])):C("",!0)]),S("div",Ji,[S("div",null,[v(Xi,{queue:{isVisible:e(R)("bp3"),color:i.$vuetify.theme.current.dark?"#fff":"#000"},player:{isVisible:!0,color:i.$vuetify.theme.current.dark?"#fff":"#000"},volume:{isVisible:!e(a),color:i.$vuetify.theme.current.dark?"#fff":"#000"}},null,8,["queue","player","volume"]),v(Ct,{style:{"padding-right":"5px"},"visible-components":{repeat:{isVisible:!1},shuffle:{isVisible:!1},play:{isVisible:e(R)({breakpoint:"bp3",condition:"lt"}),withCircle:!1,icon:{staticWidth:"40px",staticHeight:"40px",color:i.$vuetify.theme.current.dark?"#fff":"#000"}},previous:{isVisible:!1},next:{isVisible:!1}}},null,8,["visible-components"])])])],8,ji),e(a)?(u(),g("div",Zi,[v(Ie,{width:"100%",color:"secondary","is-powered":(p=e(t).activePlayer)==null?void 0:p.powered,disabled:!e(t).activePlayer||!((m=e(t).activePlayer)!=null&&m.powered),"model-value":Math.round(((P=e(t).activePlayer)==null?void 0:P.group_volume)||0),"prepend-icon":"mdi-volume-minus","append-icon":"mdi-volume-plus","onUpdate:modelValue":d[0]||(d[0]=$=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,$):e(_).playerCommandVolumeSet(e(t).activePlayerId,$)),"onClick:prepend":d[1]||(d[1]=$=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume-5):e(_).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level-5)),"onClick:append":d[2]||(d[2]=$=>e(t).activePlayer.group_childs.length>0?e(_).playerCommandGroupVolume(e(t).activePlayerId,e(t).activePlayer.group_volume+5):e(_).playerCommandVolumeSet(e(t).activePlayerId,e(t).activePlayer.volume_level+5))},null,8,["is-powered","disabled","model-value"])])):C("",!0)],64)}}}),to=x(eo,[["__scopeId","data-v-3edee708"]]),ao=ae({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Et(),...ge(),...Wt(),...Yt(),...Rt(),...Se({tag:"footer"}),...Ee()},"VFooter"),lo=le()({name:"VFooter",props:ao(),setup(l,a){let{slots:s}=a;const o=q(),{themeClasses:n}=Xe(l),{backgroundColorClasses:i,backgroundColorStyles:d}=je(X(l,"color")),{borderClasses:c}=Ht(l),{elevationClasses:f}=Ft(l),{roundedClasses:r}=Dt(l),h=Te(32),{resizeRef:p}=Oa(P=>{P.length&&(h.value=P[0].target.clientHeight)}),m=I(()=>l.height==="auto"?h.value:parseInt(l.height,10));return Ba(()=>l.app,()=>{const P=Xt({id:l.name,order:I(()=>parseInt(l.order,10)),position:I(()=>"bottom"),layoutSize:m,elementSize:I(()=>l.height==="auto"?void 0:m.value),active:I(()=>l.app),absolute:X(l,"absolute")});qa(()=>{o.value=P.layoutItemStyles.value})}),ie(()=>v(l.tag,{ref:p,class:["v-footer",n.value,i.value,c.value,f.value,r.value,l.class],style:[d.value,l.app?o.value:{height:Pe(l.height)},l.style]},s)),{}}}),io=A({__name:"Footer",setup(l){const a=I(()=>t.navigationMenuStyle=="horizontal"),s=I(()=>t.navigationMenuStyle!="horizontal"?0:t.isInStandaloneMode?100:80),o=I(()=>a.value?s.value+5:0);return(n,i)=>(u(),g(N,null,[a.value?(u(),g("div",{key:0,class:qe(n.$vuetify.theme.current.dark?"gradient-dark":"gradient-light"),style:U(`
      position: fixed;
      width: 100%;
      height: ${s.value+(e(R)("bp3")?100:70)}px;
      bottom: 0px;
      z-index: 999;
    `)},null,6)):C("",!0),e(t).navigationMenuStyle=="horizontal"?(u(),V(Hl,{key:1,height:s.value},null,8,["height"])):C("",!0),v(lo,{bottom:"",fixed:"",class:qe(`d-flex flex-column ${a.value?"mediacontrols-player-float":"mediacontrols-player-default"}`),style:U(`bottom: ${o.value}px;`),elevation:"10",app:""},{default:y(()=>[v(to,{"use-floating-player":a.value},null,8,["use-floating-player"])]),_:1},8,["class","style"])],64))}}),oo={class:"player-media-thumb"},so={key:1},no={key:2,class:"icon-thumb"},ro={style:{"margin-bottom":"3px"}},uo={key:0,style:{"font-size":"0.85rem","font-weight":"500","white-space":"nowrap"}},co={key:0},mo={key:0},vo={key:1},po={key:2},yo={class:"v-list-item-subtitle",style:{"white-space":"nowrap"}},fo={key:0},ho={key:1},_o={key:2},go={key:3},bo={key:4},wo={key:5},ko={key:6},Po=A({__name:"PlayerCard",props:{player:{},showVolumeControl:{type:Boolean},showMenuButton:{type:Boolean},showSubPlayers:{type:Boolean},showSyncControls:{type:Boolean}},setup(l){const a=l,s=I(()=>{if(a.player&&a.player.active_source in _.queues)return _.queues[a.player.active_source];if(a.player&&!a.player.active_source&&a.player.player_id in _.queues)return _.queues[a.player.player_id]}),o=I(()=>{if(s.value&&s.value.active)return s.value.current_item}),n=function(i){me.emit("contextmenu",{items:ra(a.player,s.value),posX:i.clientX,posY:i.clientY})};return(i,d)=>(u(),V(We,{flat:"",class:qe(["panel-item",{"panel-item-selected":i.player.player_id==e(t).activePlayerId,"panel-item-idle":i.player.state==e(Ce).IDLE,"panel-item-off":!i.player.powered}]),ripple:!1},{default:y(()=>[v(se,{class:"panel-item-details",flat:"",ripple:!1},{prepend:y(()=>{var c,f,r,h;return[S("div",oo,[i.player.powered&&((c=o.value)!=null&&c.media_item)||(f=o.value)!=null&&f.image?(u(),V(fe,{key:0,class:"media-thumb",size:"55",item:((r=o.value)==null?void 0:r.media_item)||o.value,fallback:e(Me)},null,8,["item","fallback"])):i.player.powered&&!s.value&&((h=i.player.current_media)!=null&&h.image_url)?(u(),g("div",so,[v(xe,{class:"media-thumb",size:"55",src:i.player.current_media.image_url},null,8,["src"])])):(u(),g("div",no,[v(W,{size:"35",icon:i.player.type==e(ne).PLAYER&&i.player.group_childs.length?"mdi-speaker-multiple":i.player.icon,style:{display:"table-cell",opacity:"0.8"}},null,8,["icon"])]))])]}),title:y(()=>[S("div",ro,k(e(Le)(i.player,27)),1)]),subtitle:y(()=>{var c,f,r,h,p,m,P;return[i.player.powered?(u(),g("div",uo,[(c=o.value)!=null&&c.media_item?(u(),g("div",co,[L(k((f=o.value)==null?void 0:f.media_item.name)+" ",1),"version"in((r=o.value)==null?void 0:r.media_item)&&((h=o.value)!=null&&h.media_item.version)?(u(),g("span",mo,"("+k((p=o.value)==null?void 0:p.media_item.version)+")",1)):C("",!0)])):o.value?(u(),g("div",vo,k((m=o.value)==null?void 0:m.name),1)):(P=i.player.current_media)!=null&&P.title?(u(),g("div",po,k(i.player.current_media.title),1)):C("",!0)])):C("",!0)]}),default:y(()=>{var c,f,r,h,p,m,P,$,z,E,T,Y,G,b,w,B,M,D,j;return[S("div",yo,[i.player.powered?(c=o.value)!=null&&c.media_item&&((r=(f=o.value)==null?void 0:f.media_item)==null?void 0:r.media_type)==e(te).TRACK&&"album"in((h=o.value)==null?void 0:h.media_item)&&((p=o.value)!=null&&p.media_item.album)?(u(),g("div",ho,k(e(At)((m=o.value)==null?void 0:m.media_item.artists))+"  "+k((P=o.value)==null?void 0:P.media_item.album.name),1)):($=o.value)!=null&&$.media_item&&"artists"in((z=o.value)==null?void 0:z.media_item)&&((E=o.value)==null?void 0:E.media_item.artists.length)>0?(u(),g("div",_o,k((T=o.value)==null?void 0:T.media_item.artists[0].name),1)):(G=(Y=o.value)==null?void 0:Y.streamdetails)!=null&&G.stream_title?(u(),g("div",go,k((w=(b=o.value)==null?void 0:b.streamdetails)==null?void 0:w.stream_title),1)):(M=(B=o.value)==null?void 0:B.media_item)!=null&&M.metadata.description?(u(),g("div",bo,k((D=o.value)==null?void 0:D.media_item.metadata.description),1)):i.player.active_source!=i.player.player_id?(u(),g("div",wo,k(i.$t("external_source_active",[i.player.active_source])),1)):((j=s.value)==null?void 0:j.items)==0?(u(),g("div",ko,k(i.$t("queue_empty")),1)):C("",!0):(u(),g("div",fo,k(i.$t("off")),1))])]}),append:y(()=>[i.player.powered?C("",!0):(u(),V(ee,{key:0,variant:"icon",class:"player-command-btn",onClick:d[0]||(d[0]=c=>{e(_).playerCommandPowerToggle(i.player.player_id),e(t).activePlayerId=i.player.player_id})},{default:y(()=>[v(W,{size:e(R)({breakpoint:"phone"})?"30":"32"},{default:y(()=>d[2]||(d[2]=[L("mdi-power")])),_:1},8,["size"])]),_:1})),i.player.powered?(u(),V(Je,{key:1,player:i.player,"player-queue":s.value,class:"player-command-btn",style:{height:"50px"},"icon-style":"circle-outline",onClick:d[1]||(d[1]=K(c=>{i.player.state!=e(Ce).PLAYING&&(e(t).activePlayerId=i.player.player_id)},["stop"]))},null,8,["player","player-queue"])):C("",!0),i.showMenuButton?(u(),V(ee,{key:2,variant:"icon",class:"player-command-btn",style:{"margin-right":"-5px"},onClick:K(n,["stop"])},{default:y(()=>[v(W,{size:e(R)({breakpoint:"phone"})?"30":"32"},{default:y(()=>d[3]||(d[3]=[L("mdi-dots-vertical")])),_:1},8,["size"])]),_:1})):C("",!0)]),_:1}),i.showVolumeControl&&i.player.powered?(u(),V(ua,{key:0,player:i.player,"show-sync-controls":i.showSyncControls,"hide-heading-row":!0,"show-sub-players":i.showSubPlayers},null,8,["player","show-sync-controls","show-sub-players"])):C("",!0)]),_:1},8,["class"]))}}),Vt=x(Po,[["__scopeId","data-v-995a49ca"]]),Co=A({__name:"PlayerSelect",setup(l){const a=q(!1),s=I(()=>Object.values(_.players).filter(c=>n(c,!1,!1,!1)).sort((c,f)=>{var r;return c.display_name.toUpperCase()>((r=f.display_name)==null?void 0:r.toUpperCase())?1:-1}).sort((c,f)=>Number(f.powered)-Number(c.powered)));re(()=>t.activePlayerId,c=>{c&&localStorage.setItem("mass.LastPlayerId",c)}),re(()=>_.players,c=>{c&&!t.activePlayer&&i()},{deep:!0}),re(()=>_.state,c=>{c.value!=za.CONNECTED&&(t.activePlayerId=void 0)},{deep:!0});function o(c,f=!1){t.activePlayerId==c.player_id?a.value=!a.value:(a.value=!1,t.activePlayerId=c.player_id),f&&(t.showPlayersMenu=!1)}Ae(()=>{i()});const n=function(c,f=!0,r=!1,h=!1){return!(!c.enabled||!h&&c.hidden||!f&&!c.available||c.synced_to&&!r||!r&&c.type==ne.PLAYER&&c.active_group)},i=function(){if(t.activePlayer&&n(t.activePlayer,!1,!1,!1))return;const c=d();c&&(t.activePlayerId=c.player_id)},d=function(){const c=localStorage.getItem("mass.LastPlayerId");if(c&&c in _.players&&n(_.players[c],!1,!1,!1))return _.players[c]};return(c,f)=>(u(),g(N,null,[v(jt,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[0]||(f[0]=r=>e(t).showPlayersMenu=r)},null,8,["modelValue"]),v(ma,{modelValue:e(t).showPlayersMenu,"onUpdate:modelValue":f[2]||(f[2]=r=>e(t).showPlayersMenu=r),location:"right",app:"",clipped:"",temporary:"",touchless:"",width:500,style:{"z-index":"99999"},"z-index":"99999"},{default:y(()=>[S("div",null,[v(ke,{class:"title"},{default:y(()=>[S("b",null,k(c.$t("players")),1)]),_:1}),v(ee,{variant:"icon",style:{float:"right",top:"-40px",height:"0"},onClick:f[1]||(f[1]=r=>e(t).showPlayersMenu=!1)},{default:y(()=>[v(W,{size:"30"},{default:y(()=>f[3]||(f[3]=[L("mdi-window-close")])),_:1})]),_:1}),v(Ve,{flat:"",style:{margin:"5px 5px"}},{default:y(()=>[(u(!0),g(N,null,Z(s.value.filter(r=>r.powered),r=>(u(),V(Vt,{id:r.player_id,key:r.player_id,player:r,"show-volume-control":!0,"show-menu-button":!0,"show-sub-players":a.value&&r.player_id==e(t).activePlayerId,"show-sync-controls":r.supported_features.includes(e(J).SYNC),onClick:h=>o(r)},null,8,["id","player","show-sub-players","show-sync-controls","onClick"]))),128))]),_:1}),v(sl,{variant:"accordion",flat:"",class:"expansion"},{default:y(()=>[v(nl,{title:c.$t("powered_off_players"),style:{padding:"0"}},{default:y(()=>[v(rl,{style:{padding:"0"}},{default:y(()=>[v(Ve,{flat:""},{default:y(()=>[(u(!0),g(N,null,Z(s.value.filter(r=>!r.powered),r=>(u(),V(Vt,{id:r.player_id,key:r.player_id,player:r,"show-volume-control":!1,"show-menu-button":!0,"show-sub-players":!1,"show-sync-controls":!1,onClick:h=>o(r)},null,8,["id","player","onClick"]))),128))]),_:1})]),_:1})]),_:1},8,["title"])]),_:1})])]),_:1},8,["modelValue"])],64))}}),Vo=x(Co,[["__scopeId","data-v-8d8acb6f"]]);function $o(l={}){const{immediate:a=!1,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:d}=l;let c,f,r;const h=async(m=!0)=>{await f,await(r==null?void 0:r())};async function p(){if("serviceWorker"in navigator){if(c=await Ma(async()=>{const{Workbox:m}=await import("./workbox-window.prod.es5-D5gOYdM7.js");return{Workbox:m}},[],import.meta.url).then(({Workbox:m})=>new m("./sw.js",{scope:"./",type:"classic"})).catch(m=>{d==null||d(m)}),!c)return;r=async()=>{await(c==null?void 0:c.messageSkipWaiting())};{let m=!1;const P=()=>{m=!0,c==null||c.addEventListener("controlling",$=>{$.isUpdate&&window.location.reload()}),s==null||s()};c.addEventListener("installed",$=>{typeof $.isUpdate>"u"?typeof $.isExternal<"u"?$.isExternal?P():!m&&(o==null||o()):$.isExternal?window.location.reload():!m&&(o==null||o()):$.isUpdate||o==null||o()}),c.addEventListener("waiting",P),c.addEventListener("externalwaiting",P)}c.register({immediate:a}).then(m=>{i?i("./sw.js",m):n==null||n(m)}).catch(m=>{d==null||d(m)})}}return f=p(),h}function Io(l={}){const{immediate:a=!0,onNeedRefresh:s,onOfflineReady:o,onRegistered:n,onRegisteredSW:i,onRegisterError:d}=l,c=q(!1),f=q(!1);return{updateServiceWorker:$o({immediate:a,onNeedRefresh(){c.value=!0,s==null||s()},onOfflineReady(){f.value=!0,o==null||o()},onRegistered:n,onRegisteredSW:i,onRegisterError:d}),offlineReady:f,needRefresh:c}}const So={key:0,class:"pwa-toast",role:"alert"},Qo={class:"message"},To={key:0},Bo={key:1},qo=A({__name:"ReloadPrompt",setup(l){const{offlineReady:a,needRefresh:s,updateServiceWorker:o}=Io(),n=async()=>{a.value=!1,s.value=!1};return(i,d)=>e(a)||e(s)?(u(),g("div",So,[S("div",Qo,[e(a)?(u(),g("span",To," App ready to work offline ")):(u(),g("span",Bo," New content available, click on reload button to update. "))]),e(s)?(u(),g("button",{key:0,onClick:d[0]||(d[0]=c=>e(o)())},"Reload")):C("",!0),S("button",{onClick:n},"Close")])):C("",!0)}}),zo=ae({...ge(),...xa({fullHeight:!0}),...Ee()},"VApp"),Mo=le()({name:"VApp",props:zo(),setup(l,a){let{slots:s}=a;const o=Xe(l),{layoutClasses:n,getLayoutItem:i,items:d,layoutRef:c}=Ka(l),{rtlClasses:f}=Bt();return ie(()=>{var r;return v("div",{ref:c,class:["v-application",o.themeClasses.value,n.value,f.value,l.class],style:[l.style]},[v("div",{class:"v-application__wrap"},[(r=s.default)==null?void 0:r.call(s)])])}),{getLayoutItem:i,items:d,theme:o}}}),Ao=A({__name:"Default",setup(l){return(a,s)=>(u(),g(N,null,[e(t).connected?(u(),V(Mo,{key:0},{default:y(()=>[v(Vo),v(bl),v(io)]),_:1})):(u(),V(jt,{key:1,class:"centeredoverlay",persistent:"","model-value":!e(t).connected},{default:y(()=>[S("div",null,[v(Ya,{color:"primary",indeterminate:"",size:"64"})])]),_:1},8,["model-value"])),e(t).isInStandaloneMode?(u(),V(qo,{key:2})):C("",!0)],64))}}),as=x(Ao,[["__scopeId","data-v-b295b190"]]);export{as as default};
