import{p as L,J as U,g as G,u as z,a as i,c as K,m as F,K as Se,t as $,d as we,F as N,E as g,B as Be,L as p,M as Ce,N as de,O as ke,P as Te,Q as xe,R as Me,_ as b,l as n,v as u,w as m,S as R,s as C,z as S,n as v,k as c,T as le,C as k,D as x,U as Q,V as ce,W as j,A as B,X as te,q as _,y as O,Y as Ve,Z as ue,$ as Fe,H as y,a0 as me,a1 as he,h as pe,j as Ne,a2 as $e,a3 as De,a4 as Oe,x as A,a5 as Ie,a6 as Pe,a7 as Re,a8 as He,a9 as Ae,aa as qe,ab as Ee,ac as re,ad as ae,ae as Le,af as Ue,ag as oe,ah as Ge,ai as ze,b as je,aj as Ye,ak as Ke,al as Qe}from"./main-DCaPxp2h.js";import{a as Y,V as se,A as We,E as Xe,P as Je,c as fe,U as Ze}from"./unauthorized-DJSr03Dw.js";import{g as et,c as X,h as tt,u as rt,b as at,i as ot,e as st,d as it,j as nt,k as V,l as dt,V as be,n as J,o as lt,p as ct,I as ut,q as mt,M as ht}from"./forwardRefs-D1ZDjzWx.js";import{T as E}from"./index-CoFXW6I0.js";import{V as pt}from"./VCombobox-DqBFki-9.js";import{V as ft}from"./VTable-CtorAbOx.js";import{V as bt,a as T,C as gt}from"./VDialog-CQXjBvDZ.js";import{V as _t,a as vt,b as yt,c as St}from"./VSelectionControl-BqB1JeKa.js";import{V as W,N as ie,t as wt,T as D,a as Bt,D as Ct,M as kt,p as Tt,B as xt,g as Mt,P as Vt,b as Ft,c as Nt}from"./pagination-toolbar-DoqxSygU.js";import{V as ge,a as $t}from"./VSelect-L4v_m3ag.js";import{a as H}from"./VDivider-DUxQu-IZ.js";import{b as Dt,S as Ot,a as It}from"./settings-drawer-CdFmOhnd.js";import{V as q}from"./VCheckbox-Dv6fwaDb.js";import{C as Pt}from"./confirm-dialog-B_Y3KKiL.js";import"./change-password-dialog-Cy1tU-tj.js";import"./VForm-hB4C5jVd.js";import"./admin-CHuFhx_t.js";import"./filter-xcEcgcIx.js";import"./VCheckboxBtn-CNMFahfF.js";import"./copy-to-clipboard-DoUvDJVx.js";const Rt=L({divider:[Number,String],...U()},"VBreadcrumbsDivider"),Ht=G()({name:"VBreadcrumbsDivider",props:Rt(),setup(e,t){let{slots:a}=t;return z(()=>{var d;return i("li",{class:["v-breadcrumbs-divider",e.class],style:e.style},[((d=a==null?void 0:a.default)==null?void 0:d.call(a))??e.divider])}),{}}}),At=L({active:Boolean,activeClass:String,activeColor:String,color:String,disabled:Boolean,title:String,...U(),...et(),...X({tag:"li"})},"VBreadcrumbsItem"),_e=G()({name:"VBreadcrumbsItem",props:At(),setup(e,t){let{slots:a,attrs:d}=t;const s=tt(e,d),r=K(()=>{var f;return e.active||((f=s.isActive)==null?void 0:f.value)}),o=K(()=>r.value?e.activeColor:e.color),{textColorClasses:l,textColorStyles:h}=rt(o);return z(()=>i(e.tag,{class:["v-breadcrumbs-item",{"v-breadcrumbs-item--active":r.value,"v-breadcrumbs-item--disabled":e.disabled,[`${e.activeClass}`]:r.value&&e.activeClass},l.value,e.class],style:[h.value,e.style],"aria-current":r.value?"page":void 0},{default:()=>{var f,w;return[s.isLink.value?i("a",F({class:"v-breadcrumbs-item--link",onClick:s.navigate},s.linkProps),[((w=a.default)==null?void 0:w.call(a))??e.title]):((f=a.default)==null?void 0:f.call(a))??e.title]}})),{}}}),qt=L({activeClass:String,activeColor:String,bgColor:String,color:String,disabled:Boolean,divider:{type:String,default:"/"},icon:Se,items:{type:Array,default:()=>[]},...U(),...at(),...ot(),...X({tag:"ul"})},"VBreadcrumbs"),Et=G()({name:"VBreadcrumbs",props:qt(),setup(e,t){let{slots:a}=t;const{backgroundColorClasses:d,backgroundColorStyles:s}=st($(e,"bgColor")),{densityClasses:r}=it(e),{roundedClasses:o}=nt(e);we({VBreadcrumbsDivider:{divider:$(e,"divider")},VBreadcrumbsItem:{activeClass:$(e,"activeClass"),activeColor:$(e,"activeColor"),color:$(e,"color"),disabled:$(e,"disabled")}});const l=K(()=>e.items.map(h=>typeof h=="string"?{item:{title:h},raw:h}:{item:h,raw:h}));return z(()=>{const h=!!(a.prepend||e.icon);return i(e.tag,{class:["v-breadcrumbs",d.value,r.value,o.value,e.class],style:[s.value,e.style]},{default:()=>{var f;return[h&&i("li",{key:"prepend",class:"v-breadcrumbs__prepend"},[a.prepend?i(dt,{key:"prepend-defaults",disabled:!e.icon,defaults:{VIcon:{icon:e.icon,start:!0}}},a.prepend):i(V,{key:"prepend-icon",start:!0,icon:e.icon},null)]),l.value.map((w,M,Z)=>{var ee;let{item:I,raw:ye}=w;return i(N,null,[((ee=a.item)==null?void 0:ee.call(a,{item:I,index:M}))??i(_e,F({key:M,disabled:M>=Z.length-1},typeof I=="string"?{title:I}:I),{default:a.title?()=>{var P;return(P=a.title)==null?void 0:P.call(a,{item:I,index:M})}:void 0}),M<Z.length-1&&i(Ht,null,{default:a.divider?()=>{var P;return(P=a.divider)==null?void 0:P.call(a,{item:ye,index:M})}:void 0})])}),(f=a.default)==null?void 0:f.call(a)]}})}),{}}}),Lt={f:ke,r:de,p:Te,i:xe,s:Me},Ut={name:"BrowserBreadcrumbs",computed:{...g(Be,["timestamp"]),...g(p,{breadcrumbs(e){const t=[],a=e.settings.breadcrumbs.slice(0,e.settings.breadcrumbs.length-1);if(!a)return t;let d="";for(const s of a){const r=this.getTo(s,d),o=s.name?s.name:"",l=s.group,h=this.getIcon(s.pks,o,l);let f;s.group==="r"?f="Top":(f=e.choices.static.groupNames[l],s.pks==0?f="All "+f:f!="Series"&&(f=f.slice(0,-1))),f={text:f,openDelay:1500};const w={to:r,text:o,icon:h,tooltip:f};t.push(w),d=s.pks}return t}})},methods:{getTo(e,t){const a=Ce(e);delete a.name;const d={name:"browser",params:a};return d.query={ts:this.timestamp},t&&(d.hash=`#card-${t}`),d},getIcon(e,t,a){let d;return"rfa".indexOf(a)!=-1&&e==="0"?d=de:t?d="":d=Lt[a],d}}},Gt={key:1};function zt(e,t,a,d,s,r){return n(),u(Et,{id:"browserBreadcrumbs",density:"compact",items:e.breadcrumbs},{item:m(({item:o})=>[R((n(),u(_e,{to:o.to},{default:m(()=>[o.icon?(n(),u(V,{key:0},{default:m(()=>[C(S(o.icon),1)]),_:2},1024)):(n(),v("span",Gt,S(o.text),1))]),_:2},1032,["to"])),[[E,o.tooltip]])]),_:1},8,["items"])}const jt=b(Ut,[["render",zt],["__scopeId","data-v-9cf43736"]]),Yt={name:"BrowserHeader",components:{Breadcrumbs:jt}};function Kt(e,t,a,d,s,r){const o=c("Breadcrumbs");return n(),u(Y,{id:"breadcrumbsToolbar",height:24,flat:"",class:"titleToolbar"},{default:m(()=>[i(o)]),_:1})}const Qt=b(Yt,[["render",Kt],["__scopeId","data-v-8badef68"]]),Wt={name:"BrowserHeader",data(){return{mdiReload:le}},head(){return{meta:[{hid:"description",name:"description",content:["browse comics",this.longBrowserTitlePrefix,this.longBrowseTitleMain,this.longBrowseTitleSuffix].filter(Boolean).join(" ")}]}},computed:{...g(p,{browserTitle:e=>{var t;return(t=e.page)==null?void 0:t.title},groupNames:e=>e.choices.static.groupNames,modelGroup:e=>e.page.modelGroup}),...k(x,["isUserAdmin"]),title(){let e;if(Number(this.$route.params.pks)===0)e="All";else if(this.browserTitle){let t=[];const{groupName:a,groupCount:d}=this.browserTitle,r=this.$route.params.group==="v"?Q(a):a;if(r&&t.push(r),d){const o=`of ${d}`;t.push(o)}e=t.join(" ")}else e="(Empty)";return e},subtitle(){return this.$route.params.group==="f"?"":this.groupNames[this.modelGroup]}}};function Xt(e,t,a,d,s,r){return n(),u(Y,{id:"browserToolbarTitle",height:24,"extension-height":24},ce({default:m(()=>[i(se,{id:"browserTitle",class:"browserTitle"},{default:m(()=>[C(S(r.title),1)]),_:1})]),_:2},[r.subtitle?{name:"extension",fn:m(()=>[i(se,{id:"browserSubtitle",class:"browserTitle"},{default:m(()=>[C(S(r.subtitle),1)]),_:1})]),key:"0"}:void 0]),1024)}const Jt=b(Wt,[["render",Xt],["__scopeId","data-v-919fc0ff"]]),Zt=10,er={name:"BrowserSearchCombobox",data(){return{mdiMagnify:j,menu:!1,query:"",items:[""]}},computed:{...g(p,{stateQ:e=>e.settings.q,searchError:e=>e.page.searchError})},watch:{stateQ(e){this.query=e,this.addToMenu(e)}},beforeMount(){this.query=this.stateQ},methods:{...B(p,["setSettings","startSearchHideTimeout","clearSearchHideTimeout"]),addToMenu(e){if(!e||this.items.includes(e))return;const t=this.items[0]===""?[]:this.items;t.unshift(e),this.items=t.slice(0,Zt)},doSearch(e=!1){this.menu=!1;const a={q:this.query?this.query.trim():""};e&&(a.orderBy="sort_name",a.orderReverse=!1,this.doBlur()),this.setSettings(a)},doBlur(){this.menu=!1,(this.query?this.query.trim():"")||this.startSearchHideTimeout()}}};function tr(e,t,a,d,s,r){return n(),u(pt,{id:"searchbox",ref:"searchbox",modelValue:s.query,"onUpdate:modelValue":t[0]||(t[0]=o=>s.query=o),menu:s.menu,"onUpdate:menu":t[1]||(t[1]=o=>s.menu=o),items:s.items,autofocus:"","aria-label":"search",clearable:"",density:"compact","error-messages":e.searchError,"full-width":"","hide-details":"auto","hide-selected":"","menu-props":{maxHeight:void 0},"no-filter":"","prepend-inner-icon":s.mdiMagnify,variant:"solo","onClick:clear":t[2]||(t[2]=o=>r.doSearch(!0)),"onClick:prependInner":r.doSearch,onKeydown:e.clearSearchHideTimeout,onKeyup:[te(r.doSearch,["enter"]),te(r.doBlur,["esc"])],onFocus:e.clearSearchHideTimeout,onBlur:r.doBlur},null,8,["modelValue","menu","items","error-messages","prepend-inner-icon","onClick:prependInner","onKeydown","onKeyup","onFocus","onBlur"])}const rr=b(er,[["render",tr]]),ar=[["characters","String","category"],["community_rating","Decimal","communityrating"],["contributor","String","author, creator, credit, person, people"],["country","String"],["created_at","DateTime","created"],["critical_rating","Decimal","criticalrating"],["day","Integer"],["date","Date"],["decade","Integer"],["file_type","String","filetype, type"],["genres","String","genre"],["identifiers","String","id, nss"],["identifier_types","String","id_type, idtype, nid"],["imprint","String"],["issue","String","(Combined issue_number and issue_suffix)"],["issue_number","Decimal","number"],["issue_suffix","String"],["language","String"],["location","String","location"],["maturity_rating","String"],["monochrome","Boolean","blackandwhite"],["month","Integer"],["reading_direction","String","direction"],["name","String","title"],["notes","String"],["original_format","String","format, orginalformat"],["path","String","filename, folder, folders"],["page_count","Integer","pages, pagecount"],["publisher","String"],["reading_direction","String","direction"],["review","String"],["scan_info","String","scan, scaninfo"],["series","String"],["series_groups","String","seriesgroups"],["size","Integer"],["stories","String","story"],["story_arcs","String","storyarcs"],["summary","String","comments, description"],["tags","String","tag"],["tagger","String"],["teams","String","team"],["updated_at","DateTime","updated"],["volume","String"],["web","String"],["year","Integer"]],or={name:"SearchHelpText",data(){return{FIELD_ROWS:ar}}},sr={id:"browserSearchTextContainer"},ir={id:"browserSearchText"},nr={id:"fieldTableContainer"},dr={class:"aliasCol"};function lr(e,t,a,d,s,r){return n(),v("div",sr,[_("div",ir,[t[2]||(t[2]=_("h1",null,"Search Help",-1)),_("div",nr,[t[1]||(t[1]=_("h2",null,"Search Fields",-1)),i(ft,{id:"fieldTable",class:"highlight-table"},{default:m(()=>[t[0]||(t[0]=_("thead",null,[_("tr",null,[_("th",null,"Field"),_("th",null,"Type"),_("th",null,"Aliases")])],-1)),_("tbody",null,[(n(!0),v(N,null,O(s.FIELD_ROWS,o=>(n(),v("tr",{key:o[0]},[_("td",null,S(o[0]),1),_("td",null,S(o[1]),1),_("td",dr,S(o[2]||""),1)]))),128))])]),_:1})]),t[3]||(t[3]=Ve('<div id="textContainer" data-v-8d3dbd81><h2 data-v-8d3dbd81>Search Syntax</h2><p data-v-8d3dbd81> Codex allows two different kinds of searching from the search bar. Full Text Search and Field Search. For full text search just enter some terms in the search bar. They will be added to the filters selected with the &quot;filter by&quot; menu. </p><p data-v-8d3dbd81>Searching in Codex is always case insensitive.</p><h2 data-v-8d3dbd81>Full Text Search</h2><p data-v-8d3dbd81> Full text search searches all the metadata of a comic as one document. </p><h3 data-v-8d3dbd81>Boolean Operators</h3><p data-v-8d3dbd81> Codex allows the <code data-v-8d3dbd81>AND</code>, <code data-v-8d3dbd81>OR</code>, and <code data-v-8d3dbd81>NOT</code> operators between search terms. By default terms are concatenated with the <code data-v-8d3dbd81>AND</code> operator. For instance: <code data-v-8d3dbd81> frodo sam galadriel </code> is the same as <code data-v-8d3dbd81>frodo AND sam AND galadriel</code>. <code data-v-8d3dbd81> frodo OR pippin NOT merry</code> searches for comics with metadata that reference Frodo or Pippin but not Merry. Parenthesis may be used to group boolean operators. </p><h3 data-v-8d3dbd81>Prefix Operators</h3><p data-v-8d3dbd81> search tokens suffixed with a <code data-v-8d3dbd81>*</code> will look for text with the given prefix. For example <code data-v-8d3dbd81>tev*</code> should match if the string &quot;Tevildo&quot; occurs anywhere in the comic metadata. </p><h2 data-v-8d3dbd81>Field Search Syntax</h2><p data-v-8d3dbd81> Similar to Codex&#39;s Filter menu, you may query individual comic metadata fields in the database but for more fields and with more powerful operators than the exact match offered by the Filter menu. A field search looks like: <code data-v-8d3dbd81>field:expression</code>. </p><h3 data-v-8d3dbd81>Simple Values as the Expression</h3><p data-v-8d3dbd81> Simple values entered for the expression match exactly for numeric, datetime and boolean fields. However for text fields the field is searched for any match of the entered value. </p><p data-v-8d3dbd81> The Prefix notiation for full text search tokens may also be used here. <code data-v-8d3dbd81>characters:saur*</code> will match comics that feature &quot;Sauron&quot; and &quot;Sauruman&quot;. </p><h3 data-v-8d3dbd81>Field Search Boolean Expressions</h3><p data-v-8d3dbd81> Boolean operators may also used in and around field search if the expression is contained in parenthesis. <code data-v-8d3dbd81>characters:(aragorn or boromir)</code> will work. <code data-v-8d3dbd81>characters:(not aragorn)</code> will behave similarly to <code data-v-8d3dbd81>not characters:aragorn</code></p><h3 data-v-8d3dbd81>Leading Operators</h3><p data-v-8d3dbd81> Field Search has it&#39;s own operators that offer more powerful queries. For text, numeric, boolean and datetime fields may be applied at the beginning of the expression <code data-v-8d3dbd81>&gt;</code>,<code data-v-8d3dbd81>&gt;=</code>,<code data-v-8d3dbd81>&lt;</code>,<code data-v-8d3dbd81>&lt;=</code>. And the range syntax <code data-v-8d3dbd81>..</code> accepts two values. For instance: </p><table class="searchExample" data-v-8d3dbd81><tbody data-v-8d3dbd81><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>pages:&gt;30</code></td><td data-v-8d3dbd81>comics with more than 30 pages</td></tr><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>author:!frodo</code></td><td data-v-8d3dbd81>comics not written by Frodo</td></tr><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>year:1066..1215</code></td><td data-v-8d3dbd81>comics published between the year 1066 and 1215.</td></tr></tbody></table><h3 data-v-8d3dbd81>Text Operators</h3><p data-v-8d3dbd81> Field search on text fields may be narrowed using the <code data-v-8d3dbd81>*</code> operator: </p><table class="searchExample" data-v-8d3dbd81><tbody data-v-8d3dbd81><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>characters:Ar*</code></td><td data-v-8d3dbd81> characters that start with &quot;Ar&quot;, like &quot;Aragorn&quot; and &quot;Arwen&quot; </td></tr><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>characters:*orn</code></td><td data-v-8d3dbd81> characters that end with &quot;orn&quot;, like &quot;Aragorn&quot; and &quot;Arathorn&quot;. This type of search can be slow </td></tr><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>series:sil*ion</code></td><td data-v-8d3dbd81> series such as Silmarillion. This type of search can be slow. </td></tr></tbody></table><p data-v-8d3dbd81> The last two examples of text search above looking for suffixes and doing wildcard searches with the <code data-v-8d3dbd81>*</code> in the middle of the word will perform much worse than bare word or prefix searches because they are unable to use the full text search index and will scan the database in a less efficient manner. </p><h3 data-v-8d3dbd81>Dates and DateTimes</h3><p data-v-8d3dbd81> Codex parses Dates and DateTime values liberally. Many quoted english phrases also work. Such as relative dates like &#39;1 min ago&#39;, &#39;2 weeks ago&#39;, &#39;3 months, 1 week and 1 day ago&#39;, &#39;in 2 days&#39;, &#39;tomorrow&#39;. Dates with timezones and named months such as &#39;August 14, 2015 EST&#39;, &#39;July 4, 2013 PST&#39;, &#39;21 July 2013 10:15 pm +0500&#39;. Examples: </p><table class="searchExample" data-v-8d3dbd81><tbody data-v-8d3dbd81><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>created_at:&quot;3 days ago&quot;..&quot;today&quot;</code></td></tr><tr data-v-8d3dbd81><td data-v-8d3dbd81><code data-v-8d3dbd81>date:&quot;&lt;3 years ago&quot;</code></td></tr></tbody></table><p data-v-8d3dbd81> Placing a leading operator outside the quotes for a date phrase will not be parsed correctly. If the format you try fails, the <br data-v-8d3dbd81><code data-v-8d3dbd81>YYYY-MM-DD</code> and <br data-v-8d3dbd81><code data-v-8d3dbd81>YYYY-MM-DD-HH:mm:SS</code> formats are reliable. </p><h3 data-v-8d3dbd81>Single Quote complex field Queries</h3><p data-v-8d3dbd81> Use quotes to tell Codex that a complex or natural language phrase should be applied to a specific field </p><code data-v-8d3dbd81> created:&#39;this year&#39; </code><h3 data-v-8d3dbd81>Size Byte Multipliers</h3><p data-v-8d3dbd81> The size field can make use of convenient byte multiplier suffixes like <code data-v-8d3dbd81>kb</code> and <code data-v-8d3dbd81>mb</code> as well as binary suffixes like <code data-v-8d3dbd81>gib</code> and <code data-v-8d3dbd81>tib</code>. For instance <code data-v-8d3dbd81>size:&gt;10mb</code></p><h2 data-v-8d3dbd81>Limitations</h2><p data-v-8d3dbd81> Field searches that use leading operators or text wildcard operators that are prefixed with the <code data-v-8d3dbd81>OR</code> operator like <code data-v-8d3dbd81>OR year:&gt;2020</code> will disregard the <code data-v-8d3dbd81>OR</code> operator and treat it like <code data-v-8d3dbd81>AND</code>. </p></div>',1))])])}const cr=b(or,[["render",lr],["__scopeId","data-v-8d3dbd81"]]),ur={name:"SearchHelp",components:{SearchHelpText:cr},data(){return{mdiOpenInNew:ue,mdiLifebuoy:Fe}},computed:{...g(p,{isSearchHelpOpenState:e=>e.isSearchHelpOpen}),isSearchHelpOpen:{get(){return this.isSearchHelpOpenState},set(e){this.setSearchHelpOpen(e)}},buttonDensity(){return this.$vuetify.display.smAndDown?"compact":"comfortable"}},methods:{...B(p,["setSearchHelpOpen"])}},mr={id:"searchHelp"};function hr(e,t,a,d,s,r){const o=c("SearchHelpText");return n(),u(bt,{modelValue:r.isSearchHelpOpen,"onUpdate:modelValue":t[0]||(t[0]=l=>r.isSearchHelpOpen=l),"content-class":"browserSearchHelp",fullscreen:"",scrim:!1,transition:"dialog-bottom-transition"},{activator:m(({props:l})=>[i(be,F(l,{icon:s.mdiLifebuoy,title:"Search Help",density:r.buttonDensity}),null,16,["icon","density"])]),default:m(()=>[_("div",mr,[i(o)])]),_:1},8,["modelValue"])}const pr=b(ur,[["render",hr],["__scopeId","data-v-292e00bb"]]),fr={name:"BrowserSearchToolbar",components:{BrowserSearchCombobox:rr,SearchHelp:pr},computed:{...g(p,{isSearchOpen:e=>e.isSearchOpen,toolbarHeight:e=>64+12*!!e.page.searchError})}};function br(e,t,a,d,s,r){const o=c("BrowserSearchCombobox"),l=c("SearchHelp");return n(),u(_t,null,{default:m(()=>[e.isSearchOpen?(n(),u(Y,{key:0,density:"compact",height:e.toolbarHeight},{default:m(()=>[i(W,{id:"searchToolbarItems"},{default:m(()=>[i(o),i(l)]),_:1})]),_:1},8,["height"])):y("",!0)]),_:1})}const gr=b(fr,[["render",br],["__scopeId","data-v-64bebade"]]),_r={name:"BrowserFilterSubMenu",props:{name:{type:String,required:!0}},emits:["selected"],data(){return{mdiChevronLeft:me,mdiCloseCircleOutline:he,query:""}},computed:{...g(p,{choices(e){return e.choices.dynamic[this.name]},readingDirectionTitles:e=>e.choices.static.readingDirection,identifierTypeTitles:e=>e.choices.static.identifierType,filter(e){return e.settings.filters[this.name]}}),...pe(p,["filterMode"]),hasNone(){for(const e of this.choices)if(ie.has(e)||e instanceof Object&&ie.has(e.pk))return!0;return!1},vuetifyItems(){return wt(this.choices,this.query)},title(){return Ne(this.name)},lowerTitle(){return this.title.toLowerCase()},filterMenuIcon(){return this.filter&&this.filter.length>0?$e:De},isClearable(){var e;return(e=this.filter)==null?void 0:e.length}},methods:{...B(p,["clearOneFilter","identifierTypeTitle","loadAvailableFilterChoices","loadFilterChoices"]),setUIFilterMode(e){this.filterMode=e,this.query="",e!=="base"&&typeof this.choices!="object"&&this.loadFilterChoices(e)},selected(e){const t={filters:{[this.name]:e}};this.$emit("selected",t)},itemTitle:function(e){return this.name==="readingDirection"?this.readingDirectionTitles[e.value]:this.name==="identifierType"?this.identifierTypeTitle(e.title):e.title},async _loadSubAvailableFilterChoices(){return this.loadAvailableFilterChoices().then(()=>this.loadFilterChoices(this.name))},onClear(){return this.clearOneFilter(this.name).then(()=>this._loadSubAvailableFilterChoices())}}},vr={key:0},yr={class:"filterHeader"};function Sr(e,t,a,d,s,r){return n(),v("div",null,[i(vt,{"hide-on-leave":""},{default:m(()=>[e.filterMode==="base"?(n(),u(T,{key:0,density:"compact",variant:"plain",title:r.title,"append-icon":r.filterMenuIcon,onClick:t[0]||(t[0]=o=>r.setUIFilterMode(a.name))},null,8,["title","append-icon"])):y("",!0)]),_:1}),i(St,{"hide-on-leave":""},{default:m(()=>[e.filterMode===a.name?(n(),v("div",vr,[_("header",yr,[i(T,{class:"filterHeaderTitle","prepend-icon":s.mdiChevronLeft,title:r.lowerTitle,onClick:t[1]||(t[1]=o=>r.setUIFilterMode("base"))},null,8,["prepend-icon","title"]),r.isClearable?(n(),u(T,{key:0,density:"compact",class:"clearFilter",title:"Clear Filter","append-icon":s.mdiCloseCircleOutline,onClick:r.onClear},null,8,["append-icon","onClick"])):y("",!0),typeof e.choices=="object"?(n(),u(yt,{key:1,modelValue:s.query,"onUpdate:modelValue":t[2]||(t[2]=o=>s.query=o),placeholder:"Filter","full-width":"",density:"compact",filled:"",rounded:"","hide-details":"auto",onFocus:t[3]||(t[3]=o=>e.filterMode=a.name)},null,8,["modelValue"])):(n(),u(J,{key:2,class:"filterValuesProgress",rounded:"",indeterminate:""}))]),typeof e.choices=="object"?(n(),u(ge,{key:0,"model-value":e.filter,class:"filterGroup overflow-y-auto",density:"compact",multiple:"",items:r.vuetifyItems,"onUpdate:selected":r.selected},{default:m(()=>[r.hasNone?(n(),u(T,{key:-1,title:"None",value:-1,class:"noneItem",density:"compact",variant:"plain"})):y("",!0),(n(!0),v(N,null,O(r.vuetifyItems,o=>(n(),u(T,{key:o.value,title:r.itemTitle(o),value:o.value,density:"compact",variant:"plain"},null,8,["title","value"]))),128))]),_:1},8,["model-value","items","onUpdate:selected"])):y("",!0)])):y("",!0)]),_:1})])}const wr=b(_r,[["render",Sr],["__scopeId","data-v-f1f62462"]]),Br={name:"BrowserFilterBySelect",components:{BrowserFilterSubMenu:wr,ToolbarSelect:D},extends:D,data(){return{mdiCloseCircleOutline:he,mdiFilterMultipleOutline:Oe,menu:!1}},computed:{...k(p,["filterByChoicesMaxLen","isDynamicFiltersSelected","isFiltersClearable"]),...g(p,{bookmarkChoices:e=>e.choices.static.bookmark,bookmarkFilter:e=>e.settings.filters.bookmark||e.choices.static.bookmark[0],filters:e=>e.settings.filters,filterMenuClass:function(e){let t="filterMenu";return e.filterMode!=="base"&&(t+="Hidden"),t},dynamicChoiceNames:function(e){if(e.choices.dynamic===void 0)return;const t=[];for(const[a,d]of Object.entries(e.choices.dynamic))d&&t.push(a);return t}}),...pe(p,["filterMode"]),padRight(){return this.$vuetify.display.xs&&!this.bookmarkFilter}},methods:{...B(p,["clearFilters","loadAvailableFilterChoices","setSettings"]),onUpdateModelValue(e){const t={filters:{bookmark:e}};this.onSubMenuSelected(t)},onSubMenuSelected(e){this.menu=!1,this.setSettings(e),this.filterMode="base"},onClear(){return this.clearFilters().then(()=>this.loadAvailableFilterChoices()).catch(()=>{console.error("clear filters")})},onMenu(e){e&&this.dynamicChoiceNames===void 0&&this.loadAvailableFilterChoices()}}},Cr={class:"codexSelection"};function kr(e,t,a,d,s,r){const o=c("BrowserFilterSubMenu"),l=c("ToolbarSelect");return n(),u(l,{menu:s.menu,"onUpdate:menu":[t[0]||(t[0]=h=>s.menu=h),r.onMenu],class:A(["filterBySelect",{filterBySelectXSmall:r.padRight}]),"select-label":"filter by",items:e.bookmarkChoices,"menu-props":{contentClass:e.filterMenuClass,maxHeight:void 0},"model-value":e.bookmarkFilter,"max-select-len":e.filterByChoicesMaxLen-1,"onUpdate:modelValue":r.onUpdateModelValue},{selection:m(({item:h})=>[_("span",Cr,S(h.title),1),e.isDynamicFiltersSelected?(n(),u(V,{key:0,class:"filterSuffix",size:"x-small"},{default:m(()=>[C(S(s.mdiFilterMultipleOutline),1)]),_:1})):y("",!0)]),"prepend-item":m(()=>[e.isFiltersClearable?(n(),u(T,{key:0,density:"compact",variant:"plain",class:"clearFilter",title:"Clear All Filters","append-icon":s.mdiCloseCircleOutline,onClick:r.onClear},null,8,["append-icon","onClick"])):y("",!0)]),"append-item":m(()=>[i(H),e.dynamicChoiceNames===void 0?(n(),u(T,{key:0,density:"compact",variant:"plain"},{default:m(()=>[i(J,{indeterminate:"",rounded:""})]),_:1})):e.dynamicChoiceNames.length>0?(n(!0),v(N,{key:1},O(e.dynamicChoiceNames,h=>(n(),u(o,{key:h,name:h,onSelected:r.onSubMenuSelected},null,8,["name","onSelected"]))),128)):(n(),u(T,{key:2,class:"noChoices",density:"compact",variant:"plain",title:"No filters available"}))]),_:1},8,["menu","class","items","menu-props","model-value","max-select-len","onUpdate:modelValue","onUpdate:menu"])}const Tr=b(Br,[["render",kr],["__scopeId","data-v-0d876944"]]),xr=new Set(["bookmark_updated_at","child_count","community_rating","created_at","critical_rating","page_count","search_score","size","updated_at"]),Mr={name:"BrowseOrderBySelect",components:{ToolbarSelect:D},extends:D,computed:{...k(p,["orderByChoices","orderByChoicesMaxLen"]),...g(p,{orderBySetting:e=>e.settings.orderBy}),orderBy:{get(){return this.orderBySetting},set(e){const t={orderBy:e,orderReverse:xr.has(e)};this.setSettings(t)}}},methods:{...B(p,["setSettings"])}};function Vr(e,t,a,d,s,r){const o=c("ToolbarSelect");return n(),u(o,F({modelValue:r.orderBy,"onUpdate:modelValue":t[0]||(t[0]=l=>r.orderBy=l),class:"orderBySelect","select-label":"order by",items:e.orderByChoices,"max-select-len":e.orderByChoicesMaxLen-4},e.$attrs),null,16,["modelValue","items","max-select-len"])}const Fr=b(Mr,[["render",Vr]]),Nr={name:"ToolbarButton",components:{ScaleButton:Dt}};function $r(e,t,a,d,s,r){const o=c("ScaleButton");return n(),u(o,{variant:"plain",class:"toolbarButton"},ce({_:2},[O(e.$slots,(l,h)=>({name:h,fn:m(f=>[Ie(e.$slots,h,F({props:l},f))])}))]),1024)}const ve=b(Nr,[["render",$r]]),Dr={name:"BrowseOrderReverseButton",components:{ToolbarButton:ve},data(){return{mdiSortVariant:Pe}},computed:{...g(p,{orderReverseSetting:e=>e.settings.orderReverse}),title(){return this.orderReverseSetting?"order descending":"order ascending"},iconClasses(){return{inverted:!this.orderReverseSetting}}},methods:{...B(p,["setSettings"]),toggleOrderReverse(){const e={orderReverse:!this.orderReverseSetting};this.setSettings(e)}}};function Or(e,t,a,d,s,r){const o=c("ToolbarButton");return n(),u(o,{class:"orderReverseButton",icon:"",title:r.title,onClick:r.toggleOrderReverse},{default:m(()=>[i(V,{class:A(r.iconClasses)},{default:m(()=>[C(S(s.mdiSortVariant),1)]),_:1},8,["class"])]),_:1},8,["title","onClick"])}const Ir=b(Dr,[["render",Or],["__scopeId","data-v-42884e89"]]),Pr={name:"BrowseOrderReverseButton",components:{ToolbarButton:ve},data(){return{mdiMagnify:j}},computed:{...g(p,{isSearchOpen:e=>e.isSearchOpen,isQuery:e=>!!e.settings.q})},methods:{...B(p,["setIsSearchOpen"])}};function Rr(e,t,a,d,s,r){const o=c("ToolbarButton");return e.isSearchOpen?y("",!0):(n(),u(o,F({key:0,class:"searchButton",icon:s.mdiMagnify},e.$attrs,{title:"Search",onClick:t[0]||(t[0]=l=>e.setIsSearchOpen(!0))}),null,16,["icon"]))}const Hr=b(Pr,[["render",Rr]]),Ar=new Set(["a","f"]),qr={name:"BrowserTopGroupSelect",components:{ToolbarSelect:D},extends:D,data(){return{DIVIDED_VALUES:Ar}},computed:{...g(p,{topGroupSetting:e=>e.settings.topGroup}),...k(p,["topGroupChoices","topGroupChoicesMaxLen"]),topGroup:{get(){return this.topGroupSetting},set(e){const t={topGroup:e};this.setSettings(t)}}},methods:{...B(p,["setSettings"])}};function Er(e,t,a,d,s,r){const o=c("ToolbarSelect");return n(),u(o,{modelValue:r.topGroup,"onUpdate:modelValue":t[0]||(t[0]=l=>r.topGroup=l),class:"topGroupSelect","select-label":"top group",items:e.topGroupChoices,"max-select-len":e.topGroupChoicesMaxLen-2.25},{item:m(({item:l,props:h})=>[s.DIVIDED_VALUES.has(l.value)?(n(),u(H,{key:0})):y("",!0),i(T,F(h,{density:"compact",variant:"plain",title:l.title,value:l.value}),null,16,["title","value"])]),_:1},8,["modelValue","items","max-select-len"])}const Lr=b(qr,[["render",Er]]),Ur={name:"BrowserTopToolbar",components:{BrowserFilterBySelect:Tr,BrowserSearchButton:Hr,BrowserTopGroupSelect:Lr,BrowserOrderBySelect:Fr,BrowserOrderReverseButton:Ir,SettingsDrawerButton:Ot},data(){return{mdiMagnify:j,mdiFamilyTree:Re,browseMode:"filter"}}};function Gr(e,t,a,d,s,r){const o=c("BrowserTopGroupSelect"),l=c("BrowserFilterBySelect"),h=c("BrowserOrderBySelect"),f=c("BrowserOrderReverseButton"),w=c("BrowserSearchButton"),M=c("SettingsDrawerButton");return n(),u(Y,{id:"browserToolbarTop",flat:"",density:"compact",height:48},{default:m(()=>[i(W,{id:"browserToolbarLeftItems"},{default:m(()=>[i(o),i(l),i(h),i(f),i(w)]),_:1}),i(Bt),i(W,null,{default:m(()=>[i(M)]),_:1})]),_:1})}const zr=b(Ur,[["render",Gr],["__scopeId","data-v-547b970a"]]),jr={name:"BrowserHeader",components:{AppBanner:We,BrowserBreadcrumbsToolbar:Qt,BrowserSearchToolbar:gr,BrowserTopToolbar:zr,BrowserTitleToolbar:Jt}},Yr={id:"codexHeadToolbarWrapper"};function Kr(e,t,a,d,s,r){const o=c("AppBanner"),l=c("BrowserTopToolbar"),h=c("BrowserSearchToolbar"),f=c("BrowserBreadcrumbsToolbar"),w=c("BrowserTitleToolbar");return n(),v("header",Yr,[i(o),i(l,{class:"codexHeadToolbar"}),i(h,{class:"codexHeadToolbar"}),i(f,{class:"codexHeadToolbar"}),i(w,{class:"codexHeadToolbar"})])}const Qr=b(jr,[["render",Kr],["__scopeId","data-v-176aeb57"]]),Wr="rpisv",Xr={name:"BrowserSettingsPanel",data(){return{mdiReload:le,openDelay:2e3}},computed:{...k(x,["isAuthorized"]),...g(x,{isUserAuthorized:e=>!!e.user}),...g(p,{groupChoices:e=>{var t,a;return((a=(t=e.choices)==null?void 0:t.static)==null?void 0:a.settingsGroup)||{}},showSettings:e=>{var t;return((t=e.settings)==null?void 0:t.show)||{}},twentyFourHourTime:e=>{var t;return((t=e.settings)==null?void 0:t.twentyFourHourTime)||!1},twentyFourHourTimeTitle:e=>{var t,a,d;return((d=(a=(t=e.choices)==null?void 0:t.static)==null?void 0:a.twentyFourHourTime)==null?void 0:d.title)||""},dynamicCovers:e=>{var t;return((t=e.settings)==null?void 0:t.dynamicCovers)||!1},customCovers:e=>{var t;return((t=e.settings)==null?void 0:t.customCovers)||!1}}),showShowSettings(){var e,t;return Wr.includes((t=(e=this.$route)==null?void 0:e.params)==null?void 0:t.group)}},methods:{...B(p,["setSettings"]),setShow(e,t){const a={show:{[e]:t===!0}};this.setSettings(a)},set24HourTime(e){const t={twentyFourHourTime:e===!0};this.setSettings(t)},setDynamicCovers(e){const t={dynamicCovers:e===!0};this.setSettings(t)},setCustomCovers(e){const t={customCovers:e===!0};this.setSettings(t)}}},Jr={key:0,class:"browserSettingsBlock"},Zr={class:"browserSettingsBlock"};function ea(e,t,a,d,s,r){return n(),v(N,null,[r.showShowSettings?R((n(),v("div",Jr,[t[3]||(t[3]=_("h4",{class:"browserSettingsHeader"},"Show Group Levels",-1)),(n(!0),v(N,null,O(e.groupChoices,o=>(n(),u(q,{key:o.title,class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.showSettings[o.value],"true-value":!0,label:`Show ${o.title}`,"onUpdate:modelValue":l=>r.setShow(o.value,l)},null,8,["model-value","label","onUpdate:modelValue"]))),128))])),[[E,{openDelay:s.openDelay,text:"Show these groups when navigating the browse tree"}]]):y("",!0),i(H),_("div",Zr,[t[4]||(t[4]=_("h4",{class:"browserSettingsHeader"},"Covers",-1)),R(i(q,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.dynamicCovers,"true-value":!0,label:"Dynamic Covers","onUpdate:modelValue":t[0]||(t[0]=o=>r.setDynamicCovers(o))},null,8,["model-value"]),[[E,{openDelay:s.openDelay,text:"Choose covers by filters, search, and order"}]]),R(i(q,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.customCovers,"true-value":!0,label:"Custom Covers","onUpdate:modelValue":t[1]||(t[1]=o=>r.setCustomCovers(o))},null,8,["model-value"]),[[E,{openDelay:s.openDelay,text:"Overlay custom covers if the admin has set them."}]])]),i(H),i(q,{class:"browserGroupCheckbox",density:"compact","hide-details":"auto","model-value":e.twentyFourHourTime,"true-value":!0,indeterminate:"",label:"Force 24 Hour Time","onUpdate:modelValue":t[2]||(t[2]=o=>r.set24HourTime(o))},null,8,["model-value"]),i(H)],64)}const ta=b(Xr,[["render",ea],["__scopeId","data-v-4330ddbf"]]),ra={name:"BrowserSettingsDrawer",components:{SettingsDrawer:It,BrowserSettingsPanel:ta}};function aa(e,t,a,d,s,r){const o=c("BrowserSettingsPanel"),l=c("SettingsDrawer");return n(),u(l,{title:"Browser",temporary:"","disable-resize-watcher":""},{panel:m(()=>[i(o)]),_:1})}const oa=b(ra,[["render",aa]]),sa={name:"BrowserMarkReadItem",components:{ConfirmDialog:Pt,CodexListItem:gt},props:{item:{type:Object,required:!0}},computed:{...g(p,{groupNames:e=>e.choices.static.groupNames}),verb(){return this.item.finished?"Unread":"Read"},icon(){return this.item.finished?He:Ae},confirmText(){return`Mark ${this.verb}`},markReadText(){const e=["Mark"];this.item.group!="c"&&e.push("Entire");let t=this.groupNames[this.item.group];return this.item.group!=="s"&&(t=t.slice(0,-1)),e.push(t,this.verb),e.join(" ")},itemName(){return this.item.name?this.item.name:"(Empty)"}},methods:{...B(p,["setBookmarkFinished"]),toggleRead:function(){this.setBookmarkFinished(this.item,!this.item.finished),this.showMenu=!1}}};function ia(e,t,a,d,s,r){const o=c("CodexListItem"),l=c("ConfirmDialog");return a.item.group==="c"?(n(),u(o,{key:0,"prepend-icon":r.icon,title:r.markReadText,onClick:r.toggleRead},null,8,["prepend-icon","title","onClick"])):(n(),u(l,{key:1,button:!1,"prepend-icon":r.icon,"button-text":r.markReadText,"title-text":r.markReadText,"confirm-text":r.confirmText,text:r.itemName,onConfirm:r.toggleRead,onCancel:t[0]||(t[0]=h=>e.showMenu=!1)},null,8,["prepend-icon","button-text","title-text","confirm-text","text","onConfirm"]))}const na=b(sa,[["render",ia],["__scopeId","data-v-118f177a"]]),da={name:"BrowserContainerMenu",components:{DownloadButton:Ct,MarkReadItem:na},props:{item:{type:Object,required:!0}},data(){return{mdiDotsVertical:qe,showMenu:!1}},computed:{children(){var e;return((e=this.item)==null?void 0:e.childCount)||1},groupNames(){var e,t,a,d,s;return[(e=this.item)==null?void 0:e.publisherName,(t=this.item)==null?void 0:t.imprintName,(a=this.item)==null?void 0:a.seriesName,(d=this.item)==null?void 0:d.volumeName,(s=this.item)==null?void 0:s.name]},downloadNames(){var e,t;return(e=this.item)!=null&&e.fileName?[(t=this.item)==null?void 0:t.fileName]:this.groupNames}}};function la(e,t,a,d,s,r){const o=c("MarkReadItem"),l=c("DownloadButton");return n(),u($t,{modelValue:s.showMenu,"onUpdate:modelValue":t[1]||(t[1]=h=>s.showMenu=h),"offset-y":"",top:""},{activator:m(({props:h})=>[i(be,F({"aria-label":"action menu",class:"browserCardMenuIcon cardControlButton",icon:s.mdiDotsVertical,title:"Action Menu",variant:"text"},h,{onClick:t[0]||(t[0]=Ee(()=>{},["prevent"]))}),null,16,["icon"])]),default:m(()=>[i(ge,{class:"background-soft-highlight"},{default:m(()=>{var h,f,w;return[i(o,{class:"listItem",item:a.item},null,8,["item"]),i(l,{group:(h=a.item)==null?void 0:h.group,pks:(f=a.item)==null?void 0:f.ids,children:r.children,names:r.downloadNames,ts:(w=a.item)==null?void 0:w.mtime,class:"listItem",button:!1},null,8,["group","pks","children","names","ts"])]}),_:1})]),_:1},8,["modelValue"])}const ca=b(da,[["render",la],["__scopeId","data-v-d9545be6"]]),ua={name:"BrowserCardControls",components:{BrowserCardMenu:ca,MetadataButton:kt},props:{item:{type:Object,required:!0},eyeOpen:{type:Boolean,required:!0}},data(){return{mdiEye:re,mdiEyeOff:ae}},computed:{eyeIcon:function(){return this.eyeOpen?re:ae}}},ma={class:"cardControls"};function ha(e,t,a,d,s,r){const o=c("MetadataButton"),l=c("BrowserCardMenu");return n(),v("div",ma,[a.item.group==="c"?(n(),u(V,{key:0,class:"eye"},{default:m(()=>[C(S(r.eyeIcon),1)]),_:1})):y("",!0),i(o,{group:a.item.group,book:a.item,children:a.item.childCount},null,8,["group","book","children"]),i(l,{item:a.item},null,8,["item"])])}const pa=b(ua,[["render",ha],["__scopeId","data-v-6f2c700a"]]),fa=new Set(["community_rating","critical_rating"]),ba=new Set(["date"]),ga=new Set(["bookmark_updated_at","created_at","updated_at"]),_a=new Set([null,void 0,"sort_name"]),va=new Set([null,void 0]),ya={name:"OrderByCaption",props:{item:{type:Object,required:!0}},computed:{...g(p,{orderBy:e=>e.settings.orderBy,twentyFourHourTime:e=>e.settings.twentyFourHourTime,topGroup:e=>e.settings.topGroup}),orderValue(){let e=this.item.orderValue;try{if(_a.has(this.orderBy)||this.orderBy==="filename"&&this.item.group!=="c"||this.orderBy==="story_arc_number"&&this.item.group==="a"||va.has(e))e="";else if(ba.has(this.orderBy)){const t=new Date(e);e=Le.format(t)}else this.orderBy=="search_score"?e=this.format_search_score(e):ga.has(this.orderBy)?e=Ue(e,this.twentyFourHourTime,!0):this.orderBy=="page_count"?e=`${oe.format(e)} pages`:this.orderBy=="size"?e=Tt(Number.parseInt(e,10)):fa.has(this.orderBy)&&(e=`★  ${e}`)}catch(t){console.debug(t)}return e}},methods:{format_search_score(e){return e=oe.format(Math.round(Number.parseFloat(e)*10)),isNaN(e)&&(e=""),e}}},Sa=["innerHTML"];function wa(e,t,a,d,s,r){return r.orderValue?(n(),v("div",{key:0,class:"orderCaption text-caption",innerHTML:r.orderValue},null,8,Sa)):y("",!0)}const Ba=b(ya,[["render",wa],["__scopeId","data-v-1e70ee12"]]),Ca={name:"BrowserCardSubtitle",props:{item:{type:Object,required:!0}},computed:{...g(p,{orderByFilename:e=>e.settings.orderBy==="filename",orderByName:e=>e.settings.orderBy==="sort_name",topGroup:e=>e.settings.topGroup,showSeries:e=>e.settings.show.s,showVolume:e=>e.settings.show.v,zeroPad:e=>e.page.zeroPad}),seriesName(){return(this.topGroup==="a"||this.orderByName&&!this.showSeries)&&["c","v"].includes(this.item.group)&&this.item.seriesName?this.item.seriesName:!1},volumeName(){return(this.topGroup==="a"||this.orderByName&&!this.showVolume)&&this.item.group==="c"&&this.item.volumeName?Q(this.item.volumeName):!1},headerName(){let e;switch(this.item.group){case"i":e=this.item.publisherName;break;case"v":e=this.item.seriesName;break;case"c":e=this.$route.params.group==="f"?Ge(this.item,this.zeroPad):ze(this.item,this.zeroPad);break;default:e=""}return e&&this.item.ids&&this.item.ids.length>1?"(Multiple)":e},displayName(){return this.item.group==="v"?Q(this.item.name):this.item.name},fileName(){return this.topGroup==="f"&&!this.orderByFilename?this.item.fileName:""},linkLabel(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.headerName,e}}},ka={class:"browserLink cardSubtitle text-caption"},Ta={key:0,class:"fileName"},xa={key:1,class:"seriesCaption"},Ma={key:2,class:"volumeCaption"},Va={key:3,class:"headerName"},Fa={class:"displayName"};function Na(e,t,a,d,s,r){return n(),v("div",ka,[r.fileName?(n(),v("div",Ta,S(r.fileName),1)):y("",!0),r.seriesName?(n(),v("div",xa,S(r.seriesName),1)):y("",!0),r.volumeName?(n(),v("div",Ma,S(r.volumeName),1)):y("",!0),r.headerName?(n(),v("div",Va,S(r.headerName),1)):y("",!0),_("div",Fa,S(r.displayName),1)])}const $a=b(Ca,[["render",Na],["__scopeId","data-v-57ab6608"]]),Da=L({modelValue:Boolean,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},...U(),...lt(),...X(),...ct({transition:"fade-transition"})},"VLazy"),Oa=G()({name:"VLazy",directives:{intersect:ut},props:Da(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:a}=t;const{dimensionStyles:d}=mt(e),s=je(e,"modelValue");function r(o){s.value||(s.value=o)}return z(()=>R(i(e.tag,{class:["v-lazy",e.class],style:[d.value,e.style]},{default:()=>[s.value&&i(ht,{transition:e.transition,appear:!0},{default:()=>{var o;return[(o=a.default)==null?void 0:o.call(a)]}})]}),[[Ye("intersect"),{handler:r,options:e.options},null]])),{}}}),ne=100,Ia=-170,Pa={name:"BrowserCard",components:{BookCover:xt,BrowserCardControls:pa,BrowserCardSubtitle:$a,OrderByCaption:Ba},props:{item:{type:Object,required:!0}},computed:{...g(p,{importMetadata:e=>e.page.adminFlags.importMetadata}),linkLabel(){let e="";return e+=this.item.group==="c"?"Read":"Browse to",e+=" "+this.item.name,e},ids(){return this.item.ids.join(",")},browserRoute(){return{name:"browser",params:{group:this.item.group,pks:this.ids,page:1},query:{ts:this.item.mtime}}},toRoute(){return this.item.group==="c"?Mt(this.item,this.importMetadata):this.browserRoute},progressBGOpacity(){return this.item.progress?.1:0}},mounted(){this.scrollToMe()},methods:{scrollToMe:function(){if(!this.$route.hash||this.$route.hash.split("-")[1]!==String(this.ids))return;const e=this.$el;if(!e){console.warn("No element found to scroll to!");return}setTimeout(function(){e.scrollIntoView(),setTimeout(function(){window.scrollBy(0,Ia)},ne)},ne)}}},Ra={class:"browserCardCoverWrapper"},Ha={class:"browserCardTop"},Aa={class:"cardFooter"};function qa(e,t,a,d,s,r){const o=c("BookCover"),l=c("BrowserCardControls"),h=c("router-link"),f=c("BrowserCardSubtitle"),w=c("OrderByCaption");return n(),u(Oa,{id:`card-${r.ids}`,transition:"scale-transition"},{default:m(()=>[_("div",Ra,[_("div",Ha,[i(o,{group:a.item.group,pks:a.item.ids,mtime:a.item.mtime,"child-count":a.item.childCount,finished:a.item.finished},null,8,["group","pks","mtime","child-count","finished"]),i(h,{class:"cardCoverOverlay",to:r.toRoute,"aria-label":r.linkLabel},{default:m(()=>[i(l,{item:a.item,"eye-open":!!r.toRoute},null,8,["item","eye-open"])]),_:1},8,["to","aria-label"])]),i(J,{class:"bookCoverProgress","bg-opacity":r.progressBGOpacity,"model-value":a.item.progress,"aria-label":`${a.item.progress}% read`,rounded:"",height:"2"},null,8,["bg-opacity","model-value","aria-label"]),_("footer",Aa,[i(f,{item:a.item},null,8,["item"]),i(w,{item:a.item},null,8,["item"])])])]),_:1},8,["id"])}const Ea=b(Pa,[["render",qa],["__scopeId","data-v-b11a367d"]]),La={name:"BrowserEmptyResults",components:{EmptyState:Xe},data(){return{mdiOpenInNew:ue}},computed:{...k(x,["isAuthorized","isUserAdmin"]),...g(x,{registration:e=>e.adminFlags.registration}),...k(p,["isFiltersClearable"]),...g(p,{librariesExist:e=>e.page.librariesExist}),empty(){let e={};return this.librariesExist?(e.headline="No Comics Found",e.title="For these filter and search settings",e.icon=Ke):(e.headline="No Libraries Exist",this.isUserAdmin?e.title="Use the top right ☰ menu to navigate to the admin panel and add a comic library":this.isAuthorized?e.title="An administrator must add some comics libraries":e.title="Use the top right ☰ menu to log in as an administrator to add libraries",e.icon=Qe),e},showLinkToReadmeAdmin(){return!this.librariesExist&&this.isUserAdmin},actionText(){return this.isFiltersClearable?"Clear Filters and Search":""}},methods:{...B(p,["clearFilters"])}},Ua={key:0},Ga={href:"https://github.com/ajslater/codex#-administration",target:"_blank"};function za(e,t,a,d,s,r){const o=c("EmptyState");return n(),u(o,{class:"browserEmpty",headline:r.empty.headline,title:r.empty.title,icon:r.empty.icon,"action-text":r.actionText,"onClick:action":t[0]||(t[0]=l=>e.clearFilters(!0))},{default:m(()=>[r.showLinkToReadmeAdmin?(n(),v("div",Ua,[t[2]||(t[2]=C(" See the ")),_("a",Ga,[t[1]||(t[1]=C("README ")),i(V,null,{default:m(()=>[C(S(s.mdiOpenInNew),1)]),_:1})]),t[3]||(t[3]=C(" for help "))])):y("",!0)]),_:1},8,["headline","title","icon","action-text"])}const ja=b(La,[["render",za]]),Ya={name:"BrowserMain",components:{BrowserCard:Ea,BrowserEmptyState:ja,PlaceholderLoading:Je},computed:{...g(x,{nonUsers:e=>e.adminFlags.nonUsers}),...k(x,["isAuthorized","isBanner"]),...k(p,["isSearchMode"]),...g(p,{librariesExist:e=>e.page.librariesExist,showPlaceHolder(e){return this.nonUsers===void 0||this.isAuthorized&&(this.librariesExist==null||!e.browserPageLoaded)},cards:e=>[...e.page.groups??[],...e.page.books??[]],numPages:e=>e.page.numPages,query:e=>e.settings.q,isSearchOpen:e=>e.isSearchOpen}),browsePaneClasses(){const e={padFooter:this.numPages>1};let t="browsePane";return this.isSearchOpen&&(t+="Search"),this.isBanner&&(t+="Banner"),e[t]=!0,e},showBrowseItems(){return this.cards&&this.cards.length>0&&this.isAuthorized&&!this.showPlaceHolder},searchLimitMessage(){let e="";if(!this.query)return e;const t=+this.$route.params.page,a=100*t;return this.showPlaceHolder?e+=`Searching for ${a} entries...`:this.numPages>t&&(e+=`Search results truncated to ${a} entries.`,e+=" Advance the page to look for more."),e}}},Ka={key:0,id:"browsePaneContainer"},Qa={key:3,id:"searchLimitMessage",title:"You may change this in the settings drawer"};function Wa(e,t,a,d,s,r){const o=c("BrowserCard"),l=c("PlaceholderLoading"),h=c("BrowserEmptyState");return n(),u(fe,{id:"browsePane",class:A(r.browsePaneClasses)},{default:m(()=>[r.showBrowseItems?(n(),v("div",Ka,[(n(!0),v(N,null,O(e.cards,f=>(n(),u(o,{key:`${f.group}${f.ids}`,item:f},null,8,["item"]))),128))])):e.showPlaceHolder?(n(),u(l,{key:1,class:"placeholder"})):(n(),u(h,{key:2})),r.searchLimitMessage?(n(),v("div",Qa,S(r.searchLimitMessage),1)):y("",!0)]),_:1},8,["class"])}const Xa=b(Ya,[["render",Wa],["__scopeId","data-v-327dfc0a"]]),Ja={name:"BrowserNavButton",components:{PaginationNavButton:Vt},props:{back:{type:Boolean,required:!0},more:{type:Boolean,default:!1}},data(){return{mdiChevronLeft:me,mdiMagnify:j,routeParams:this.$route.params,page:+this.$route.params.page}},computed:{...k(p,["isSearchMode"]),...g(p,{numPages:e=>e.page.numPages}),increment(){return this.back?-1:1},toPage(){return this.page+this.increment},title(){return this.showMore?"Search for More":"Page "+this.toPage},toRoute(){const e=this.toPage;return{params:{...this.routeParams,page:e}}},classes(){return{leftButton:this.back,rightButton:!this.back}},disabled(){return this.back&&this.page<=1||!this.back&&this.page>=this.numPages},showMore(){return this.more&&this.isSearchMode&&this.toPage===this.numPages}},watch:{$route(e){this.params=e.params,this.page=+e.params.page}}};function Za(e,t,a,d,s,r){const o=c("PaginationNavButton");return n(),u(o,{key:r.toRoute,class:A(r.classes),disabled:r.disabled,title:r.title,to:r.toRoute},{default:m(()=>[r.showMore?(n(),u(V,{key:0},{default:m(()=>[C(S(s.mdiMagnify),1)]),_:1})):y("",!0),i(V,{class:A({flipHoriz:!a.back})},{default:m(()=>[C(S(s.mdiChevronLeft),1)]),_:1},8,["class"])]),_:1},8,["class","disabled","title","to"])}const eo=b(Ja,[["render",Za],["__scopeId","data-v-372671b3"]]),to={name:"BrowserNavToolbar",components:{BrowserNavButton:eo,PaginationSlider:Ft,PaginationToolbar:Nt},computed:{...g(p,{numPages:e=>e.page.numPages})},methods:{...B(p,["routeToPage"]),onUpdate(e){this.routeToPage(e)}}};function ro(e,t,a,d,s,r){const o=c("BrowserNavButton"),l=c("PaginationSlider"),h=c("PaginationToolbar");return e.numPages>1?(n(),u(h,{key:0},{default:m(()=>[i(o,{back:!0}),i(l,{"model-value":+e.$route.params.page,min:1,max:e.numPages,step:1,"onUpdate:modelValue":t[0]||(t[0]=f=>e.routeToPage(f))},null,8,["model-value","max"]),i(o,{back:!1,more:!0})]),_:1})):y("",!0)}const ao=b(to,[["render",ro]]),oo={name:"MainBrowser",components:{BrowserHeader:Qr,BrowserMain:Xa,BrowserNavToolbar:ao,BrowserSettingsDrawer:oa,Unauthorized:Ze},computed:{...g(x,{user:e=>e.user}),...k(x,["isAuthorized"])},watch:{$route(e){var t;window.scrollTo(0,0),this.setPageMtime((t=e==null?void 0:e.query)==null?void 0:t.ts),this.loadBrowserPage()},user(){this.loadSettings()},isAuthorized(){this.loadSettings()}},created(){this.loadSettings()},methods:{...B(p,["loadBrowserPage","loadSettings","setPageMtime"])}};function so(e,t,a,d,s,r){const o=c("BrowserHeader"),l=c("BrowserMain"),h=c("BrowserNavToolbar"),f=c("BrowserSettingsDrawer"),w=c("Unauthorized");return e.isAuthorized?(n(),u(fe,{key:0,id:"browser"},{default:m(()=>[i(o),i(l),i(h),i(f)]),_:1})):(n(),u(w,{key:1}))}const xo=b(oo,[["render",so],["__scopeId","data-v-4577512d"]]);export{xo as default};
