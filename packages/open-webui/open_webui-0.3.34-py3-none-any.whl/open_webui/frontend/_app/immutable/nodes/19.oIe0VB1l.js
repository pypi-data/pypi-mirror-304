import{s as ge,e as b,c as k,a as I,d as c,f as u,i as N,K as bt,F as Ue,k as H,o as K,g as w,y as Me,z as Be,n as le,A as me,D as he,p as Ae,j as xe,H as We,u as te,t as se,b as oe,h as ae,B as $e,C as kt,E as Ve,q as yt,S as It,l as Oe}from"../chunks/scheduler.BwES1eAZ.js";import{S as ke,i as ye,t as D,g as ue,c as de,a as F,b as A,d as W,m as L,e as j,f as _e}from"../chunks/index.JIjGThd1.js";import{F as Et}from"../chunks/fuse.CU2r43ac.js";import{t as q}from"../chunks/Toaster.svelte_svelte_type_style_lang.B-_b2mbR.js";import{A as Dt,P as xt,a as Qe,D as Vt,b as Ft,E as St}from"../chunks/EllipsisVertical.BexTyuv2.js";import{g as Tt}from"../chunks/entry.Dtt6bcfU.js";import{p as Ct}from"../chunks/stores.DwA8Ctdq.js";import{s as zt,k as Nt}from"../chunks/index.C9ZMts_b.js";import{u as Mt,a as Bt}from"../chunks/index.D7Ypn_Fx.js";import{a as Pt,r as Ut,b as At,e as Wt,u as Lt,f as jt,g as Ot}from"../chunks/index.CPZPFbs_.js";import{t as Ht}from"../chunks/index.Ct5Bfund.js";import{j as He,v as Kt}from"../chunks/index.NeePGI5c.js";import{S as qt}from"../chunks/Spinner.CXnOjLIu.js";import{e as Ke}from"../chunks/each.AnZnuqp8.js";import{F as Rt}from"../chunks/FileItem.B946aP2f.js";import"../chunks/updater.DmDqAuYd.js";import{D as Xt,M as Ne}from"../chunks/Dropdown.XSRoJBhq.js";import{b as Yt}from"../chunks/menu-trigger.BnymnTnP.js";import{f as Gt}from"../chunks/index.DyIcjikr.js";import{T as Pe}from"../chunks/Tooltip.Dj8C3DN2.js";import{A as Jt}from"../chunks/ArrowUpCircle.CXZXSEfS.js";import{F as Qt}from"../chunks/FolderOpen.DOhJ0hmP.js";import"../chunks/dayjs.min.CnqrW7zs.js";import{M as Zt}from"../chunks/Modal.CNEdYPsp.js";import{R as Le,V as el}from"../chunks/RichTextInput.DlvH1bTO.js";import{X as tl}from"../chunks/XMark.BEXw6qNA.js";import{M as ll}from"../chunks/Mic.DArzRPl0.js";import{C as rl}from"../chunks/ConfirmDialog.56zgi8Co.js";import{C as Ze}from"../chunks/ChevronLeft.bwOsKpyw.js";function qe(o,e,t){const l=o.slice();return l[5]=e[t],l}function Re(o){var a,i,f,_,v,h;let e,t,l,r;function n(){return o[3](o[5])}function s(){return o[4](o[5])}return t=new Rt({props:{className:"w-full",colorClassName:(o[0]===o[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",file:o[5],name:((a=o[5])==null?void 0:a.name)??((f=(i=o[5])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((_=o[5])==null?void 0:_.size)??((h=(v=o[5])==null?void 0:v.meta)==null?void 0:h.size)??"",loading:o[5].status==="uploading",dismissible:!0}}),t.$on("click",n),t.$on("dismiss",s),{c(){e=b("div"),A(t.$$.fragment),l=H(),this.h()},l(p){e=k(p,"DIV",{class:!0});var y=I(e);W(t.$$.fragment,y),l=K(y),y.forEach(c),this.h()},h(){u(e,"class","mt-1 px-2")},m(p,y){N(p,e,y),L(t,e,null),w(e,l),r=!0},p(p,y){var E,z,S,V,x,T;o=p;const $={};y&3&&($.colorClassName=(o[0]===o[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),y&2&&($.file=o[5]),y&2&&($.name=((E=o[5])==null?void 0:E.name)??((S=(z=o[5])==null?void 0:z.meta)==null?void 0:S.name)),y&2&&($.size=((V=o[5])==null?void 0:V.size)??((T=(x=o[5])==null?void 0:x.meta)==null?void 0:T.size)??""),y&2&&($.loading=o[5].status==="uploading"),t.$set($)},i(p){r||(D(t.$$.fragment,p),r=!0)},o(p){F(t.$$.fragment,p),r=!1},d(p){p&&c(e),j(t)}}}function nl(o){let e,t,l=Ke(o[1]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Re(qe(o,l,s));const n=s=>F(r[s],1,1,()=>{r[s]=null});return{c(){e=b("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var a=I(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(c),this.h()},h(){u(e,"class","max-h-full flex flex-col w-full")},m(s,a){N(s,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(s,[a]){if(a&7){l=Ke(s[1]);let i;for(i=0;i<l.length;i+=1){const f=qe(s,l,i);r[i]?(r[i].p(f,a),D(r[i],1)):(r[i]=Re(f),r[i].c(),D(r[i],1),r[i].m(e,null))}for(ue(),i=l.length;i<r.length;i+=1)n(i);de()}},i(s){if(!t){for(let a=0;a<l.length;a+=1)D(r[a]);t=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)F(r[a]);t=!1},d(s){s&&c(e),bt(r,s)}}}function sl(o,e,t){const l=Ue();let{selectedFileId:r=null}=e,{files:n=[]}=e;const s=i=>{i.status!=="uploading"&&l("click",i.id)},a=i=>{i.status!=="uploading"&&l("delete",i.id)};return o.$$set=i=>{"selectedFileId"in i&&t(0,r=i.selectedFileId),"files"in i&&t(1,n=i.files)},[r,n,l,s,a]}class ol extends ke{constructor(e){super(),ye(this,e,sl,nl,ge,{selectedFileId:0,files:1})}}function al(o){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(l){e=Be(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=I(e);t=Be(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(t).forEach(c),r.forEach(c),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",o[1]),u(e,"stroke","currentColor"),u(e,"class",o[0])},m(l,r){N(l,e,r),w(e,t)},p(l,[r]){r&2&&u(e,"stroke-width",l[1]),r&1&&u(e,"class",l[0])},i:le,o:le,d(l){l&&c(e)}}}function il(o,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return o.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class fl extends ke{constructor(e){super(),ye(this,e,il,al,ge,{className:0,strokeWidth:1})}}function cl(o){let e,t;return{c(){e=Me("svg"),t=Me("path"),this.h()},l(l){e=Be(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=I(e);t=Be(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),I(t).forEach(c),r.forEach(c),this.h()},h(){u(t,"stroke-linecap","round"),u(t,"stroke-linejoin","round"),u(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"fill","none"),u(e,"viewBox","0 0 24 24"),u(e,"stroke-width",o[1]),u(e,"stroke","currentColor"),u(e,"class",o[0])},m(l,r){N(l,e,r),w(e,t)},p(l,[r]){r&2&&u(e,"stroke-width",l[1]),r&1&&u(e,"class",l[0])},i:le,o:le,d(l){l&&c(e)}}}function ul(o,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return o.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class dl extends ke{constructor(e){super(),ye(this,e,ul,cl,ge,{className:0,strokeWidth:1})}}function pl(o){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(n){e=k(n,"BUTTON",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){u(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(n,s){N(n,e,s),l||(r=te(e,"click",o[9]),l=!0)},p:le,d(n){n&&c(e),l=!1,r()}}}function ml(o){let e,t;return e=new Pe({props:{content:o[2].t("Add Content"),$$slots:{default:[pl]},$$scope:{ctx:o}}}),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.content=l[2].t("Add Content")),r&4098&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function hl(o){let e,t,l,r=o[2].t("Upload files")+"",n,s;return e=new Jt({props:{strokeWidth:"2"}}),{c(){A(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=I(l);n=oe(i,r),i.forEach(c),this.h()},h(){u(l,"class","flex items-center")},m(a,i){L(e,a,i),N(a,t,i),N(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Upload files")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(l)),j(e,a)}}}function _l(o){let e,t,l,r=o[2].t("Upload directory")+"",n,s;return e=new Qt({props:{strokeWidth:"2"}}),{c(){A(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=I(l);n=oe(i,r),i.forEach(c),this.h()},h(){u(l,"class","flex items-center")},m(a,i){L(e,a,i),N(a,t,i),N(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(l)),j(e,a)}}}function gl(o){let e,t,l,r=o[2].t("Sync directory")+"",n,s;return e=new dl({props:{strokeWidth:"2"}}),{c(){A(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=I(l);n=oe(i,r),i.forEach(c),this.h()},h(){u(l,"class","flex items-center")},m(a,i){L(e,a,i),N(a,t,i),N(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(l)),j(e,a)}}}function vl(o){let e,t;return e=new Ne({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[gl]},$$scope:{ctx:o}}}),e.$on("click",o[7]),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&4100&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function $l(o){let e,t,l,r=o[2].t("Add text content")+"",n,s;return e=new fl({props:{strokeWidth:"2"}}),{c(){A(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=I(l);n=oe(i,r),i.forEach(c),this.h()},h(){u(l,"class","flex items-center")},m(a,i){L(e,a,i),N(a,t,i),N(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Add text content")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(c(t),c(l)),j(e,a)}}}function wl(o){let e,t,l,r,n,s,a,i;return e=new Ne({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[hl]},$$scope:{ctx:o}}}),e.$on("click",o[5]),l=new Ne({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:o}}}),l.$on("click",o[6]),n=new Pe({props:{content:o[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[vl]},$$scope:{ctx:o}}}),a=new Ne({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[$l]},$$scope:{ctx:o}}}),a.$on("click",o[8]),{c(){A(e.$$.fragment),t=H(),A(l.$$.fragment),r=H(),A(n.$$.fragment),s=H(),A(a.$$.fragment)},l(f){W(e.$$.fragment,f),t=K(f),W(l.$$.fragment,f),r=K(f),W(n.$$.fragment,f),s=K(f),W(a.$$.fragment,f)},m(f,_){L(e,f,_),N(f,t,_),L(l,f,_),N(f,r,_),L(n,f,_),N(f,s,_),L(a,f,_),i=!0},p(f,_){const v={};_&4100&&(v.$$scope={dirty:_,ctx:f}),e.$set(v);const h={};_&4100&&(h.$$scope={dirty:_,ctx:f}),l.$set(h);const p={};_&4&&(p.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(p.$$scope={dirty:_,ctx:f}),n.$set(p);const y={};_&4100&&(y.$$scope={dirty:_,ctx:f}),a.$set(y)},i(f){i||(D(e.$$.fragment,f),D(l.$$.fragment,f),D(n.$$.fragment,f),D(a.$$.fragment,f),i=!0)},o(f){F(e.$$.fragment,f),F(l.$$.fragment,f),F(n.$$.fragment,f),F(a.$$.fragment,f),i=!1},d(f){f&&(c(t),c(r),c(s)),j(e,f),j(l,f),j(n,f),j(a,f)}}}function bl(o){let e,t,l;return t=new Yt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:4,side:"bottom",align:"end",transition:Gt,$$slots:{default:[wl]},$$scope:{ctx:o}}}),{c(){e=b("div"),A(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{slot:!0});var n=I(e);W(t.$$.fragment,n),n.forEach(c),this.h()},h(){u(e,"slot","content")},m(r,n){N(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n&4100&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&c(e),j(t)}}}function kl(o){let e,t,l;function r(s){o[10](s)}let n={align:"end",$$slots:{content:[bl],default:[ml]},$$scope:{ctx:o}};return o[1]!==void 0&&(n.show=o[1]),e=new Xt({props:n}),me.push(()=>_e(e,"show",r)),e.$on("change",o[11]),{c(){A(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:s}),!t&&a&2&&(t=!0,i.show=s[1],he(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){j(e,s)}}}function yl(o,e,t){let l;const r=Ue(),n=Ae("i18n");xe(o,n,$=>t(2,l=$));let{onClose:s=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},v=()=>{r("upload",{type:"text"})},h=$=>{$.stopPropagation(),t(1,a=!0)};function p($){a=$,t(1,a)}const y=$=>{$.detail===!1&&s()};return o.$$set=$=>{"onClose"in $&&t(0,s=$.onClose)},[s,a,l,r,n,i,f,_,v,h,p,y]}class Il extends ke{constructor(e){super(),ye(this,e,yl,kl,ge,{onClose:0})}}function El(o){let e,t;return e=new Pe({props:{content:o[4].t("Voice Input"),$$slots:{default:[xl]},$$scope:{ctx:o}}}),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&16&&(n.content=l[4].t("Voice Input")),r&65560&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Dl(o){let e,t,l,r;function n(a){o[10](a)}let s={className:"p-1"};return o[3]!==void 0&&(s.recording=o[3]),t=new el({props:s}),me.push(()=>_e(t,"recording",n)),t.$on("cancel",o[11]),t.$on("confirm",o[12]),{c(){e=b("div"),A(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=I(e);W(t.$$.fragment,i),i.forEach(c),this.h()},h(){u(e,"class","max-w-full w-64")},m(a,i){N(a,e,i),L(t,e,null),r=!0},p(a,i){const f={};!l&&i&8&&(l=!0,f.recording=a[3],he(()=>l=!1)),t.$set(f)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){F(t.$$.fragment,a),r=!1},d(a){a&&c(e),j(t)}}}function xl(o){let e,t,l,r,n;return t=new ll({props:{className:"size-5"}}),{c(){e=b("button"),A(t.$$.fragment),this.h()},l(s){e=k(s,"BUTTON",{class:!0,type:!0});var a=I(e);W(t.$$.fragment,a),a.forEach(c),this.h()},h(){u(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),u(e,"type","button")},m(s,a){N(s,e,a),L(t,e,null),l=!0,r||(n=te(e,"click",o[13]),r=!0)},p:le,i(s){l||(D(t.$$.fragment,s),l=!0)},o(s){F(t.$$.fragment,s),l=!1},d(s){s&&c(e),j(t),r=!1,n()}}}function Vl(o){let e,t=o[4].t("Save")+"",l;return{c(){e=b("button"),l=se(t),this.h()},l(r){e=k(r,"BUTTON",{class:!0,type:!0});var n=I(e);l=oe(n,t),n.forEach(c),this.h()},h(){u(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),u(e,"type","submit")},m(r,n){N(r,e,n),w(e,l)},p(r,n){n&16&&t!==(t=r[4].t("Save")+"")&&ae(l,t)},d(r){r&&c(e)}}}function Fl(o){let e,t,l,r,n,s,a,i,f,_,v,h,p,y,$,E,z,S,V,x,T,C,X,d,g,B,R;l=new tl({props:{className:"size-3.5"}});function J(P){o[9](P)}let Z={placeholder:o[4].t("Write something...")};o[2]!==void 0&&(Z.value=o[2]),$=new Le({props:Z}),me.push(()=>_e($,"value",J));const re=[Dl,El],ee=[];function we(P,G){return P[3]?0:1}return x=we(o),T=ee[x]=re[x](o),d=new Pe({props:{content:o[4].t("Save"),$$slots:{default:[Vl]},$$scope:{ctx:o}}}),{c(){e=b("div"),t=b("button"),A(l.$$.fragment),r=H(),n=b("div"),s=b("form"),a=b("div"),i=b("div"),f=b("div"),_=b("div"),v=b("input"),p=H(),y=b("div"),A($.$$.fragment),z=H(),S=b("div"),V=b("div"),T.c(),C=H(),X=b("div"),A(d.$$.fragment),this.h()},l(P){e=k(P,"DIV",{class:!0});var G=I(e);t=k(G,"BUTTON",{class:!0,type:!0});var ie=I(t);W(l.$$.fragment,ie),ie.forEach(c),G.forEach(c),r=K(P),n=k(P,"DIV",{class:!0});var fe=I(n);s=k(fe,"FORM",{class:!0});var ne=I(s);a=k(ne,"DIV",{class:!0});var Ee=I(a);i=k(Ee,"DIV",{class:!0});var be=I(i);f=k(be,"DIV",{class:!0});var Fe=I(f);_=k(Fe,"DIV",{class:!0});var Se=I(_);v=k(Se,"INPUT",{class:!0,type:!0,placeholder:!0}),Se.forEach(c),Fe.forEach(c),p=K(be),y=k(be,"DIV",{class:!0});var Te=I(y);W($.$$.fragment,Te),Te.forEach(c),be.forEach(c),Ee.forEach(c),z=K(ne),S=k(ne,"DIV",{class:!0});var Ie=I(S);V=k(Ie,"DIV",{class:!0});var Ce=I(V);T.l(Ce),Ce.forEach(c),C=K(Ie),X=k(Ie,"DIV",{class:!0});var ze=I(X);W(d.$$.fragment,ze),ze.forEach(c),Ie.forEach(c),ne.forEach(c),fe.forEach(c),this.h()},h(){u(t,"class","self-center dark:text-white"),u(t,"type","button"),u(e,"class","absolute top-0 right-0 p-5"),u(v,"class","w-full text-3xl font-semibold bg-transparent outline-none svelte-1vx7r9s"),u(v,"type","text"),u(v,"placeholder",h=o[4].t("Title")),v.required=!0,u(_,"class","w-full"),u(f,"class","flex-shrink-0 w-full flex justify-between items-center"),u(y,"class","flex-1 w-full h-full"),u(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),u(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),u(V,"class",""),u(X,"class","flex-shrink-0"),u(S,"class","flex flex-row items-center justify-end text-sm font-medium flex-shrink-0 mt-1 p-4 gap-1.5"),u(s,"class","flex flex-col w-full h-full"),u(n,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(P,G){N(P,e,G),w(e,t),L(l,t,null),N(P,r,G),N(P,n,G),w(n,s),w(s,a),w(a,i),w(i,f),w(f,_),w(_,v),$e(v,o[1]),w(i,p),w(i,y),L($,y,null),w(s,z),w(s,S),w(S,V),ee[x].m(V,null),w(S,C),w(S,X),L(d,X,null),g=!0,B||(R=[te(t,"click",o[7]),te(v,"input",o[8]),te(s,"submit",kt(o[14]))],B=!0)},p(P,G){(!g||G&16&&h!==(h=P[4].t("Title")))&&u(v,"placeholder",h),G&2&&v.value!==P[1]&&$e(v,P[1]);const ie={};G&16&&(ie.placeholder=P[4].t("Write something...")),!E&&G&4&&(E=!0,ie.value=P[2],he(()=>E=!1)),$.$set(ie);let fe=x;x=we(P),x===fe?ee[x].p(P,G):(ue(),F(ee[fe],1,1,()=>{ee[fe]=null}),de(),T=ee[x],T?T.p(P,G):(T=ee[x]=re[x](P),T.c()),D(T,1),T.m(V,null));const ne={};G&16&&(ne.content=P[4].t("Save")),G&65552&&(ne.$$scope={dirty:G,ctx:P}),d.$set(ne)},i(P){g||(D(l.$$.fragment,P),D($.$$.fragment,P),D(T),D(d.$$.fragment,P),g=!0)},o(P){F(l.$$.fragment,P),F($.$$.fragment,P),F(T),F(d.$$.fragment,P),g=!1},d(P){P&&(c(e),c(r),c(n)),j(l),j($),ee[x].d(),j(d),B=!1,Ve(R)}}}function Sl(o){let e,t,l;function r(s){o[15](s)}let n={size:"full",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Fl]},$$scope:{ctx:o}};return o[0]!==void 0&&(n.show=o[0]),e=new Zt({props:n}),me.push(()=>_e(e,"show",r)),{c(){A(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,i.show=s[0],he(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){j(e,s)}}}function Tl(o,e,t){let l;const r=Ae("i18n");xe(o,r,V=>t(4,l=V));const n=Ue();let{show:s=!1}=e,a="Untitled",i="",f=!1;const _=()=>{t(0,s=!1)};function v(){a=this.value,t(1,a)}function h(V){i=V,t(2,i)}function p(V){f=V,t(3,f)}const y=()=>{t(3,f=!1)},$=V=>{const{text:x,filename:T}=V.detail;t(2,i=`${i}${x} `),t(3,f=!1)},E=async()=>{try{let V=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(x){return q.error(l.t("Permission denied when accessing microphone: {{error}}",{error:x})),null});V&&(t(3,f=!0),V.getTracks().forEach(T=>T.stop())),V=null}catch{q.error(l.t("Permission denied when accessing microphone"))}},z=()=>{if(a.trim()===""||i.trim()===""){q.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}n("submit",{name:a,content:i}),t(0,s=!1),t(1,a=""),t(2,i="")};function S(V){s=V,t(0,s)}return o.$$set=V=>{"show"in V&&t(0,s=V.show)},[s,a,i,f,l,r,n,_,v,h,p,y,$,E,z,S]}class Cl extends ke{constructor(e){super(),ye(this,e,Tl,Sl,ge,{show:0})}}function Xe(o){let e,t,l,r,n,s,a;return n=new Dt({props:{$$slots:{default:[zl]},$$scope:{ctx:o}}}),{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),A(n.$$.fragment),this.h()},l(i){e=k(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=I(e);t=k(f,"DIV",{class:!0});var _=I(t);l=k(_,"DIV",{class:!0});var v=I(l);r=k(v,"DIV",{class:!0});var h=I(r);W(n.$$.fragment,h),h.forEach(c),v.forEach(c),_.forEach(c),f.forEach(c),this.h()},h(){u(r,"class","max-w-md"),u(l,"class","m-auto pt-64 flex flex-col justify-center"),u(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),u(e,"class",s="fixed "+(o[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),u(e,"id","dropzone"),u(e,"role","region"),u(e,"aria-label","Drag and Drop Container")},m(i,f){N(i,e,f),w(e,t),w(t,l),w(l,r),L(n,r,null),a=!0},p(i,f){const _={};f[2]&2&&(_.$$scope={dirty:f,ctx:i}),n.$set(_),(!a||f[0]&32768&&s!==(s="fixed "+(i[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&u(e,"class",s)},i(i){a||(D(n.$$.fragment,i),a=!0)},o(i){F(n.$$.fragment,i),a=!1},d(i){i&&c(e),j(n)}}}function zl(o){let e,t="Drop any files here to add to my documents";return{c(){e=b("div"),e.textContent=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){u(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){N(l,e,r)},p:le,d(l){l&&c(e)}}}function Nl(o){let e,t;return e=new qt({}),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p:le,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ml(o){let e,t,l;return t=new xt({props:{direction:"horizontal",$$slots:{default:[ql]},$$scope:{ctx:o}}}),{c(){e=b("div"),A(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=I(e);W(t.$$.fragment,n),n.forEach(c),this.h()},h(){u(e,"class","flex flex-row flex-1 h-full max-h-full pb-2.5")},m(r,n){N(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n[0]&23423|n[2]&2&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&c(e),j(t)}}}function Bl(o){let e,t=o[14].t("No content found")+"",l;return{c(){e=b("div"),l=se(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=I(e);l=oe(n,t),n.forEach(c),this.h()},h(){u(e,"class","m-auto text-gray-500 text-xs")},m(r,n){N(r,e,n),w(e,l)},p(r,n){n[0]&16384&&t!==(t=r[14].t("No content found")+"")&&ae(l,t)},i:le,o:le,d(r){r&&c(e)}}}function Pl(o){let e,t,l;return t=new ol({props:{files:o[11],selectedFileId:o[2]}}),t.$on("click",o[35]),t.$on("delete",o[36]),{c(){e=b("div"),A(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=I(e);W(t.$$.fragment,n),n.forEach(c),this.h()},h(){u(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,n){N(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n[0]&2048&&(s.files=r[11]),n[0]&4&&(s.selectedFileId=r[2]),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&c(e),j(t)}}}function Ul(o){let e,t,l,r,n,s,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',i,f,_,v,h,p,y,$,E,z,S,V,x;p=new Il({}),p.$on("upload",o[33]),p.$on("sync",o[34]);const T=[Pl,Bl],C=[];function X(d,g){return d[11].length>0?0:1}return $=X(o),E=C[$]=T[$](o),{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("div"),s=b("div"),s.innerHTML=a,i=H(),f=b("input"),v=H(),h=b("div"),A(p.$$.fragment),y=H(),E.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var g=I(e);t=k(g,"DIV",{class:!0});var B=I(t);l=k(B,"DIV",{class:!0});var R=I(l);r=k(R,"DIV",{class:!0});var J=I(r);n=k(J,"DIV",{class:!0});var Z=I(n);s=k(Z,"DIV",{class:!0,"data-svelte-h":!0}),We(s)!=="svelte-1p16zsx"&&(s.innerHTML=a),i=K(Z),f=k(Z,"INPUT",{class:!0,placeholder:!0}),v=K(Z),h=k(Z,"DIV",{});var re=I(h);W(p.$$.fragment,re),re.forEach(c),Z.forEach(c),J.forEach(c),y=K(R),E.l(R),R.forEach(c),B.forEach(c),g.forEach(c),this.h()},h(){u(s,"class","self-center ml-1 mr-3"),u(f,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),u(f,"placeholder",_=o[14].t("Search Collection")),u(n,"class","flex py-1"),u(r,"class","px-3"),u(l,"class","w-full h-full flex flex-col"),u(t,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),u(e,"class",z=(o[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850")},m(d,g){N(d,e,g),w(e,t),w(t,l),w(l,r),w(r,n),w(n,s),w(n,i),w(n,f),$e(f,o[1]),w(n,v),w(n,h),L(p,h,null),w(l,y),C[$].m(l,null),S=!0,V||(x=[te(f,"input",o[31]),te(f,"focus",o[32])],V=!0)},p(d,g){(!S||g[0]&16384&&_!==(_=d[14].t("Search Collection")))&&u(f,"placeholder",_),g[0]&2&&f.value!==d[1]&&$e(f,d[1]);let B=$;$=X(d),$===B?C[$].p(d,g):(ue(),F(C[B],1,1,()=>{C[B]=null}),de(),E=C[$],E?E.p(d,g):(E=C[$]=T[$](d),E.c()),D(E,1),E.m(l,null)),(!S||g[0]&8&&z!==(z=(d[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&u(e,"class",z)},i(d){S||(D(p.$$.fragment,d),D(E),S=!0)},o(d){F(p.$$.fragment,d),F(E),S=!1},d(d){d&&c(e),j(p),C[$].d(),V=!1,Ve(x)}}}function Al(o){let e,t;return e=new Vt({props:{className:"h-full",show:o[2]!==null,$$slots:{default:[Ll]},$$scope:{ctx:o}}}),e.$on("close",o[50]),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r[0]&4&&(n.show=l[2]!==null),r[0]&20484|r[2]&2&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Wl(o){let e,t,l,r;return e=new Ft({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[jl]},$$scope:{ctx:o}}}),l=new Qe({props:{$$slots:{default:[Kl]},$$scope:{ctx:o}}}),{c(){A(e.$$.fragment),t=H(),A(l.$$.fragment)},l(n){W(e.$$.fragment,n),t=K(n),W(l.$$.fragment,n)},m(n,s){L(e,n,s),N(n,t,s),L(l,n,s),r=!0},p(n,s){const a={};s[2]&2&&(a.$$scope={dirty:s,ctx:n}),e.$set(a);const i={};s[0]&20529|s[2]&2&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){r||(D(e.$$.fragment,n),D(l.$$.fragment,n),r=!0)},o(n){F(e.$$.fragment,n),F(l.$$.fragment,n),r=!1},d(n){n&&c(t),j(e,n),j(l,n)}}}function Ye(o){let e,t,l;function r(s){o[49](s)}let n={className:"input-prose-sm",placeholder:o[14].t("Add content here")};return o[12].data.content!==void 0&&(n.value=o[12].data.content),e=new Le({props:n}),me.push(()=>_e(e,"value",r)),{c(){A(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,a){const i={};a[0]&16384&&(i.placeholder=s[14].t("Add content here")),!t&&a[0]&4096&&(t=!0,i.value=s[12].data.content,he(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){j(e,s)}}}function Ll(o){var X,d;let e,t,l,r,n,s,a,i,f=((d=(X=o[12])==null?void 0:X.meta)==null?void 0:d.name)+"",_,v,h,p,y=o[14].t("Save")+"",$,E,z,S=o[12].id,V,x,T;s=new Ze({props:{strokeWidth:"2.5"}});let C=Ye(o);return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("button"),A(s.$$.fragment),a=H(),i=b("div"),_=se(f),v=H(),h=b("div"),p=b("button"),$=se(y),E=H(),z=b("div"),C.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var B=I(e);t=k(B,"DIV",{class:!0});var R=I(t);l=k(R,"DIV",{class:!0});var J=I(l);r=k(J,"DIV",{class:!0});var Z=I(r);n=k(Z,"BUTTON",{class:!0});var re=I(n);W(s.$$.fragment,re),re.forEach(c),Z.forEach(c),a=K(J),i=k(J,"DIV",{class:!0});var ee=I(i);_=oe(ee,f),ee.forEach(c),v=K(J),h=k(J,"DIV",{});var we=I(h);p=k(we,"BUTTON",{class:!0});var P=I(p);$=oe(P,y),P.forEach(c),we.forEach(c),J.forEach(c),E=K(R),z=k(R,"DIV",{class:!0});var G=I(z);C.l(G),G.forEach(c),R.forEach(c),B.forEach(c),this.h()},h(){u(n,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),u(r,"class","mr-2"),u(i,"class","flex-1 text-xl line-clamp-1"),u(p,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),u(l,"class","flex-shrink-0 mt-1 mb-2 flex items-center"),u(z,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),u(t,"class","flex flex-col w-full h-full max-h-full"),u(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,B){N(g,e,B),w(e,t),w(t,l),w(l,r),w(r,n),L(s,n,null),w(l,a),w(l,i),w(i,_),w(l,v),w(l,h),w(h,p),w(p,$),w(t,E),w(t,z),C.m(z,null),V=!0,x||(T=[te(n,"click",o[47]),te(p,"click",o[48])],x=!0)},p(g,B){var R,J;(!V||B[0]&4096)&&f!==(f=((J=(R=g[12])==null?void 0:R.meta)==null?void 0:J.name)+"")&&ae(_,f),(!V||B[0]&16384)&&y!==(y=g[14].t("Save")+"")&&ae($,y),B[0]&4096&&ge(S,S=g[12].id)?(ue(),F(C,1,1,le),de(),C=Ye(g),C.c(),D(C,1),C.m(z,null)):C.p(g,B)},i(g){V||(D(s.$$.fragment,g),D(C),V=!0)},o(g){F(s.$$.fragment,g),F(C),V=!1},d(g){g&&c(e),j(s),C.d(g),x=!1,Ve(T)}}}function jl(o){let e,t,l;return t=new St({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=b("div"),A(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=I(e);W(t.$$.fragment,n),n.forEach(c),this.h()},h(){u(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(r,n){N(r,e,n),L(t,e,null),l=!0},p:le,i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&c(e),j(t)}}}function Ol(o){let e,t,l,r,n,s,a,i,f,_,v,h,p=o[14].t("Select a file to view or drag and drop a file to upload")+"",y,$,E;return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("div"),s=b("div"),a=b("input"),i=H(),f=b("div"),_=b("input"),v=H(),h=b("div"),y=se(p),this.h()},l(z){e=k(z,"DIV",{class:!0});var S=I(e);t=k(S,"DIV",{});var V=I(t);l=k(V,"DIV",{class:!0});var x=I(l);r=k(x,"DIV",{class:!0});var T=I(r);n=k(T,"DIV",{class:!0});var C=I(n);s=k(C,"DIV",{class:!0});var X=I(s);a=k(X,"INPUT",{type:!0,class:!0}),X.forEach(c),C.forEach(c),i=K(T),f=k(T,"DIV",{class:!0});var d=I(f);_=k(d,"INPUT",{type:!0,class:!0}),d.forEach(c),T.forEach(c),x.forEach(c),V.forEach(c),v=K(S),h=k(S,"DIV",{class:!0});var g=I(h);y=oe(g,p),g.forEach(c),S.forEach(c),this.h()},h(){u(a,"type","text"),u(a,"class","text-center w-full font-medium text-3xl font-primary bg-transparent outline-none"),u(s,"class","w-full"),u(n,"class","flex items-center justify-between w-full px-0.5 mb-1"),u(_,"type","text"),u(_,"class","text-center w-full text-gray-500 bg-transparent outline-none"),u(f,"class","flex w-full px-1"),u(r,"class","flex-1"),u(l,"class","flex w-full mt-1 mb-3.5"),u(h,"class","mt-2 text-center text-sm text-gray-200 dark:text-gray-700 w-full"),u(e,"class","m-auto pb-32")},m(z,S){N(z,e,S),w(e,t),w(t,l),w(l,r),w(r,n),w(n,s),w(s,a),$e(a,o[0].name),w(r,i),w(r,f),w(f,_),$e(_,o[0].description),w(e,v),w(e,h),w(h,y),$||(E=[te(a,"input",o[43]),te(a,"input",o[44]),te(_,"input",o[45]),te(_,"input",o[46])],$=!0)},p(z,S){S[0]&1&&a.value!==z[0].name&&$e(a,z[0].name),S[0]&1&&_.value!==z[0].description&&$e(_,z[0].description),S[0]&16384&&p!==(p=z[14].t("Select a file to view or drag and drop a file to upload")+"")&&ae(y,p)},i:le,o:le,d(z){z&&c(e),$=!1,Ve(E)}}}function Hl(o){var C,X;let e,t,l,r,n,s=((X=(C=o[12])==null?void 0:C.meta)==null?void 0:X.name)+"",a,i,f,_,v,h=o[14].t("Save")+"",p,y,$,E=o[12].id,z,S,V,x=!o[5]&&Ge(o),T=Je(o);return{c(){e=b("div"),t=b("div"),x&&x.c(),l=H(),r=b("div"),n=b("a"),a=se(s),f=H(),_=b("div"),v=b("button"),p=se(h),y=H(),$=b("div"),T.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var g=I(e);t=k(g,"DIV",{class:!0});var B=I(t);x&&x.l(B),l=K(B),r=k(B,"DIV",{class:!0});var R=I(r);n=k(R,"A",{class:!0,href:!0,target:!0});var J=I(n);a=oe(J,s),J.forEach(c),R.forEach(c),f=K(B),_=k(B,"DIV",{});var Z=I(_);v=k(Z,"BUTTON",{class:!0});var re=I(v);p=oe(re,h),re.forEach(c),Z.forEach(c),B.forEach(c),y=K(g),$=k(g,"DIV",{class:!0});var ee=I($);T.l(ee),ee.forEach(c),g.forEach(c),this.h()},h(){u(n,"class","hover:text-gray-500 hover:dark:text-gray-100 hover:underline flex-grow line-clamp-1"),u(n,"href",i=o[12].id?`/api/v1/files/${o[12].id}/content`:"#"),u(n,"target","_blank"),u(r,"class","flex-1 text-2xl font-medium"),u(v,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),u(t,"class","flex-shrink-0 mb-2 flex items-center"),u($,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-none overflow-y-auto scrollbar-hidden"),u(e,"class","flex flex-col w-full h-full max-h-full ml-2.5")},m(d,g){N(d,e,g),w(e,t),x&&x.m(t,null),w(t,l),w(t,r),w(r,n),w(n,a),w(t,f),w(t,_),w(_,v),w(v,p),w(e,y),w(e,$),T.m($,null),z=!0,S||(V=te(v,"click",o[41]),S=!0)},p(d,g){var B,R;d[5]?x&&(ue(),F(x,1,1,()=>{x=null}),de()):x?(x.p(d,g),g[0]&32&&D(x,1)):(x=Ge(d),x.c(),D(x,1),x.m(t,l)),(!z||g[0]&4096)&&s!==(s=((R=(B=d[12])==null?void 0:B.meta)==null?void 0:R.name)+"")&&ae(a,s),(!z||g[0]&4096&&i!==(i=d[12].id?`/api/v1/files/${d[12].id}/content`:"#"))&&u(n,"href",i),(!z||g[0]&16384)&&h!==(h=d[14].t("Save")+"")&&ae(p,h),g[0]&4096&&ge(E,E=d[12].id)?(ue(),F(T,1,1,le),de(),T=Je(d),T.c(),D(T,1),T.m($,null)):T.p(d,g)},i(d){z||(D(x),D(T),z=!0)},o(d){F(x),F(T),z=!1},d(d){d&&c(e),x&&x.d(),T.d(d),S=!1,V()}}}function Ge(o){let e,t,l,r,n,s;return l=new Ze({props:{strokeWidth:"2.5"}}),{c(){e=b("div"),t=b("button"),A(l.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=I(e);t=k(i,"BUTTON",{class:!0});var f=I(t);W(l.$$.fragment,f),f.forEach(c),i.forEach(c),this.h()},h(){u(t,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),u(e,"class","-translate-x-2")},m(a,i){N(a,e,i),w(e,t),L(l,t,null),r=!0,n||(s=te(t,"click",o[40]),n=!0)},p:le,i(a){r||(D(l.$$.fragment,a),r=!0)},o(a){F(l.$$.fragment,a),r=!1},d(a){a&&c(e),j(l),n=!1,s()}}}function Je(o){let e,t,l;function r(s){o[42](s)}let n={className:"input-prose-sm",placeholder:o[14].t("Add content here")};return o[12].data.content!==void 0&&(n.value=o[12].data.content),e=new Le({props:n}),me.push(()=>_e(e,"value",r)),{c(){A(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,a){const i={};a[0]&16384&&(i.placeholder=s[14].t("Add content here")),!t&&a[0]&4096&&(t=!0,i.value=s[12].data.content,he(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){j(e,s)}}}function Kl(o){let e,t,l,r;const n=[Hl,Ol],s=[];function a(i,f){return i[12]?0:1}return t=a(o),l=s[t]=n[t](o),{c(){e=b("div"),l.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var f=I(e);l.l(f),f.forEach(c),this.h()},h(){u(e,"class","flex-1 flex justify-start h-full max-h-full")},m(i,f){N(i,e,f),s[t].m(e,null),r=!0},p(i,f){let _=t;t=a(i),t===_?s[t].p(i,f):(ue(),F(s[_],1,1,()=>{s[_]=null}),de(),l=s[t],l?l.p(i,f):(l=s[t]=n[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){F(l),r=!1},d(i){i&&c(e),s[t].d()}}}function ql(o){let e,t,l,r,n,s,a;function i(p){o[39](p)}let f={defaultSize:o[6],collapsible:!0,maxSize:50,minSize:o[6],class:"h-full",onExpand:o[37],onCollapse:o[38],$$slots:{default:[Ul]},$$scope:{ctx:o}};o[4]!==void 0&&(f.pane=o[4]),e=new Qe({props:f}),me.push(()=>_e(e,"pane",i));const _=[Wl,Al],v=[];function h(p,y){return p[3]?0:!p[3]&&p[2]!==null?1:-1}return~(r=h(o))&&(n=v[r]=_[r](o)),{c(){A(e.$$.fragment),l=H(),n&&n.c(),s=Oe()},l(p){W(e.$$.fragment,p),l=K(p),n&&n.l(p),s=Oe()},m(p,y){L(e,p,y),N(p,l,y),~r&&v[r].m(p,y),N(p,s,y),a=!0},p(p,y){const $={};y[0]&64&&($.defaultSize=p[6]),y[0]&64&&($.minSize=p[6]),y[0]&32&&($.onExpand=p[37]),y[0]&32&&($.onCollapse=p[38]),y[0]&19214|y[2]&2&&($.$$scope={dirty:y,ctx:p}),!t&&y[0]&16&&(t=!0,$.pane=p[4],he(()=>t=!1)),e.$set($);let E=r;r=h(p),r===E?~r&&v[r].p(p,y):(n&&(ue(),F(v[E],1,1,()=>{v[E]=null}),de()),~r?(n=v[r],n?n.p(p,y):(n=v[r]=_[r](p),n.c()),D(n,1),n.m(s.parentNode,s)):n=null)},i(p){a||(D(e.$$.fragment,p),D(n),a=!0)},o(p){F(e.$$.fragment,p),F(n),a=!1},d(p){p&&(c(l),c(s)),j(e,p),~r&&v[r].d(p)}}}function Rl(o){let e,t,l,r,n,s,a,i,f,_,v,h,p,y,$,E=o[13]&&Xe(o);function z(d){o[25](d)}let S={message:o[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};o[9]!==void 0&&(S.show=o[9]),t=new rl({props:S}),me.push(()=>_e(t,"show",z)),t.$on("confirm",o[26]);function V(d){o[27](d)}let x={};o[8]!==void 0&&(x.show=o[8]),n=new Cl({props:x}),me.push(()=>_e(n,"show",V)),n.$on("submit",o[28]);const T=[Ml,Nl],C=[];function X(d,g){return d[7]&&d[0]?0:1}return v=X(o),h=C[v]=T[v](o),{c(){E&&E.c(),e=H(),A(t.$$.fragment),r=H(),A(n.$$.fragment),a=H(),i=b("input"),f=H(),_=b("div"),h.c(),this.h()},l(d){E&&E.l(d),e=K(d),W(t.$$.fragment,d),r=K(d),W(n.$$.fragment,d),a=K(d),i=k(d,"INPUT",{id:!0,type:!0}),f=K(d),_=k(d,"DIV",{class:!0,id:!0});var g=I(_);h.l(g),g.forEach(c),this.h()},h(){u(i,"id","files-input"),u(i,"type","file"),i.multiple=!0,i.hidden=!0,u(_,"class","flex flex-col w-full h-full max-h-[100dvh]"),u(_,"id","collection-container")},m(d,g){E&&E.m(d,g),N(d,e,g),L(t,d,g),N(d,r,g),L(n,d,g),N(d,a,g),N(d,i,g),N(d,f,g),N(d,_,g),C[v].m(_,null),p=!0,y||($=[te(i,"change",o[29]),te(i,"change",o[30])],y=!0)},p(d,g){d[13]?E?(E.p(d,g),g[0]&8192&&D(E,1)):(E=Xe(d),E.c(),D(E,1),E.m(e.parentNode,e)):E&&(ue(),F(E,1,1,()=>{E=null}),de());const B={};g[0]&16384&&(B.message=d[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&512&&(l=!0,B.show=d[9],he(()=>l=!1)),t.$set(B);const R={};!s&&g[0]&256&&(s=!0,R.show=d[8],he(()=>s=!1)),n.$set(R);let J=v;v=X(d),v===J?C[v].p(d,g):(ue(),F(C[J],1,1,()=>{C[J]=null}),de(),h=C[v],h?h.p(d,g):(h=C[v]=T[v](d),h.c()),D(h,1),h.m(_,null))},i(d){p||(D(E),D(t.$$.fragment,d),D(n.$$.fragment,d),D(h),p=!0)},o(d){F(E),F(t.$$.fragment,d),F(n.$$.fragment,d),F(h),p=!1},d(d){d&&(c(e),c(r),c(a),c(i),c(f),c(_)),E&&E.d(d),j(t,d),j(n,d),C[v].d(),y=!1,Ve($)}}}function Xl(o,e,t){let l,r,n;xe(o,Ct,m=>t(53,l=m)),xe(o,zt,m=>t(15,n=m));const s=Ae("i18n");xe(o,s,m=>t(14,r=m));let a=!0,i,f=!0,_=0,v=null,h=null,p="",y=!1,$=!1,E=null,z=[],S=null,V=null,x=null,T=null,C,X=!1;const d=(m,U)=>{const O=new Blob([U],{type:"text/plain"}),M=He(O,`${m}.txt`);return console.log(M),M},g=async m=>{console.log(m);const U=Kt(),O={type:"file",file:"",id:null,url:"",name:m.name,size:m.size,status:"uploading",error:"",itemId:U};if(O.size==0)return q.error(r.t("You cannot upload an empty file.")),null;if(t(0,h.files=[...h.files??[],O],h),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(m.type)){const M=await Ht(localStorage.token,m).catch(Y=>(q.error(Y),null));if(M){console.log(M);const Y=new Blob([M.text],{type:"text/plain"});m=He(Y,`${m.name}.txt`)}}try{const M=await Mt(localStorage.token,m).catch(Y=>(q.error(Y),null));M?(console.log(M),t(0,h.files=h.files.map(Y=>(Y.itemId===U&&(Y.id=M.id),delete Y.itemId,Y)),h),await we(M.id)):q.error(r.t("Failed to upload file."))}catch(M){q.error(M)}},B=async()=>{const m="showDirectoryPicker"in window;try{m?await J():await Z()}catch(U){re(U)}},R=m=>m.split("/").some(U=>U.startsWith(".")),J=async()=>{const m=await window.showDirectoryPicker();let U=0,O=0;const M=()=>{const pe=O/U*100;q.info(`Upload Progress: ${O}/${U} (${pe.toFixed(2)}%)`)};async function Y(pe){for await(const Q of pe.values())Q.name.startsWith(".")||(Q.kind==="file"?U++:Q.kind==="directory"&&(Q.name.startsWith(".")||await Y(Q)))}async function ve(pe,Q=""){for await(const ce of pe.values()){if(ce.name.startsWith("."))continue;const De=Q?`${Q}/${ce.name}`:ce.name;if(!R(De))if(ce.kind==="file"){const je=await ce.getFile(),wt=new File([je],De,{type:je.type});await g(wt),O++,M()}else ce.kind==="directory"&&(ce.name.startsWith(".")||await ve(ce,De))}}await Y(m),M(),U>0?await ve(m):console.log("No files to upload.")},Z=async()=>new Promise((m,U)=>{const O=document.createElement("input");O.type="file",O.webkitdirectory=!0,O.directory=!0,O.multiple=!0,O.style.display="none",document.body.appendChild(O),O.onchange=async()=>{try{const M=Array.from(O.files).filter(Q=>!R(Q.webkitRelativePath));let Y=M.length,ve=0;const pe=()=>{const Q=ve/Y*100;q.info(`Upload Progress: ${ve}/${Y} (${Q.toFixed(2)}%)`)};pe();for(const Q of M)if(!Q.name.startsWith(".")){const ce=Q.webkitRelativePath||Q.name,De=new File([Q],ce,{type:Q.type});await g(De),ve++,pe()}document.body.removeChild(O),m()}catch(M){U(M)}},O.onerror=M=>{document.body.removeChild(O),U(M)},O.click()}),re=m=>{m.name==="AbortError"?q.info("Directory selection was cancelled"):(q.error("Error accessing directory"),console.error("Directory access error:",m))},ee=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const m=await Ut(localStorage.token,v).catch(U=>{q.error(U)});m&&(t(0,h=m),q.success(r.t("Knowledge reset successfully.")),B())}else B()},we=async m=>{const U=await At(localStorage.token,v,m).catch(O=>(q.error(O),null));U?(t(0,h=U),q.success(r.t("File added successfully."))):(q.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(O=>O.id!==m),h))},P=async m=>{const U=await Wt(localStorage.token,v,m).catch(O=>{q.error(O)});U&&(t(0,h=U),q.success(r.t("File removed successfully.")))},G=async()=>{const m=S.id,U=S.data.content,O=Bt(localStorage.token,m,U).catch(Y=>{q.error(Y)}),M=await Lt(localStorage.token,v,m).catch(Y=>{q.error(Y)});O&&M&&(t(0,h=M),q.success(r.t("File content updated successfully.")))},ie=()=>{console.log("debounce"),T&&clearTimeout(T),T=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){q.error(r.t("Please fill in all fields."));return}await jt(localStorage.token,v,{name:h.name,description:h.description}).catch(U=>{q.error(U)})&&(q.success(r.t("Knowledge updated successfully")),Nt.set(await Ot(localStorage.token)))},1e3)},fe=async m=>{m.matches?t(3,a=!0):t(3,a=!1)},ne=m=>{m.preventDefault(),t(13,X=!0)},Ee=()=>{t(13,X=!1)},be=async m=>{var U,O;if(m.preventDefault(),t(13,X=!1),(U=m.dataTransfer)!=null&&U.files){const M=(O=m.dataTransfer)==null?void 0:O.files;if(M&&M.length>0)for(const Y of M)await g(Y);else q.error(r.t("File not found."))}};yt(async()=>{C=window.matchMedia("(min-width: 1024px)"),C.addEventListener("change",fe),fe(C);const m=document.getElementById("collection-container");t(6,_=a?Math.floor(300/m.clientWidth*100):100),new ResizeObserver(Y=>{for(let ve of Y){const Q=300/ve.contentRect.width*100;t(6,_=a?Math.floor(Q):100),f&&i&&i.isExpanded()&&i.getSize()<_&&i.resize(_)}}).observe(m),i&&i.expand(),t(7,v=l.params.id);const O=await Pt(localStorage.token,v).catch(Y=>(q.error(Y),null));O?t(0,h=O):Tt("/workspace/knowledge");const M=document.querySelector("body");M==null||M.addEventListener("dragover",ne),M==null||M.addEventListener("drop",be),M==null||M.addEventListener("dragleave",Ee)}),It(()=>{C==null||C.removeEventListener("change",fe);const m=document.querySelector("body");m==null||m.removeEventListener("dragover",ne),m==null||m.removeEventListener("drop",be),m==null||m.removeEventListener("dragleave",Ee)});function Fe(m){$=m,t(9,$)}const Se=()=>{ee()};function Te(m){y=m,t(8,y)}const Ie=m=>{const U=d(m.detail.name,m.detail.content);g(U)};function Ce(){E=this.files,t(10,E)}const ze=async()=>{if(E&&E.length>0){for(const U of E)await g(U);t(10,E=null);const m=document.getElementById("files-input");m&&(m.value="")}else q.error(r.t("File not found."))};function et(){p=this.value,t(1,p)}const tt=()=>{t(2,V=null)},lt=m=>{m.detail.type==="directory"?B():m.detail.type==="text"?t(8,y=!0):document.getElementById("files-input").click()},rt=m=>{t(9,$=!0)},nt=m=>{t(2,V=V===m.detail?null:m.detail)},st=m=>{console.log(m.detail),t(2,V=null),P(m.detail)},ot=()=>{t(5,f=!0)},at=()=>{t(5,f=!1)};function it(m){i=m,t(4,i)}const ft=()=>{i.expand()},ct=()=>{G()};function ut(m){o.$$.not_equal(S.data.content,m)&&(S.data.content=m,t(12,S),t(2,V),t(0,h))}function dt(){h.name=this.value,t(0,h)}const pt=()=>{ie()};function mt(){h.description=this.value,t(0,h)}const ht=()=>{ie()},_t=()=>{t(2,V=null)},gt=()=>{G()};function vt(m){o.$$.not_equal(S.data.content,m)&&(S.data.content=m,t(12,S),t(2,V),t(0,h))}const $t=()=>{t(2,V=null)};return o.$$.update=()=>{if(o.$$.dirty[0]&1&&h&&t(24,x=new Et(h.files,{keys:["meta.name","meta.description"]})),o.$$.dirty[0]&16777219&&x&&t(11,z=p?x.search(p).map(m=>m.item):(h==null?void 0:h.files)??[]),o.$$.dirty[0]&5)if(V){const m=((h==null?void 0:h.files)??[]).find(U=>U.id===V);m?(m.data=m.data??{content:""},t(12,S=m)):t(12,S=null)}else t(12,S=null)},[h,p,V,a,i,f,_,v,y,$,E,z,S,X,r,n,s,d,g,B,ee,P,G,ie,x,Fe,Se,Te,Ie,Ce,ze,et,tt,lt,rt,nt,st,ot,at,it,ft,ct,ut,dt,pt,mt,ht,_t,gt,vt,$t]}class Yl extends ke{constructor(e){super(),ye(this,e,Xl,Rl,ge,{},null,[-1,-1,-1])}}function Gl(o){let e,t;return e=new Yl({}),{c(){A(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p:le,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}class Dr extends ke{constructor(e){super(),ye(this,e,null,Gl,ge,{})}}export{Dr as component};
//# sourceMappingURL=19.oIe0VB1l.js.map
