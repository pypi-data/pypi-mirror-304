{"version":3,"file":"26.BUsC_O0s.js","sources":["../../../../../../src/routes/(app)/workspace/prompts/edit/+page.svelte"],"sourcesContent":["<script>\n\timport { toast } from 'svelte-sonner';\n\n\timport { goto } from '$app/navigation';\n\timport { prompts } from '$lib/stores';\n\timport { onMount, tick, getContext } from 'svelte';\n\n\tconst i18n = getContext('i18n');\n\n\timport { getPrompts, updatePromptByCommand } from '$lib/apis/prompts';\n\timport { page } from '$app/stores';\n\timport Textarea from '$lib/components/common/Textarea.svelte';\n\n\tlet loading = false;\n\n\t// ///////////\n\t// Prompt\n\t// ///////////\n\n\tlet title = '';\n\tlet command = '';\n\tlet content = '';\n\n\tconst updateHandler = async () => {\n\t\tloading = true;\n\n\t\tif (validateCommandString(command)) {\n\t\t\tconst prompt = await updatePromptByCommand(localStorage.token, command, title, content).catch(\n\t\t\t\t(error) => {\n\t\t\t\t\ttoast.error(error);\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\tif (prompt) {\n\t\t\t\tawait prompts.set(await getPrompts(localStorage.token));\n\t\t\t\tawait goto('/workspace/prompts');\n\t\t\t}\n\t\t} else {\n\t\t\ttoast.error(\n\t\t\t\t$i18n.t('Only alphanumeric characters and hyphens are allowed in the command string.')\n\t\t\t);\n\t\t}\n\n\t\tloading = false;\n\t};\n\n\tconst validateCommandString = (inputString) => {\n\t\t// Regular expression to match only alphanumeric characters and hyphen\n\t\tconst regex = /^[a-zA-Z0-9-]+$/;\n\n\t\t// Test the input string against the regular expression\n\t\treturn regex.test(inputString);\n\t};\n\n\tonMount(async () => {\n\t\tcommand = $page.url.searchParams.get('command');\n\t\tif (command) {\n\t\t\tconst prompt = $prompts.filter((prompt) => prompt.command === command).at(0);\n\n\t\t\tif (prompt) {\n\t\t\t\tconsole.log(prompt);\n\n\t\t\t\tconsole.log(prompt.command);\n\n\t\t\t\ttitle = prompt.title;\n\t\t\t\tawait tick();\n\t\t\t\tcommand = prompt.command.slice(1);\n\t\t\t\tcontent = prompt.content;\n\t\t\t} else {\n\t\t\t\tgoto('/workspace/prompts');\n\t\t\t}\n\t\t} else {\n\t\t\tgoto('/workspace/prompts');\n\t\t}\n\t});\n</script>\n\n<div class=\"w-full max-h-full\">\n\t<button\n\t\tclass=\"flex space-x-1\"\n\t\ton:click={() => {\n\t\t\thistory.back();\n\t\t}}\n\t>\n\t\t<div class=\" self-center\">\n\t\t\t<svg\n\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\tviewBox=\"0 0 20 20\"\n\t\t\t\tfill=\"currentColor\"\n\t\t\t\tclass=\"w-4 h-4\"\n\t\t\t>\n\t\t\t\t<path\n\t\t\t\t\tfill-rule=\"evenodd\"\n\t\t\t\t\td=\"M17 10a.75.75 0 01-.75.75H5.612l4.158 3.96a.75.75 0 11-1.04 1.08l-5.5-5.25a.75.75 0 010-1.08l5.5-5.25a.75.75 0 111.04 1.08L5.612 9.25H16.25A.75.75 0 0117 10z\"\n\t\t\t\t\tclip-rule=\"evenodd\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</div>\n\t\t<div class=\" self-center font-medium text-sm\">{$i18n.t('Back')}</div>\n\t</button>\n\n\t<form\n\t\tclass=\"flex flex-col max-w-2xl mx-auto mt-4 mb-10 pb-10\"\n\t\ton:submit|preventDefault={() => {\n\t\t\tupdateHandler();\n\t\t}}\n\t>\n\t\t<div class=\"my-2\">\n\t\t\t<div class=\" text-sm font-semibold mb-2\">{$i18n.t('Title')}*</div>\n\n\t\t\t<div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none rounded-lg\"\n\t\t\t\t\tplaceholder={$i18n.t('Add a short title for this prompt')}\n\t\t\t\t\tbind:value={title}\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"my-2\">\n\t\t\t<div class=\" text-sm font-semibold mb-2\">{$i18n.t('Command')}*</div>\n\n\t\t\t<div class=\"flex items-center mb-1\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"bg-gray-200 dark:bg-gray-600 font-semibold px-3 py-1 border border-r-0 dark:border-gray-600 rounded-l-lg\"\n\t\t\t\t>\n\t\t\t\t\t/\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"px-3 py-1.5 text-sm w-full bg-transparent border disabled:text-gray-500 dark:border-gray-600 outline-none rounded-r-lg\"\n\t\t\t\t\tplaceholder=\"short-summary\"\n\t\t\t\t\tbind:value={command}\n\t\t\t\t\tdisabled\n\t\t\t\t\trequired\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\n\t\t\t\t{$i18n.t('Only')}\n\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\"\n\t\t\t\t\t>{$i18n.t('alphanumeric characters and hyphens')}</span\n\t\t\t\t>\n\t\t\t\t{$i18n.t('are allowed - Activate this command by typing')}&nbsp;\"<span\n\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 font-medium\"\n\t\t\t\t>\n\t\t\t\t\t/{command}\n\t\t\t\t</span>\" &nbsp;\n\t\t\t\t{$i18n.t('to chat input.')}\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"my-2\">\n\t\t\t<div class=\"flex w-full justify-between\">\n\t\t\t\t<div class=\" self-center text-sm font-semibold\">{$i18n.t('Prompt Content')}*</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"mt-2\">\n\t\t\t\t<div>\n\t\t\t\t\t<Textarea\n\t\t\t\t\t\tclassName=\"px-3 py-1.5 text-sm w-full bg-transparent border dark:border-gray-600 outline-none overflow-y-hidden rounded-lg resize-none\"\n\t\t\t\t\t\tplaceholder={$i18n.t(`Write a summary in 50 words that summarizes [topic or keyword].`)}\n\t\t\t\t\t\trows={6}\n\t\t\t\t\t\tbind:value={content}\n\t\t\t\t\t\trequired\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\n\t\t\t\t\tâ“˜ {$i18n.t('Format your variables using brackets like this:')}&nbsp;<span\n\t\t\t\t\t\tclass=\" text-gray-600 dark:text-gray-300 font-medium\"\n\t\t\t\t\t\t>{'{{'}{$i18n.t('variable')}{'}}'}</span\n\t\t\t\t\t>.\n\t\t\t\t\t{$i18n.t('Make sure to enclose them with')}\n\t\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\">{'{{'}</span>\n\t\t\t\t\t{$i18n.t('and')}\n\t\t\t\t\t<span class=\" text-gray-600 dark:text-gray-300 font-medium\">{'}}'}</span>.\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"text-xs text-gray-400 dark:text-gray-500\">\n\t\t\t\t\t{$i18n.t('Utilize')}<span class=\" text-gray-600 dark:text-gray-300 font-medium\">\n\t\t\t\t\t\t{` {{CLIPBOARD}}`}</span\n\t\t\t\t\t>\n\t\t\t\t\t{$i18n.t('variable to have them replaced with clipboard content.')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"my-2 flex justify-end\">\n\t\t\t<button\n\t\t\t\tclass=\" text-sm px-3 py-2 transition rounded-xl {loading\n\t\t\t\t\t? ' cursor-not-allowed bg-gray-100 dark:bg-gray-800'\n\t\t\t\t\t: ' bg-gray-50 hover:bg-gray-100 dark:bg-gray-700 dark:hover:bg-gray-800'} flex\"\n\t\t\t\ttype=\"submit\"\n\t\t\t\tdisabled={loading}\n\t\t\t>\n\t\t\t\t<div class=\" self-center font-medium\">{$i18n.t('Save & Update')}</div>\n\n\t\t\t\t{#if loading}\n\t\t\t\t\t<div class=\"ml-1.5 self-center\">\n\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\tclass=\" w-4 h-4\"\n\t\t\t\t\t\t\tviewBox=\"0 0 24 24\"\n\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t><style>\n\t\t\t\t\t\t\t\t.spinner_ajPY {\n\t\t\t\t\t\t\t\t\ttransform-origin: center;\n\t\t\t\t\t\t\t\t\tanimation: spinner_AtaB 0.75s infinite linear;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t@keyframes spinner_AtaB {\n\t\t\t\t\t\t\t\t\t100% {\n\t\t\t\t\t\t\t\t\t\ttransform: rotate(360deg);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t</style><path\n\t\t\t\t\t\t\t\td=\"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z\"\n\t\t\t\t\t\t\t\topacity=\".25\"\n\t\t\t\t\t\t\t/><path\n\t\t\t\t\t\t\t\td=\"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z\"\n\t\t\t\t\t\t\t\tclass=\"spinner_ajPY\"\n\t\t\t\t\t\t\t/></svg\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t</button>\n\t\t</div>\n\t</form>\n</div>\n"],"names":["insert_hydration","target","div","anchor","ctx","create_if_block","attr","button1","button1_class_value","div19","append_hydration","button0","div0","div1","form","div4","div2","div3","input0","div9","div5","div7","div6","input1","div8","span0","span1","div16","div11","div10","div15","div12","div13","span2","span3","span4","div14","span5","div18","div17","set_data","t1","t1_value","t3","t3_value","t7","t7_value","t13","t13_value","t15","t15_value","t17","t17_value","t23","t23_value","t25","t25_value","dirty","textarea_changes","t30","t30_value","t33","t33_value","t36","t36_value","t40","t40_value","t45","t45_value","t48","t48_value","t50","t50_value","current","i18n","getContext","loading","title","command","content","updateHandler","$$invalidate","validateCommandString","updatePromptByCommand","error","toast","prompts","getPrompts","goto","$i18n","inputString","onMount","$page","prompt","$prompts","tick","value"],"mappings":"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"}