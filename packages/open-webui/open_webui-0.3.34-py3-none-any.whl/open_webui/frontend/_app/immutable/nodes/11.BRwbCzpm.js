import{s as ve,e as g,c as p,a as v,d as f,f as i,i as S,n as pe,K as it,p as ut,j as he,q as ft,t as K,k as U,b as Q,o as z,H as Oe,g as d,B as oe,u as R,h as $,E as xe,A as ge,l as Ze,r as ht,Z as Fe,v as _t,w as mt,x as gt,I as Ue,y as Ge,z as Ke,D as He,L as pt,J as Qe,G as Ae}from"../chunks/scheduler.BwES1eAZ.js";import{S as be,i as we,t as W,g as ct,a as q,c as dt,h as Ce,f as Se,b as le,d as re,m as ae,e as ne}from"../chunks/index.JIjGThd1.js";import{e as Ne}from"../chunks/each.AnZnuqp8.js";import"../chunks/Toaster.svelte_svelte_type_style_lang.B-_b2mbR.js";import{g as vt}from"../chunks/entry.Dtt6bcfU.js";import{e as bt,i as wt,u as kt,m as Et,d as yt}from"../chunks/index.C9ZMts_b.js";import{g as It}from"../chunks/index.CeGjv_Ga.js";import{s as Dt}from"../chunks/index.NeePGI5c.js";import{C as Vt}from"../chunks/Collapsible.Cwj4AeFI.js";import{C as Tt}from"../chunks/ChevronUp.BuaT2OkQ.js";import{P as Ct}from"../chunks/Pencil.D3TPRO86.js";import{C as Nt}from"../chunks/Cog6.CdH1ZDQA.js";import{a as $e}from"../chunks/index.D5G1ZMhl.js";import{s as et,f as tt}from"../chunks/index.Cngo4NyP.js";function st(l,e,s){const t=l.slice();return t[9]=e[s],t[10]=e,t[11]=s,t}function lt(l){let e,s,t,r=l[2].t(l[9].role)+"",n,a,c,u,h,_,w,o,k,m='<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" d="M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>',I,b,C;function T(){l[7].call(u,l[10],l[11])}function j(){return l[8](l[11])}return{c(){e=g("div"),s=g("div"),t=g("div"),n=K(r),a=U(),c=g("div"),u=g("textarea"),w=U(),o=g("div"),k=g("button"),k.innerHTML=m,I=U(),this.h()},l(x){e=p(x,"DIV",{class:!0});var y=v(e);s=p(y,"DIV",{class:!0});var D=v(s);t=p(D,"DIV",{class:!0});var B=v(t);n=Q(B,r),B.forEach(f),D.forEach(f),a=z(y),c=p(y,"DIV",{class:!0});var N=v(c);u=p(N,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),v(u).forEach(f),N.forEach(f),w=z(y),o=p(y,"DIV",{class:!0});var A=v(o);k=p(A,"BUTTON",{class:!0,"data-svelte-h":!0}),Oe(k)!=="svelte-1526cro"&&(k.innerHTML=m),A.forEach(f),I=z(y),y.forEach(f),this.h()},h(){i(t,"class","px-2 py-1 text-sm font-semibold uppercase min-w-[6rem] text-left rounded-lg transition"),i(s,"class","flex items-start pt-1"),i(u,"id",h=l[9].role+"-"+l[11]+"-textarea"),i(u,"class","w-full bg-transparent outline-none rounded-lg p-2 text-sm resize-none overflow-hidden"),i(u,"placeholder",_=l[2].t("Enter {{role}} message here",{role:l[9].role==="user"?l[2].t("a user"):l[2].t("an assistant")})),i(u,"rows","1"),i(c,"class","flex-1"),i(k,"class","group-hover:text-gray-500 dark:text-gray-900 dark:hover:text-gray-300 transition"),i(o,"class","pt-1"),i(e,"class","flex gap-2 group")},m(x,y){S(x,e,y),d(e,s),d(s,t),d(t,n),d(e,a),d(e,c),d(c,u),l[4](u),oe(u,l[9].content),d(e,w),d(e,o),d(o,k),d(e,I),b||(C=[R(u,"input",l[5]),R(u,"focus",l[6]),R(u,"input",T),R(k,"click",j)],b=!0)},p(x,y){l=x,y&5&&r!==(r=l[2].t(l[9].role)+"")&&$(n,r),y&1&&h!==(h=l[9].role+"-"+l[11]+"-textarea")&&i(u,"id",h),y&5&&_!==(_=l[2].t("Enter {{role}} message here",{role:l[9].role==="user"?l[2].t("a user"):l[2].t("an assistant")}))&&i(u,"placeholder",_),y&1&&oe(u,l[9].content)},d(x){x&&f(e),l[4](null),b=!1,xe(C)}}}function xt(l){let e,s=Ne(l[0]),t=[];for(let r=0;r<s.length;r+=1)t[r]=lt(st(l,s,r));return{c(){e=g("div");for(let r=0;r<t.length;r+=1)t[r].c();this.h()},l(r){e=p(r,"DIV",{class:!0});var n=v(e);for(let a=0;a<t.length;a+=1)t[a].l(n);n.forEach(f),this.h()},h(){i(e,"class","py-3 space-y-3")},m(r,n){S(r,e,n);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(e,null)},p(r,[n]){if(n&7){s=Ne(r[0]);let a;for(a=0;a<s.length;a+=1){const c=st(r,s,a);t[a]?t[a].p(c,n):(t[a]=lt(c),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=s.length}},i:pe,o:pe,d(r){r&&f(e),it(t,r)}}}function Bt(l,e,s){let t;const r=ut("i18n");he(l,r,o=>s(2,t=o));let{messages:n=[]}=e,a;ft(()=>{n.forEach((o,k)=>{s(1,a.style.height="",a),s(1,a.style.height=a.scrollHeight+"px",a)})});function c(o){ge[o?"unshift":"push"](()=>{a=o,s(1,a)})}const u=o=>{s(1,a.style.height="",a),s(1,a.style.height=a.scrollHeight+"px",a)},h=o=>{s(1,a.style.height="",a),s(1,a.style.height=a.scrollHeight+"px",a)};function _(o,k){o[k].content=this.value,s(0,n)}const w=o=>{s(0,n=n.filter((k,m)=>m!==o))};return l.$$set=o=>{"messages"in o&&s(0,n=o.messages)},[n,a,t,r,c,u,h,_,w]}class Ht extends be{constructor(e){super(),we(this,e,Bt,xt,ve,{messages:0})}}function rt(l){let e,s,t,r,n,a,c,u,h,_,w;const o=l[5].default,k=ht(o,l,l[4],null);return{c(){e=g("div"),t=U(),r=g("div"),n=g("div"),k&&k.c(),this.h()},l(m){e=p(m,"DIV",{class:!0}),v(e).forEach(f),t=z(m),r=p(m,"DIV",{class:!0});var I=v(r);n=p(I,"DIV",{class:!0,style:!0});var b=v(n);k&&k.l(b),b.forEach(f),I.forEach(f),this.h()},h(){i(e,"class","absolute z-20 top-0 right-0 left-0 bottom-0 bg-white/20 dark:bg-black/5 w-full min-h-full h-full flex justify-center overflow-hidden overscroll-contain"),i(n,"class",a=l[3]+" h-full"),Fe(n,"width",l[0]?l[2]:"0px"),i(r,"class",c="absolute z-30 shadow-xl "+(l[1]==="right"?"right-0":"left-0")+" top-0 bottom-0")},m(m,I){S(m,e,I),S(m,t,I),S(m,r,I),d(r,n),k&&k.m(n,null),h=!0,_||(w=R(e,"mousedown",l[6]),_=!0)},p(m,I){l=m,k&&k.p&&(!h||I&16)&&_t(k,o,l,l[4],h?gt(o,l[4],I,null):mt(l[4]),null),(!h||I&8&&a!==(a=l[3]+" h-full"))&&i(n,"class",a),(!h||I&5)&&Fe(n,"width",l[0]?l[2]:"0px"),(!h||I&2&&c!==(c="absolute z-30 shadow-xl "+(l[1]==="right"?"right-0":"left-0")+" top-0 bottom-0"))&&i(r,"class",c)},i(m){h||(m&&Ue(()=>{h&&(s||(s=Ce(e,tt,{},!0)),s.run(1))}),W(k,m),m&&Ue(()=>{h&&(u||(u=Ce(r,et,{easing:$e,axis:l[1]==="right"?"x":"y"},!0)),u.run(1))}),h=!0)},o(m){m&&(s||(s=Ce(e,tt,{},!1)),s.run(0)),q(k,m),m&&(u||(u=Ce(r,et,{easing:$e,axis:l[1]==="right"?"x":"y"},!1)),u.run(0)),h=!1},d(m){m&&(f(e),f(t),f(r)),m&&s&&s.end(),k&&k.d(m),m&&u&&u.end(),_=!1,w()}}}function At(l){let e,s,t=l[0]&&rt(l);return{c(){t&&t.c(),e=Ze()},l(r){t&&t.l(r),e=Ze()},m(r,n){t&&t.m(r,n),S(r,e,n),s=!0},p(r,[n]){r[0]?t?(t.p(r,n),n&1&&W(t,1)):(t=rt(r),t.c(),W(t,1),t.m(e.parentNode,e)):t&&(ct(),q(t,1,1,()=>{t=null}),dt())},i(r){s||(W(t),s=!0)},o(r){q(t),s=!1},d(r){r&&f(e),t&&t.d(r)}}}function St(l,e,s){let{$$slots:t={},$$scope:r}=e,{show:n=!1}=e,{side:a="right"}=e,{width:c="200px"}=e,{className:u=""}=e;const h=()=>{s(0,n=!1)};return l.$$set=_=>{"show"in _&&s(0,n=_.show),"side"in _&&s(1,a=_.side),"width"in _&&s(2,c=_.width),"className"in _&&s(3,u=_.className),"$$scope"in _&&s(4,r=_.$$scope)},[n,a,c,u,r,t,h]}class Ot extends be{constructor(e){super(),we(this,e,St,At,ve,{show:0,side:1,width:2,className:3})}}function Ut(l){let e,s;return{c(){e=Ge("svg"),s=Ge("path"),this.h()},l(t){e=Ke(t,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=v(e);s=Ke(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),v(s).forEach(f),r.forEach(f),this.h()},h(){i(s,"stroke-linecap","round"),i(s,"stroke-linejoin","round"),i(s,"d","M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"),i(e,"xmlns","http://www.w3.org/2000/svg"),i(e,"fill","none"),i(e,"viewBox","0 0 24 24"),i(e,"stroke-width",l[1]),i(e,"stroke","currentColor"),i(e,"class",l[0])},m(t,r){S(t,e,r),d(e,s)},p(t,[r]){r&2&&i(e,"stroke-width",t[1]),r&1&&i(e,"class",t[0])},i:pe,o:pe,d(t){t&&f(e)}}}function zt(l,e,s){let{className:t="size-4"}=e,{strokeWidth:r="1.5"}=e;return l.$$set=n=>{"className"in n&&s(0,t=n.className),"strokeWidth"in n&&s(1,r=n.strokeWidth)},[t,r]}class Mt extends be{constructor(e){super(),we(this,e,zt,Ut,ve,{className:0,strokeWidth:1})}}function at(l,e,s){const t=l.slice();return t[37]=e[s],t}function nt(l){let e,s=l[37].name+"",t,r;return{c(){e=g("option"),t=K(s),this.h()},l(n){e=p(n,"OPTION",{class:!0});var a=v(e);t=Q(a,s),a.forEach(f),this.h()},h(){e.__value=r=l[37].id,oe(e,e.__value),i(e,"class","bg-gray-50 dark:bg-gray-700")},m(n,a){S(n,e,a),d(e,t)},p(n,a){a[0]&512&&s!==(s=n[37].name+"")&&$(t,s),a[0]&512&&r!==(r=n[37].id)&&(e.__value=r,oe(e,e.__value))},d(n){n&&f(e)}}}function Rt(l){let e,s,t,r="Settings",n,a,c,u,h,_,w,o,k="Model",m,I,b,C,T,j;u=new Mt({props:{className:"size-3",strokeWidth:"2.5"}});let x=Ne(l[9]),y=[];for(let D=0;D<x.length;D+=1)y[D]=nt(at(l,x,D));return{c(){e=g("div"),s=g("div"),t=g("div"),t.textContent=r,n=U(),a=g("div"),c=g("button"),le(u.$$.fragment),h=U(),_=g("div"),w=g("div"),o=g("div"),o.textContent=k,m=U(),I=g("div"),b=g("select");for(let D=0;D<y.length;D+=1)y[D].c();this.h()},l(D){e=p(D,"DIV",{class:!0});var B=v(e);s=p(B,"DIV",{class:!0});var N=v(s);t=p(N,"DIV",{class:!0,"data-svelte-h":!0}),Oe(t)!=="svelte-1dw76ku"&&(t.textContent=r),n=z(N),a=p(N,"DIV",{class:!0});var A=v(a);c=p(A,"BUTTON",{class:!0});var X=v(c);re(u.$$.fragment,X),X.forEach(f),A.forEach(f),N.forEach(f),h=z(B),_=p(B,"DIV",{class:!0});var O=v(_);w=p(O,"DIV",{});var J=v(w);o=p(J,"DIV",{class:!0,"data-svelte-h":!0}),Oe(o)!=="svelte-vz1bvh"&&(o.textContent=k),m=z(J),I=p(J,"DIV",{class:!0});var ee=v(I);b=p(ee,"SELECT",{class:!0});var L=v(b);for(let Y=0;Y<y.length;Y+=1)y[Y].l(L);L.forEach(f),ee.forEach(f),J.forEach(f),O.forEach(f),B.forEach(f),this.h()},h(){i(t,"class","font-medium text-base"),i(c,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),i(a,"class","translate-x-1.5"),i(s,"class","flex justify-between items-center mb-2"),i(o,"class","text-xs font-medium mb-1"),i(b,"class","w-full bg-transparent border border-gray-50 dark:border-gray-850 rounded-lg py-1 px-2 -mx-0.5 text-sm outline-none"),l[0]===void 0&&Ue(()=>l[16].call(b)),i(I,"class","w-full"),i(_,"class","mt-1"),i(e,"class","flex flex-col px-5 py-3 text-sm")},m(D,B){S(D,e,B),d(e,s),d(s,t),d(s,n),d(s,a),d(a,c),ae(u,c,null),d(e,h),d(e,_),d(_,w),d(w,o),d(w,m),d(w,I),d(I,b);for(let N=0;N<y.length;N+=1)y[N]&&y[N].m(b,null);Qe(b,l[0],!0),C=!0,T||(j=[R(c,"click",l[15]),R(b,"change",l[16])],T=!0)},p(D,B){if(B[0]&512){x=Ne(D[9]);let N;for(N=0;N<x.length;N+=1){const A=at(D,x,N);y[N]?y[N].p(A,B):(y[N]=nt(A),y[N].c(),y[N].m(b,null))}for(;N<y.length;N+=1)y[N].d(1);y.length=x.length}B[0]&513&&Qe(b,D[0])},i(D){C||(W(u.$$.fragment,D),C=!0)},o(D){q(u.$$.fragment,D),C=!1},d(D){D&&f(e),ne(u),it(y,D),T=!1,xe(j)}}}function ot(l){let e,s;return{c(){e=g("div"),s=K(l[5]),this.h()},l(t){e=p(t,"DIV",{class:!0});var r=v(e);s=Q(r,l[5]),r.forEach(f),this.h()},h(){i(e,"class","flex-1 text-gray-500 line-clamp-1")},m(t,r){S(t,e,r),d(e,s)},p(t,r){r[0]&32&&$(s,t[5])},d(t){t&&f(e)}}}function jt(l){let e,s;return e=new Ct({props:{className:"size-3.5"}}),{c(){le(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,r){ae(e,t,r),s=!0},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function Wt(l){let e,s;return e=new Tt({props:{className:"size-3.5"}}),{c(){le(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,r){ae(e,t,r),s=!0},i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}function Lt(l){let e,s,t=l[10].t("System Instructions")+"",r,n,a,c,u,h,_,w,o=!l[3]&&ot(l);const k=[Wt,jt],m=[];function I(b,C){return b[3]?0:1}return h=I(l),_=m[h]=k[h](l),{c(){e=g("div"),s=g("div"),r=K(t),n=U(),o&&o.c(),a=U(),c=g("div"),u=g("button"),_.c(),this.h()},l(b){e=p(b,"DIV",{class:!0});var C=v(e);s=p(C,"DIV",{class:!0});var T=v(s);r=Q(T,t),T.forEach(f),n=z(C),o&&o.l(C),a=z(C),c=p(C,"DIV",{class:!0});var j=v(c);u=p(j,"BUTTON",{class:!0});var x=v(u);_.l(x),x.forEach(f),j.forEach(f),C.forEach(f),this.h()},h(){i(s,"class","flex-shrink-0 font-medium ml-1.5"),i(u,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),i(c,"class","flex-shrink-0"),i(e,"class","flex gap-2 justify-between items-center")},m(b,C){S(b,e,C),d(e,s),d(s,r),d(e,n),o&&o.m(e,null),d(e,a),d(e,c),d(c,u),m[h].m(u,null),w=!0},p(b,C){(!w||C[0]&1024)&&t!==(t=b[10].t("System Instructions")+"")&&$(r,t),b[3]?o&&(o.d(1),o=null):o?o.p(b,C):(o=ot(b),o.c(),o.m(e,a));let T=h;h=I(b),h!==T&&(ct(),q(m[T],1,1,()=>{m[T]=null}),dt(),_=m[h],_||(_=m[h]=k[h](b),_.c()),W(_,1),_.m(u,null))},i(b){w||(W(_),w=!0)},o(b){q(_),w=!1},d(b){b&&f(e),o&&o.d(),m[h].d()}}}function Pt(l){let e,s,t,r,n,a;return{c(){e=g("div"),s=g("div"),t=g("textarea"),this.h()},l(c){e=p(c,"DIV",{slot:!0});var u=v(e);s=p(u,"DIV",{class:!0});var h=v(s);t=p(h,"TEXTAREA",{id:!0,class:!0,placeholder:!0,rows:!0}),v(t).forEach(f),h.forEach(f),u.forEach(f),this.h()},h(){i(t,"id","system-textarea"),i(t,"class","w-full h-full bg-transparent resize-none outline-none text-sm"),i(t,"placeholder",r=l[10].t("You're a helpful assistant.")),i(t,"rows","4"),i(s,"class","pt-1 px-1.5"),i(e,"slot","content")},m(c,u){S(c,e,u),d(e,s),d(s,t),oe(t,l[5]),n||(a=R(t,"input",l[18]),n=!0)},p(c,u){u[0]&1024&&r!==(r=c[10].t("You're a helpful assistant."))&&i(t,"placeholder",r),u[0]&32&&oe(t,c[5])},d(c){c&&f(e),n=!1,a()}}}function qt(l){let e=l[10].t("Assistant")+"",s;return{c(){s=K(e)},l(t){s=Q(t,e)},m(t,r){S(t,s,r)},p(t,r){r[0]&1024&&e!==(e=t[10].t("Assistant")+"")&&$(s,e)},d(t){t&&f(s)}}}function Xt(l){let e=l[10].t("User")+"",s;return{c(){s=K(e)},l(t){s=Q(t,e)},m(t,r){S(t,s,r)},p(t,r){r[0]&1024&&e!==(e=t[10].t("User")+"")&&$(s,e)},d(t){t&&f(s)}}}function Jt(l){let e,s=l[10].t("Cancel")+"",t,r,n;return{c(){e=g("button"),t=K(s),this.h()},l(a){e=p(a,"BUTTON",{class:!0});var c=v(e);t=Q(c,s),c.forEach(f),this.h()},h(){i(e,"class","px-3 py-1.5 text-sm font-medium bg-gray-300 text-black transition rounded-lg")},m(a,c){S(a,e,c),d(e,t),r||(n=R(e,"click",l[29]),r=!0)},p(a,c){c[0]&1024&&s!==(s=a[10].t("Cancel")+"")&&$(t,s)},d(a){a&&f(e),r=!1,n()}}}function Yt(l){let e,s=l[10].t("Add")+"",t,r,n,a,c=l[10].t("Run")+"",u,h,_;return{c(){e=g("button"),t=K(s),n=U(),a=g("button"),u=K(c),this.h()},l(w){e=p(w,"BUTTON",{class:!0});var o=v(e);t=Q(o,s),o.forEach(f),n=z(w),a=p(w,"BUTTON",{class:!0});var k=v(a);u=Q(k,c),k.forEach(f),this.h()},h(){e.disabled=r=l[7]==="",i(e,"class","px-3.5 py-1.5 text-sm font-medium disabled:bg-gray-50 dark:disabled:hover:bg-gray-850 disabled:cursor-not-allowed bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),i(a,"class","px-3.5 py-1.5 text-sm font-medium bg-black hover:bg-gray-900 text-white dark:bg-white dark:text-black dark:hover:bg-gray-100 transition rounded-lg")},m(w,o){S(w,e,o),d(e,t),S(w,n,o),S(w,a,o),d(a,u),h||(_=[R(e,"click",l[27]),R(a,"click",l[28])],h=!0)},p(w,o){o[0]&1024&&s!==(s=w[10].t("Add")+"")&&$(t,s),o[0]&128&&r!==(r=w[7]==="")&&(e.disabled=r),o[0]&1024&&c!==(c=w[10].t("Run")+"")&&$(u,c)},d(w){w&&(f(e),f(n),f(a)),h=!1,xe(_)}}}function Zt(l){let e,s,t,r,n,a,c,u,h,_,w,o,k,m,I,b,C,T,j,x,y,D,B,N,A,X,O,J,ee,L,Y,Z,ke,ie,ue,Ee,Be;function ze(E){l[17](E)}let V={className:" bg-white dark:bg-gray-900",width:"300px",$$slots:{default:[Rt]},$$scope:{ctx:l}};l[4]!==void 0&&(V.show=l[4]),t=new Ot({props:V}),ge.push(()=>Se(t,"show",ze));function _e(E){l[19](E)}let ye={className:"w-full flex-1",buttonClassName:"w-full rounded-lg text-sm border border-gray-50 dark:border-gray-850 w-full py-1 px-1.5",grow:!0,$$slots:{content:[Pt],default:[Lt]},$$scope:{ctx:l}};l[3]!==void 0&&(ye.open=l[3]),u=new Vt({props:ye}),ge.push(()=>Se(u,"open",_e)),k=new Nt({});function fe(E){l[21](E)}let ce={};l[8]!==void 0&&(ce.messages=l[8]),T=new Ht({props:ce}),ge.push(()=>Se(T,"messages",fe));function me(E,H){return E[6]==="user"?Xt:qt}let F=me(l),P=F(l);function Ie(E,H){return E[1]?Jt:Yt}let te=Ie(l),M=te(l);return{c(){e=g("div"),s=g("div"),le(t.$$.fragment),n=U(),a=g("div"),c=g("div"),le(u.$$.fragment),_=U(),w=g("div"),o=g("button"),le(k.$$.fragment),m=U(),I=g("div"),b=g("div"),C=g("div"),le(T.$$.fragment),x=U(),y=g("div"),D=g("div"),B=K(l[0]),N=U(),A=g("div"),X=g("div"),O=g("textarea"),ee=U(),L=g("div"),Y=g("div"),Z=g("button"),P.c(),ke=U(),ie=g("div"),M.c(),this.h()},l(E){e=p(E,"DIV",{class:!0});var H=v(e);s=p(H,"DIV",{class:!0});var se=v(s);re(t.$$.fragment,se),n=z(se),a=p(se,"DIV",{class:!0});var G=v(a);c=p(G,"DIV",{class:!0});var de=v(c);re(u.$$.fragment,de),_=z(de),w=p(de,"DIV",{class:!0});var Me=v(w);o=p(Me,"BUTTON",{class:!0});var Re=v(o);re(k.$$.fragment,Re),Re.forEach(f),Me.forEach(f),de.forEach(f),m=z(G),I=p(G,"DIV",{class:!0,id:!0});var je=v(I);b=p(je,"DIV",{class:!0});var We=v(b);C=p(We,"DIV",{class:!0});var Le=v(C);re(T.$$.fragment,Le),Le.forEach(f),We.forEach(f),je.forEach(f),x=z(G),y=p(G,"DIV",{class:!0});var De=v(y);D=p(De,"DIV",{class:!0});var Pe=v(D);B=Q(Pe,l[0]),Pe.forEach(f),N=z(De),A=p(De,"DIV",{class:!0});var Ve=v(A);X=p(Ve,"DIV",{class:!0});var qe=v(X);O=p(qe,"TEXTAREA",{class:!0,placeholder:!0,rows:!0}),v(O).forEach(f),qe.forEach(f),ee=z(Ve),L=p(Ve,"DIV",{class:!0});var Te=v(L);Y=p(Te,"DIV",{});var Xe=v(Y);Z=p(Xe,"BUTTON",{class:!0});var Je=v(Z);P.l(Je),Je.forEach(f),Xe.forEach(f),ke=z(Te),ie=p(Te,"DIV",{});var Ye=v(ie);M.l(Ye),Ye.forEach(f),Te.forEach(f),Ve.forEach(f),De.forEach(f),G.forEach(f),se.forEach(f),H.forEach(f),this.h()},h(){i(o,"class","p-1.5 bg-transparent hover:bg-white/5 transition rounded-lg"),i(w,"class","translate-y-1"),i(c,"class","flex w-full items-start gap-1.5"),i(C,"class","flex-1 p-1"),i(b,"class","h-full w-full flex flex-col"),i(I,"class","pb-2.5 flex flex-col justify-between w-full flex-auto overflow-auto h-0"),i(I,"id","messages-container"),i(D,"class","text-xs font-medium text-gray-500 px-2 py-1"),i(O,"class","w-full h-full bg-transparent resize-none outline-none text-sm"),i(O,"placeholder",J=l[10].t("Enter {{role}} message here",{role:l[6]==="user"?l[10].t("a user"):l[10].t("an assistant")})),i(O,"rows","2"),i(X,"class","py-0.5"),i(Z,"class","px-3.5 py-1.5 text-sm font-medium bg-gray-50 hover:bg-gray-100 text-gray-900 dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-gray-200 transition rounded-lg"),i(L,"class","flex justify-between"),i(A,"class","border border-gray-50 dark:border-gray-850 w-full px-3 py-2.5 rounded-xl"),i(y,"class","pb-3"),i(a,"class","flex flex-col h-full px-4 py-1"),i(s,"class","mx-auto w-full md:px-0 h-full relative"),i(e,"class","flex flex-col justify-between w-full overflow-y-auto h-full")},m(E,H){S(E,e,H),d(e,s),ae(t,s,null),d(s,n),d(s,a),d(a,c),ae(u,c,null),d(c,_),d(c,w),d(w,o),ae(k,o,null),d(a,m),d(a,I),d(I,b),d(b,C),ae(T,C,null),l[22](I),d(a,x),d(a,y),d(y,D),d(D,B),d(y,N),d(y,A),d(A,X),d(X,O),oe(O,l[7]),d(A,ee),d(A,L),d(L,Y),d(Y,Z),P.m(Z,null),d(L,ke),d(L,ie),M.m(ie,null),ue=!0,Ee||(Be=[R(o,"click",l[20]),R(O,"input",l[23]),R(O,"input",l[24]),R(O,"focus",l[25]),R(Z,"click",l[26])],Ee=!0)},p(E,H){const se={};H[0]&529|H[1]&512&&(se.$$scope={dirty:H,ctx:E}),!r&&H[0]&16&&(r=!0,se.show=E[4],He(()=>r=!1)),t.$set(se);const G={};H[0]&1064|H[1]&512&&(G.$$scope={dirty:H,ctx:E}),!h&&H[0]&8&&(h=!0,G.open=E[3],He(()=>h=!1)),u.$set(G);const de={};!j&&H[0]&256&&(j=!0,de.messages=E[8],He(()=>j=!1)),T.$set(de),(!ue||H[0]&1)&&$(B,E[0]),(!ue||H[0]&1088&&J!==(J=E[10].t("Enter {{role}} message here",{role:E[6]==="user"?E[10].t("a user"):E[10].t("an assistant")})))&&i(O,"placeholder",J),H[0]&128&&oe(O,E[7]),F===(F=me(E))&&P?P.p(E,H):(P.d(1),P=F(E),P&&(P.c(),P.m(Z,null))),te===(te=Ie(E))&&M?M.p(E,H):(M.d(1),M=te(E),M&&(M.c(),M.m(ie,null)))},i(E){ue||(W(t.$$.fragment,E),W(u.$$.fragment,E),W(k.$$.fragment,E),W(T.$$.fragment,E),ue=!0)},o(E){q(t.$$.fragment,E),q(u.$$.fragment,E),q(k.$$.fragment,E),q(T.$$.fragment,E),ue=!1},d(E){E&&f(e),ne(t),ne(u),ne(k),ne(T),l[22](null),P.d(),M.d(),Ee=!1,xe(Be)}}}function Ft(l,e,s){let t,r,n,a,c;he(l,bt,V=>s(32,t=V)),he(l,wt,V=>s(33,r=V)),he(l,kt,V=>s(34,n=V)),he(l,Et,V=>s(9,a=V));const u=ut("i18n");he(l,u,V=>s(10,c=V));let h="",_=!1,w=!1,o,k=!1,m=!1,I="",b="user",C="",T=[];const j=()=>{const V=o;V&&(V.scrollTop=V==null?void 0:V.scrollHeight)},x=()=>{w=!0,console.log("stopResponse")},y=async()=>{var me;const V=a.find(F=>F.id===h),[_e,ye]=await It(localStorage.token,{model:V.id,stream:!0,messages:[I?{role:"system",content:I}:void 0,...T].filter(F=>F)},`${yt}/api`);let fe;((me=T.at(-1))==null?void 0:me.role)==="assistant"?fe=T.at(-1):(fe={role:"assistant",content:""},T.push(fe),s(8,T)),await Ae();const ce=document.getElementById(`assistant-${T.length-1}-textarea`);if(_e&&_e.ok){const F=_e.body.pipeThrough(new TextDecoderStream).pipeThrough(Dt(`
`)).getReader();for(;;){const{value:P,done:Ie}=await F.read();if(Ie||w){w&&ye.abort("User: Stop Response");break}try{let te=P.split(`
`);for(const M of te)if(M!=="")if(console.log(M),M==="data: [DONE]")s(8,T);else{let E=JSON.parse(M.replace(/^data: /,""));if(console.log(E),fe.content==""&&E.choices[0].delta.content==`
`)continue;ce.style.height=ce.scrollHeight+"px",fe.content+=E.choices[0].delta.content??"",s(8,T),ce.style.height=ce.scrollHeight+"px",await Ae()}}catch(te){console.log(te)}j()}}},D=async()=>{C&&(T.push({role:b,content:C}),s(8,T),s(7,C=""),await Ae(),j())},B=async()=>{h&&(await D(),s(1,_=!0),await y(),s(1,_=!1),w=!1)};ft(async()=>{(n==null?void 0:n.role)!=="admin"&&await vt("/"),r!=null&&r.models?s(0,h=r==null?void 0:r.models[0]):t!=null&&t.default_models?s(0,h=t==null?void 0:t.default_models.split(",")[0]):s(0,h="")});const N=()=>{s(4,m=!m)};function A(){h=pt(this),s(0,h)}function X(V){m=V,s(4,m)}function O(){I=this.value,s(5,I)}function J(V){k=V,s(3,k)}const ee=()=>{s(4,m=!m)};function L(V){T=V,s(8,T)}function Y(V){ge[V?"unshift":"push"](()=>{o=V,s(2,o)})}function Z(){C=this.value,s(7,C)}return[h,_,o,k,m,I,b,C,T,a,c,u,x,D,B,N,A,X,O,J,ee,L,Y,Z,V=>{V.target.style.height="",V.target.style.height=Math.min(V.target.scrollHeight,150)+"px"},V=>{V.target.style.height="",V.target.style.height=Math.min(V.target.scrollHeight,150)+"px"},()=>{s(6,b=b==="user"?"assistant":"user")},()=>{D(),s(6,b=b==="user"?"assistant":"user")},()=>{B()},()=>{x()}]}class Gt extends be{constructor(e){super(),we(this,e,Ft,Zt,ve,{},null,[-1,-1])}}function Kt(l){let e,s;return e=new Gt({}),{c(){le(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,r){ae(e,t,r),s=!0},p:pe,i(t){s||(W(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){ne(e,t)}}}class ds extends be{constructor(e){super(),we(this,e,null,Kt,ve,{})}}export{ds as component};
//# sourceMappingURL=11.BRwbCzpm.js.map
