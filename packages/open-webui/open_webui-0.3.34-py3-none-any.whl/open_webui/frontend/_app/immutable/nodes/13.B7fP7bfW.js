import{s as Q,A as X,e as $,k as q,c as b,a as w,o as B,d as h,f as p,i as C,g as v,B as K,u as Y,D as Z,p as se,j as oe,n as ee}from"../chunks/scheduler.BwES1eAZ.js";import{S as te,i as ne,f as re,b as T,d as N,m as j,g as ie,a as V,c as ae,t as x,e as R}from"../chunks/index.JIjGThd1.js";import{R as ce,V as ue}from"../chunks/RichTextInput.DlvH1bTO.js";import{M as fe}from"../chunks/Mic.DArzRPl0.js";import{T as de}from"../chunks/Tooltip.Dj8C3DN2.js";import{t as L}from"../chunks/Toaster.svelte_svelte_type_style_lang.B-_b2mbR.js";function pe(o){let e,n;return e=new de({props:{content:o[3].t("Voice Input"),$$slots:{default:[he]},$$scope:{ctx:o}}}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){j(e,t,s),n=!0},p(t,s){const a={};s&8&&(a.content=t[3].t("Voice Input")),s&2060&&(a.$$scope={dirty:s,ctx:t}),e.$set(a)},i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function me(o){let e,n,t,s;function a(l){o[7](l)}let r={className:"p-1 w-full max-w-full"};return o[2]!==void 0&&(r.recording=o[2]),n=new ue({props:r}),X.push(()=>re(n,"recording",a)),n.$on("cancel",o[8]),n.$on("confirm",o[9]),{c(){e=$("div"),T(n.$$.fragment),this.h()},l(l){e=b(l,"DIV",{class:!0});var m=w(e);N(n.$$.fragment,m),m.forEach(h),this.h()},h(){p(e,"class","flex-1 w-full")},m(l,m){C(l,e,m),j(n,e,null),s=!0},p(l,m){const _={};!t&&m&4&&(t=!0,_.recording=l[2],Z(()=>t=!1)),n.$set(_)},i(l){s||(x(n.$$.fragment,l),s=!0)},o(l){V(n.$$.fragment,l),s=!1},d(l){l&&h(e),R(n)}}}function he(o){let e,n,t,s,a;return n=new fe({props:{className:"size-4"}}),{c(){e=$("button"),T(n.$$.fragment),this.h()},l(r){e=b(r,"BUTTON",{class:!0,type:!0});var l=w(e);N(n.$$.fragment,l),l.forEach(h),this.h()},h(){p(e,"class","cursor-pointer p-2.5 flex rounded-full hover:bg-gray-100 dark:hover:bg-gray-850 transition shadow-xl"),p(e,"type","button")},m(r,l){C(r,e,l),j(n,e,null),t=!0,s||(a=Y(e,"click",o[10]),s=!0)},p:ee,i(r){t||(x(n.$$.fragment,r),t=!0)},o(r){V(n.$$.fragment,r),t=!1},d(r){r&&h(e),R(n),s=!1,a()}}}function _e(o){let e,n,t,s,a,r,l,m,_,g,P,M,D,c,u,f,k,U,S,W=ge;function le(i){o[6](i)}let z={className:" input-prose-sm",placeholder:o[3].t("Write something...")};o[1]!==void 0&&(z.value=o[1]),g=new ce({props:z}),X.push(()=>re(g,"value",le));const A=[me,pe],I=[];function O(i,d){return i[2]?0:1}return u=O(o),f=I[u]=A[u](o),{c(){e=$("div"),n=q(),t=$("div"),s=$("div"),a=$("div"),r=$("input"),m=q(),_=$("div"),T(g.$$.fragment),M=q(),D=$("div"),c=$("div"),f.c(),this.h()},l(i){e=b(i,"DIV",{class:!0});var d=w(e);n=B(d),t=b(d,"DIV",{class:!0});var y=w(t);s=b(y,"DIV",{class:!0});var E=w(s);a=b(E,"DIV",{class:!0});var F=w(a);r=b(F,"INPUT",{class:!0,type:!0,placeholder:!0}),F.forEach(h),E.forEach(h),m=B(y),_=b(y,"DIV",{class:!0});var G=w(_);N(g.$$.fragment,G),G.forEach(h),y.forEach(h),M=B(d),D=b(d,"DIV",{class:!0});var H=w(D);c=b(H,"DIV",{class:!0});var J=w(c);f.l(J),J.forEach(h),H.forEach(h),d.forEach(h),this.h()},h(){p(r,"class","w-full text-2xl font-medium bg-transparent outline-none"),p(r,"type","text"),p(r,"placeholder",l=o[3].t("Title")),r.required=!0,p(a,"class","w-full"),p(s,"class","flex-shrink-0 w-full flex justify-between items-center"),p(_,"class","flex-1 w-full h-full"),p(t,"class","w-full flex flex-col gap-2 "),p(c,"class","flex gap-0.5 justify-end w-full"),p(D,"class","absolute bottom-0 left-0 right-0 p-5 max-w-full flex justify-end"),p(e,"class","relative flex-1 w-full h-full flex justify-center overflow-auto px-5 py-1")},m(i,d){C(i,e,d),v(e,n),v(e,t),v(t,s),v(s,a),v(a,r),K(r,o[0]),v(t,m),v(t,_),j(g,_,null),v(e,M),v(e,D),v(D,c),I[u].m(c,null),k=!0,U||(S=Y(r,"input",o[5]),U=!0)},p(i,[d]){(!k||d&8&&l!==(l=i[3].t("Title")))&&p(r,"placeholder",l),d&1&&r.value!==i[0]&&K(r,i[0]);const y={};d&8&&(y.placeholder=i[3].t("Write something...")),!P&&d&2&&(P=!0,y.value=i[1],Z(()=>P=!1)),g.$set(y);let E=u;u=O(i),u===E?I[u].p(i,d):(ie(),V(I[E],1,1,()=>{I[E]=null}),ae(),f=I[u],f?f.p(i,d):(f=I[u]=A[u](i),f.c()),x(f,1),f.m(c,null))},i(i){k||(x(W),x(g.$$.fragment,i),x(f),k=!0)},o(i){V(W),V(g.$$.fragment,i),V(f),k=!1},d(i){i&&h(e),R(g),I[u].d(),U=!1,S()}}}let ge=!1;function ve(o,e,n){let t;const s=se("i18n");oe(o,s,c=>n(3,t=c));let a="",r="",l=!1;function m(){a=this.value,n(0,a)}function _(c){r=c,n(1,r)}function g(c){l=c,n(2,l)}return[a,r,l,t,s,m,_,g,()=>{n(2,l=!1)},c=>{const{text:u,filename:f}=c.detail,k=`${window.location.origin}/cache/audio/transcription/${f}`;r.trim()!==""?n(1,r=`${r}

${u}

Recording: ${k}

`):n(1,r=`${r}${u}

Recording: ${k}

`),n(2,l=!1)},async()=>{try{let c=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(u){return L.error(t.t("Permission denied when accessing microphone: {{error}}",{error:u})),null});c&&(n(2,l=!0),c.getTracks().forEach(f=>f.stop())),c=null}catch{L.error(t.t("Permission denied when accessing microphone"))}}]}class $e extends te{constructor(e){super(),ne(this,e,ve,_e,Q,{})}}function be(o){let e,n;return e=new $e({}),{c(){T(e.$$.fragment)},l(t){N(e.$$.fragment,t)},m(t,s){j(e,t,s),n=!0},p:ee,i(t){n||(x(e.$$.fragment,t),n=!0)},o(t){V(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}class De extends te{constructor(e){super(),ne(this,e,null,be,Q,{})}}export{De as component};
//# sourceMappingURL=13.B7fP7bfW.js.map
