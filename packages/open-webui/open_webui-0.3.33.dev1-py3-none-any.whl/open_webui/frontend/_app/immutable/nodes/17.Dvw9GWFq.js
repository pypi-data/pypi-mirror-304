import{s as Ee,A as He,D as Oe,F as Ze,p as Pe,j as he,e as g,c as h,a as v,d as c,f as m,i as H,r as Je,v as Qe,w as Re,x as Xe,u as ve,n as We,k as K,t as le,o as T,b as re,g as d,h as se,y as Ke,m as Ye,H as et,z as Te,B as Ne,K as tt,E as lt,q as rt}from"../chunks/scheduler.UhqRSRjm.js";import{S as ye,i as De,f as qe,b as L,d as Z,m as J,t as x,a as N,e as Q,g as Fe,c as Ge}from"../chunks/index.nGViVUxX.js";import{e as Ue}from"../chunks/each.BhHg6he0.js";import{F as nt}from"../chunks/fuse.CU2r43ac.js";import{d as ke}from"../chunks/dayjs.min.CnqrW7zs.js";import{r as st}from"../chunks/relativeTime.HIEE8cw9.js";import{t as be}from"../chunks/Toaster.svelte_svelte_type_style_lang.BewAq8ge.js";import{k as ge,W as ot}from"../chunks/index.D9tMcTAs.js";import{g as Se,d as at}from"../chunks/index.DYtKLRuw.js";import"../chunks/sha256.DmKfZSHC.js";import{g as ze}from"../chunks/entry.D2WXDOxn.js";import{T as it,f as ct}from"../chunks/Tooltip.z_aNDJGq.js";import{C as dt}from"../chunks/ConfirmDialog.BuMPHVd5.js";import"../chunks/updater.CZKoXgFY.js";import{D as ft,M as ut}from"../chunks/Dropdown.Dr-AhyTQ.js";import{b as mt}from"../chunks/menu-trigger.DQYUBDaN.js";import{G as pt}from"../chunks/GarbageBin.BjF7fUOW.js";import{E as _t}from"../chunks/EllipsisHorizontal.BzCjgJGJ.js";import{B as Le}from"../chunks/Badge.BAAoJmUV.js";function gt(r){let e,l,t,n,s;return l=new _t({props:{className:"size-5"}}),{c(){e=g("button"),L(l.$$.fragment),this.h()},l(o){e=h(o,"BUTTON",{class:!0,type:!0});var i=v(e);Z(l.$$.fragment,i),i.forEach(c),this.h()},h(){m(e,"class","self-center w-fit text-sm p-1.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-xl"),m(e,"type","button")},m(o,i){H(o,e,i),J(l,e,null),t=!0,n||(s=ve(e,"click",r[7]),n=!0)},p:We,i(o){t||(x(l.$$.fragment,o),t=!0)},o(o){N(l.$$.fragment,o),t=!1},d(o){o&&c(e),Q(l),n=!1,s()}}}function ht(r){let e;const l=r[5].default,t=Je(l,r,r[10],null),n=t||gt(r);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,o){n&&n.m(s,o),e=!0},p(s,o){t?t.p&&(!e||o&1024)&&Qe(t,l,s,s[10],e?Xe(l,s[10],o,null):Re(s[10]),null):n&&n.p&&(!e||o&2)&&n.p(s,e?o:-1)},i(s){e||(x(n,s),e=!0)},o(s){N(n,s),e=!1},d(s){n&&n.d(s)}}}function vt(r){let e,l;return e=new it({props:{content:r[2].t("More"),$$slots:{default:[ht]},$$scope:{ctx:r}}}),{c(){L(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){J(e,t,n),l=!0},p(t,n){const s={};n&4&&(s.content=t[2].t("More")),n&1026&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function $t(r){let e,l,t,n=r[2].t("Delete")+"",s,o;return e=new pt({props:{strokeWidth:"2"}}),{c(){L(e.$$.fragment),l=K(),t=g("div"),s=le(n),this.h()},l(i){Z(e.$$.fragment,i),l=T(i),t=h(i,"DIV",{class:!0});var u=v(t);s=re(u,n),u.forEach(c),this.h()},h(){m(t,"class","flex items-center")},m(i,u){J(e,i,u),H(i,l,u),H(i,t,u),d(t,s),o=!0},p(i,u){(!o||u&4)&&n!==(n=i[2].t("Delete")+"")&&se(s,n)},i(i){o||(x(e.$$.fragment,i),o=!0)},o(i){N(e.$$.fragment,i),o=!1},d(i){i&&(c(l),c(t)),Q(e,i)}}}function wt(r){let e,l;return e=new ut({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  font-medium cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[$t]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){L(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){J(e,t,n),l=!0},p(t,n){const s={};n&1028&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function bt(r){let e,l,t;return l=new mt({props:{class:"w-full max-w-[160px] rounded-xl px-1 py-1.5 border border-gray-300/30 dark:border-gray-700/50 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:-2,side:"bottom",align:"end",transition:ct,$$slots:{default:[wt]},$$scope:{ctx:r}}}),{c(){e=g("div"),L(l.$$.fragment),this.h()},l(n){e=h(n,"DIV",{slot:!0});var s=v(e);Z(l.$$.fragment,s),s.forEach(c),this.h()},h(){m(e,"slot","content")},m(n,s){H(n,e,s),J(l,e,null),t=!0},p(n,s){const o={};s&1028&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(x(l.$$.fragment,n),t=!0)},o(n){N(l.$$.fragment,n),t=!1},d(n){n&&c(e),Q(l)}}}function kt(r){let e,l,t;function n(o){r[8](o)}let s={align:"end",$$slots:{content:[bt],default:[vt]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.show=r[1]),e=new ft({props:s}),He.push(()=>qe(e,"show",n)),e.$on("change",r[9]),{c(){L(e.$$.fragment)},l(o){Z(e.$$.fragment,o)},m(o,i){J(e,o,i),t=!0},p(o,[i]){const u={};i&1030&&(u.$$scope={dirty:i,ctx:o}),!l&&i&2&&(l=!0,u.show=o[1],Oe(()=>l=!1)),e.$set(u)},i(o){t||(x(e.$$.fragment,o),t=!0)},o(o){N(e.$$.fragment,o),t=!1},d(o){Q(e,o)}}}function Et(r,e,l){let t,{$$slots:n={},$$scope:s}=e;const o=Ze(),i=Pe("i18n");he(r,i,$=>l(2,t=$));let{onClose:u=()=>{}}=e,k=!1;const A=()=>{o("delete")},w=$=>{$.stopPropagation(),l(1,k=!0)};function B($){k=$,l(1,k)}const O=$=>{$.detail===!1&&u()};return r.$$set=$=>{"onClose"in $&&l(0,u=$.onClose),"$$scope"in $&&l(10,s=$.$$scope)},[u,k,t,o,i,n,A,w,B,O,s]}class yt extends ye{constructor(e){super(),De(this,e,Et,kt,Ee,{onClose:0})}}function Ae(r,e,l){const t=r.slice();return t[16]=e[l],t}function Dt(r){let e,l;return e=new Le({props:{type:"success",content:r[4].t("Collection")}}),{c(){L(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){J(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.content=t[4].t("Collection")),e.$set(s)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function It(r){let e,l;return e=new Le({props:{type:"muted",content:r[4].t("Document")}}),{c(){L(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){J(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.content=t[4].t("Document")),e.$set(s)},i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}function je(r){let e,l,t,n,s=r[16].name+"",o,i,u,k,A,w,B,O=r[16].description+"",$,U,E,j,D,f,S,C,M=r[4].t("Updated")+"",R,ne,ee=ke(r[16].updated_at*1e3).fromNow()+"",X,oe,z,te,ae;function ce(){return r[14](r[16])}k=new yt({}),k.$on("delete",ce);const q=[It,Dt],P=[];function F(I,V){var b,G;return(G=(b=I[16])==null?void 0:b.meta)!=null&&G.document?0:1}D=F(r),f=P[D]=q[D](r);function fe(){return r[15](r[16])}return{c(){e=g("button"),l=g("div"),t=g("div"),n=g("div"),o=le(s),i=K(),u=g("div"),L(k.$$.fragment),A=K(),w=g("div"),B=g("div"),$=le(O),U=K(),E=g("div"),j=g("div"),f.c(),S=K(),C=g("div"),R=le(M),ne=K(),X=le(ee),oe=K(),this.h()},l(I){e=h(I,"BUTTON",{class:!0});var V=v(e);l=h(V,"DIV",{class:!0});var b=v(l);t=h(b,"DIV",{class:!0});var G=v(t);n=h(G,"DIV",{class:!0});var ue=v(n);o=re(ue,s),ue.forEach(c),i=T(G),u=h(G,"DIV",{class:!0});var pe=v(u);Z(k.$$.fragment,pe),pe.forEach(c),G.forEach(c),A=T(b),w=h(b,"DIV",{class:!0});var ie=v(w);B=h(ie,"DIV",{class:!0});var Y=v(B);$=re(Y,O),Y.forEach(c),U=T(ie),E=h(ie,"DIV",{class:!0});var _=v(E);j=h(_,"DIV",{});var _e=v(j);f.l(_e),_e.forEach(c),S=T(_),C=h(_,"DIV",{class:!0});var a=v(C);R=re(a,M),ne=T(a),X=re(a,ee),a.forEach(c),_.forEach(c),ie.forEach(c),b.forEach(c),oe=T(V),V.forEach(c),this.h()},h(){m(n,"class","font-semibold line-clamp-1 h-fit"),m(u,"class","flex self-center"),m(t,"class","flex items-center justify-between -mt-1"),m(B,"class","text-xs overflow-hidden text-ellipsis line-clamp-1"),m(C,"class","text-xs text-gray-500 line-clamp-1"),m(E,"class","mt-5 flex justify-between"),m(w,"class","self-center flex-1"),m(l,"class","w-full"),m(e,"class","flex space-x-4 cursor-pointer text-left w-full px-4 py-3 border border-gray-50 dark:border-gray-850 dark:hover:border-gray-800 hover:bg-gray-50 dark:hover:bg-gray-850 transition rounded-xl")},m(I,V){H(I,e,V),d(e,l),d(l,t),d(t,n),d(n,o),d(t,i),d(t,u),J(k,u,null),d(l,A),d(l,w),d(w,B),d(B,$),d(w,U),d(w,E),d(E,j),P[D].m(j,null),d(E,S),d(E,C),d(C,R),d(C,ne),d(C,X),d(e,oe),z=!0,te||(ae=ve(e,"click",fe),te=!0)},p(I,V){r=I,(!z||V&8)&&s!==(s=r[16].name+"")&&se(o,s),(!z||V&8)&&O!==(O=r[16].description+"")&&se($,O);let b=D;D=F(r),D===b?P[D].p(r,V):(Fe(),N(P[b],1,1,()=>{P[b]=null}),Ge(),f=P[D],f?f.p(r,V):(f=P[D]=q[D](r),f.c()),x(f,1),f.m(j,null)),(!z||V&16)&&M!==(M=r[4].t("Updated")+"")&&se(R,M),(!z||V&8)&&ee!==(ee=ke(r[16].updated_at*1e3).fromNow()+"")&&se(X,ee)},i(I){z||(x(k.$$.fragment,I),x(f),z=!0)},o(I){N(k.$$.fragment,I),N(f),z=!1},d(I){I&&c(e),Q(k),P[D].d(),te=!1,ae()}}}function Vt(r){let e,l,t,n,s,o,i,u,k='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',A,w,B,O,$,U,E,j,D,f,S,C,M,R=r[4].t("Knowledge")+"",ne,ee,X,oe,z,te=r[3].length+"",ae,ce,q,P,F,fe,I=r[4].t("Use '#' in the prompt input to load and include your knowledge.")+"",V,b,G,ue;document.title=e=`
		`+r[4].t("Knowledge")+" | "+r[5]+`
	`;function pe(a){r[10](a)}let ie={};r[2]!==void 0&&(ie.show=r[2]),t=new dt({props:ie}),He.push(()=>qe(t,"show",pe)),t.$on("confirm",r[11]);let Y=Ue(r[3]),_=[];for(let a=0;a<Y.length;a+=1)_[a]=je(Ae(r,Y,a));const _e=a=>N(_[a],1,1,()=>{_[a]=null});return{c(){l=K(),L(t.$$.fragment),s=K(),o=g("div"),i=g("div"),u=g("div"),u.innerHTML=k,A=K(),w=g("input"),O=K(),$=g("div"),U=g("button"),E=Ke("svg"),j=Ke("path"),f=K(),S=g("div"),C=g("div"),M=g("div"),ne=le(R),ee=K(),X=g("div"),oe=K(),z=g("span"),ae=le(te),ce=K(),q=g("div");for(let a=0;a<_.length;a+=1)_[a].c();P=K(),F=g("div"),fe=le("â“˜ "),V=le(I),this.h()},l(a){Ye("svelte-igp99u",document.head).forEach(c),l=T(a),Z(t.$$.fragment,a),s=T(a),o=h(a,"DIV",{class:!0});var W=v(o);i=h(W,"DIV",{class:!0});var y=v(i);u=h(y,"DIV",{class:!0,"data-svelte-h":!0}),et(u)!=="svelte-v38fm1"&&(u.innerHTML=k),A=T(y),w=h(y,"INPUT",{class:!0,placeholder:!0}),y.forEach(c),O=T(W),$=h(W,"DIV",{});var me=v($);U=h(me,"BUTTON",{class:!0,"aria-label":!0});var Ie=v(U);E=Te(Ie,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var Ve=v(E);j=Te(Ve,"path",{d:!0}),v(j).forEach(c),Ve.forEach(c),Ie.forEach(c),me.forEach(c),W.forEach(c),f=T(a),S=h(a,"DIV",{class:!0});var Ce=v(S);C=h(Ce,"DIV",{class:!0});var xe=v(C);M=h(xe,"DIV",{class:!0});var de=v(M);ne=re(de,R),ee=T(de),X=h(de,"DIV",{class:!0}),v(X).forEach(c),oe=T(de),z=h(de,"SPAN",{class:!0});var Be=v(z);ae=re(Be,te),Be.forEach(c),de.forEach(c),xe.forEach(c),Ce.forEach(c),ce=T(a),q=h(a,"DIV",{class:!0});var Me=v(q);for(let we=0;we<_.length;we+=1)_[we].l(Me);Me.forEach(c),P=T(a),F=h(a,"DIV",{class:!0});var $e=v(F);fe=re($e,"â“˜ "),V=re($e,I),$e.forEach(c),this.h()},h(){m(u,"class","self-center ml-1 mr-3"),m(w,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),m(w,"placeholder",B=r[4].t("Search Knowledge")),m(i,"class","flex flex-1"),m(j,"d","M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"),m(E,"xmlns","http://www.w3.org/2000/svg"),m(E,"viewBox","0 0 16 16"),m(E,"fill","currentColor"),m(E,"class","w-4 h-4"),m(U,"class","px-2 py-2 rounded-xl border border-gray-50 dark:border-gray-800 dark:border-0 hover:bg-gray-100 dark:bg-gray-800 dark:hover:bg-gray-700 transition font-medium text-sm flex items-center space-x-1"),m(U,"aria-label",D=r[4].t("Create Knowledge")),m(o,"class","flex w-full space-x-2 mb-2.5"),m(X,"class","flex self-center w-[1px] h-6 mx-2.5 bg-gray-50 dark:bg-gray-850"),m(z,"class","text-base font-medium text-gray-500 dark:text-gray-300"),m(M,"class","flex md:self-center text-base font-medium px-0.5"),m(C,"class","flex justify-between items-center"),m(S,"class","mb-3.5"),m(q,"class","my-3 mb-5 grid md:grid-cols-2 lg:grid-cols-3 gap-2"),m(F,"class","text-gray-500 text-xs mt-1 mb-2")},m(a,p){H(a,l,p),J(t,a,p),H(a,s,p),H(a,o,p),d(o,i),d(i,u),d(i,A),d(i,w),Ne(w,r[0]),d(o,O),d(o,$),d($,U),d(U,E),d(E,j),H(a,f,p),H(a,S,p),d(S,C),d(C,M),d(M,ne),d(M,ee),d(M,X),d(M,oe),d(M,z),d(z,ae),H(a,ce,p),H(a,q,p);for(let W=0;W<_.length;W+=1)_[W]&&_[W].m(q,null);H(a,P,p),H(a,F,p),d(F,fe),d(F,V),b=!0,G||(ue=[ve(w,"input",r[12]),ve(U,"click",r[13])],G=!0)},p(a,[p]){(!b||p&48)&&e!==(e=`
		`+a[4].t("Knowledge")+" | "+a[5]+`
	`)&&(document.title=e);const W={};if(!n&&p&4&&(n=!0,W.show=a[2],Oe(()=>n=!1)),t.$set(W),(!b||p&16&&B!==(B=a[4].t("Search Knowledge")))&&m(w,"placeholder",B),p&1&&w.value!==a[0]&&Ne(w,a[0]),(!b||p&16&&D!==(D=a[4].t("Create Knowledge")))&&m(U,"aria-label",D),(!b||p&16)&&R!==(R=a[4].t("Knowledge")+"")&&se(ne,R),(!b||p&8)&&te!==(te=a[3].length+"")&&se(ae,te),p&30){Y=Ue(a[3]);let y;for(y=0;y<Y.length;y+=1){const me=Ae(a,Y,y);_[y]?(_[y].p(me,p),x(_[y],1)):(_[y]=je(me),_[y].c(),x(_[y],1),_[y].m(q,null))}for(Fe(),y=Y.length;y<_.length;y+=1)_e(y);Ge()}(!b||p&16)&&I!==(I=a[4].t("Use '#' in the prompt input to load and include your knowledge.")+"")&&se(V,I)},i(a){if(!b){x(t.$$.fragment,a);for(let p=0;p<Y.length;p+=1)x(_[p]);b=!0}},o(a){N(t.$$.fragment,a),_=_.filter(Boolean);for(let p=0;p<_.length;p+=1)N(_[p]);b=!1},d(a){a&&(c(l),c(s),c(o),c(f),c(S),c(ce),c(q),c(P),c(F)),Q(t,a),tt(_,a),G=!1,lt(ue)}}}function Ct(r,e,l){let t,n,s;he(r,ge,f=>l(9,n=f)),he(r,ot,f=>l(5,s=f)),ke.extend(st);const o=Pe("i18n");he(r,o,f=>l(4,t=f));let i="",u=null,k=!1,A=null,w=[];const B=async f=>{await at(localStorage.token,f.id).catch(C=>{be.error(C)})&&(ge.set(await Se(localStorage.token)),be.success(t.t("Knowledge deleted successfully.")))};rt(async()=>{ge.set(await Se(localStorage.token)),ge.subscribe(f=>{l(8,A=new nt(f,{keys:["name","description"]}))})});function O(f){k=f,l(2,k)}const $=()=>{B(u)};function U(){i=this.value,l(0,i)}const E=()=>{ze("/workspace/knowledge/create")},j=f=>{l(1,u=f),l(2,k=!0)},D=f=>{var S;(S=f==null?void 0:f.meta)!=null&&S.document?be.error(t.t("Only collections can be edited, create a new knowledge base to edit/add documents.")):ze(`/workspace/knowledge/${f.id}`)};return r.$$.update=()=>{r.$$.dirty&769&&A&&l(3,w=i?A.search(i).map(f=>f.item):n)},[i,u,k,w,t,s,o,B,A,n,O,$,U,E,j,D]}class xt extends ye{constructor(e){super(),De(this,e,Ct,Vt,Ee,{})}}function Bt(r){let e,l;return e=new xt({}),{c(){L(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,n){J(e,t,n),l=!0},p:We,i(t){l||(x(e.$$.fragment,t),l=!0)},o(t){N(e.$$.fragment,t),l=!1},d(t){Q(e,t)}}}class Qt extends ye{constructor(e){super(),De(this,e,null,Bt,Ee,{})}}export{Qt as component};
//# sourceMappingURL=17.Dvw9GWFq.js.map
