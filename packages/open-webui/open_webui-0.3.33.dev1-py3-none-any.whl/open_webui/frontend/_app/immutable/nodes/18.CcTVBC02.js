import{s as pe,e as b,c as k,a as y,d as u,f,i as z,K as bt,F as Ae,k as H,o as K,g as w,y as Ee,z as Ie,n as Z,A as me,D as _e,p as Ue,j as Fe,H as We,u as le,t as se,b as oe,h as ae,B as $e,C as kt,E as Se,q as yt,S as Et,l as je}from"../chunks/scheduler.UhqRSRjm.js";import{S as we,i as be,t as D,g as ue,c as de,a as F,b as U,d as W,m as L,e as O,f as ge}from"../chunks/index.nGViVUxX.js";import{F as It}from"../chunks/fuse.CU2r43ac.js";import{t as q}from"../chunks/Toaster.svelte_svelte_type_style_lang.BewAq8ge.js";import{R as Le,V as Dt,A as xt,P as Vt,a as Qe,D as Ft,b as St,E as Tt}from"../chunks/EllipsisVertical.B0D6hup2.js";import{g as Nt}from"../chunks/entry.D2WXDOxn.js";import{p as Ct}from"../chunks/stores.taQalG1t.js";import{s as zt,k as Mt}from"../chunks/index.D9tMcTAs.js";import{u as Bt,a as Pt}from"../chunks/index.CYcI1Xyd.js";import{a as At,r as Ut,b as Wt,e as Lt,u as Ot,f as jt,g as Ht}from"../chunks/index.DYtKLRuw.js";import{t as Kt}from"../chunks/index.CFHS_Oow.js";import{k as He,v as qt}from"../chunks/index.JYrzKi4u.js";import{S as Rt}from"../chunks/Spinner.DktDkmHO.js";import{e as Ke}from"../chunks/each.BhHg6he0.js";import{F as Xt}from"../chunks/FileItem.Db9-_OXc.js";import"../chunks/updater.CZKoXgFY.js";import{D as Yt,M as Be}from"../chunks/Dropdown.Dr-AhyTQ.js";import{b as Gt}from"../chunks/menu-trigger.DQYUBDaN.js";import{T as Pe,f as Jt}from"../chunks/Tooltip.z_aNDJGq.js";import{A as Qt}from"../chunks/ArrowUpCircle.DkbQFNAN.js";import{F as Zt}from"../chunks/FolderOpen.CFbtStIM.js";import"../chunks/dayjs.min.CnqrW7zs.js";import{M as el}from"../chunks/Modal.D4rI9Xi0.js";import{X as tl}from"../chunks/XMark.NL8oSBTn.js";import{C as ll}from"../chunks/ConfirmDialog.BuMPHVd5.js";import{C as Ze}from"../chunks/ChevronLeft.D89RxtN6.js";function qe(o,e,t){const l=o.slice();return l[5]=e[t],l}function Re(o){var a,i,c,_,v,m;let e,t,l,r;function n(){return o[3](o[5])}function s(){return o[4](o[5])}return t=new Xt({props:{className:"w-full",colorClassName:(o[0]===o[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",file:o[5],name:((a=o[5])==null?void 0:a.name)??((c=(i=o[5])==null?void 0:i.meta)==null?void 0:c.name),type:"file",size:((_=o[5])==null?void 0:_.size)??((m=(v=o[5])==null?void 0:v.meta)==null?void 0:m.size)??"",loading:o[5].status==="uploading",dismissible:!0}}),t.$on("click",n),t.$on("dismiss",s),{c(){e=b("div"),U(t.$$.fragment),l=H(),this.h()},l(p){e=k(p,"DIV",{class:!0});var E=y(e);W(t.$$.fragment,E),l=K(E),E.forEach(u),this.h()},h(){f(e,"class","mt-1 px-2")},m(p,E){z(p,e,E),L(t,e,null),w(e,l),r=!0},p(p,E){var I,C,S,V,x,T;o=p;const $={};E&3&&($.colorClassName=(o[0]===o[5].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),E&2&&($.file=o[5]),E&2&&($.name=((I=o[5])==null?void 0:I.name)??((S=(C=o[5])==null?void 0:C.meta)==null?void 0:S.name)),E&2&&($.size=((V=o[5])==null?void 0:V.size)??((T=(x=o[5])==null?void 0:x.meta)==null?void 0:T.size)??""),E&2&&($.loading=o[5].status==="uploading"),t.$set($)},i(p){r||(D(t.$$.fragment,p),r=!0)},o(p){F(t.$$.fragment,p),r=!1},d(p){p&&u(e),O(t)}}}function rl(o){let e,t,l=Ke(o[1]),r=[];for(let s=0;s<l.length;s+=1)r[s]=Re(qe(o,l,s));const n=s=>F(r[s],1,1,()=>{r[s]=null});return{c(){e=b("div");for(let s=0;s<r.length;s+=1)r[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var a=y(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(u),this.h()},h(){f(e,"class","max-h-full flex flex-col w-full")},m(s,a){z(s,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(s,[a]){if(a&7){l=Ke(s[1]);let i;for(i=0;i<l.length;i+=1){const c=qe(s,l,i);r[i]?(r[i].p(c,a),D(r[i],1)):(r[i]=Re(c),r[i].c(),D(r[i],1),r[i].m(e,null))}for(ue(),i=l.length;i<r.length;i+=1)n(i);de()}},i(s){if(!t){for(let a=0;a<l.length;a+=1)D(r[a]);t=!0}},o(s){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)F(r[a]);t=!1},d(s){s&&u(e),bt(r,s)}}}function nl(o,e,t){const l=Ae();let{selectedFileId:r=null}=e,{files:n=[]}=e;const s=i=>{i.status!=="uploading"&&l("click",i.id)},a=i=>{i.status!=="uploading"&&l("delete",i.id)};return o.$$set=i=>{"selectedFileId"in i&&t(0,r=i.selectedFileId),"files"in i&&t(1,n=i.files)},[r,n,l,s,a]}class sl extends we{constructor(e){super(),be(this,e,nl,rl,pe,{selectedFileId:0,files:1})}}function ol(o){let e,t;return{c(){e=Ee("svg"),t=Ee("path"),this.h()},l(l){e=Ie(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=y(e);t=Ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(u),r.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",o[1]),f(e,"stroke","currentColor"),f(e,"class",o[0])},m(l,r){z(l,e,r),w(e,t)},p(l,[r]){r&2&&f(e,"stroke-width",l[1]),r&1&&f(e,"class",l[0])},i:Z,o:Z,d(l){l&&u(e)}}}function al(o,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return o.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class il extends we{constructor(e){super(),be(this,e,al,ol,pe,{className:0,strokeWidth:1})}}function cl(o){let e,t;return{c(){e=Ee("svg"),t=Ee("path"),this.h()},l(l){e=Ie(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=y(e);t=Ie(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),y(t).forEach(u),r.forEach(u),this.h()},h(){f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"fill","none"),f(e,"viewBox","0 0 24 24"),f(e,"stroke-width",o[1]),f(e,"stroke","currentColor"),f(e,"class",o[0])},m(l,r){z(l,e,r),w(e,t)},p(l,[r]){r&2&&f(e,"stroke-width",l[1]),r&1&&f(e,"class",l[0])},i:Z,o:Z,d(l){l&&u(e)}}}function fl(o,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return o.$$set=n=>{"className"in n&&t(0,l=n.className),"strokeWidth"in n&&t(1,r=n.strokeWidth)},[l,r]}class ul extends we{constructor(e){super(),be(this,e,fl,cl,pe,{className:0,strokeWidth:1})}}function dl(o){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=b("button"),e.innerHTML=t,this.h()},l(n){e=k(n,"BUTTON",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){f(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(n,s){z(n,e,s),l||(r=le(e,"click",o[9]),l=!0)},p:Z,d(n){n&&u(e),l=!1,r()}}}function pl(o){let e,t;return e=new Pe({props:{content:o[2].t("Add Content"),$$slots:{default:[dl]},$$scope:{ctx:o}}}),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&4&&(n.content=l[2].t("Add Content")),r&4098&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function hl(o){let e,t,l,r=o[2].t("Upload files")+"",n,s;return e=new Qt({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=y(l);n=oe(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){L(e,a,i),z(a,t,i),z(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Upload files")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(u(t),u(l)),O(e,a)}}}function ml(o){let e,t,l,r=o[2].t("Upload directory")+"",n,s;return e=new Zt({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=y(l);n=oe(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){L(e,a,i),z(a,t,i),z(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(u(t),u(l)),O(e,a)}}}function _l(o){let e,t,l,r=o[2].t("Sync directory")+"",n,s;return e=new ul({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=y(l);n=oe(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){L(e,a,i),z(a,t,i),z(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(u(t),u(l)),O(e,a)}}}function gl(o){let e,t;return e=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[_l]},$$scope:{ctx:o}}}),e.$on("click",o[7]),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&4100&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function vl(o){let e,t,l,r=o[2].t("Add text content")+"",n,s;return e=new il({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=H(),l=b("div"),n=se(r),this.h()},l(a){W(e.$$.fragment,a),t=K(a),l=k(a,"DIV",{class:!0});var i=y(l);n=oe(i,r),i.forEach(u),this.h()},h(){f(l,"class","flex items-center")},m(a,i){L(e,a,i),z(a,t,i),z(a,l,i),w(l,n),s=!0},p(a,i){(!s||i&4)&&r!==(r=a[2].t("Add text content")+"")&&ae(n,r)},i(a){s||(D(e.$$.fragment,a),s=!0)},o(a){F(e.$$.fragment,a),s=!1},d(a){a&&(u(t),u(l)),O(e,a)}}}function $l(o){let e,t,l,r,n,s,a,i;return e=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[hl]},$$scope:{ctx:o}}}),e.$on("click",o[5]),l=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[ml]},$$scope:{ctx:o}}}),l.$on("click",o[6]),n=new Pe({props:{content:o[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[gl]},$$scope:{ctx:o}}}),a=new Be({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[vl]},$$scope:{ctx:o}}}),a.$on("click",o[8]),{c(){U(e.$$.fragment),t=H(),U(l.$$.fragment),r=H(),U(n.$$.fragment),s=H(),U(a.$$.fragment)},l(c){W(e.$$.fragment,c),t=K(c),W(l.$$.fragment,c),r=K(c),W(n.$$.fragment,c),s=K(c),W(a.$$.fragment,c)},m(c,_){L(e,c,_),z(c,t,_),L(l,c,_),z(c,r,_),L(n,c,_),z(c,s,_),L(a,c,_),i=!0},p(c,_){const v={};_&4100&&(v.$$scope={dirty:_,ctx:c}),e.$set(v);const m={};_&4100&&(m.$$scope={dirty:_,ctx:c}),l.$set(m);const p={};_&4&&(p.content=c[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),_&4100&&(p.$$scope={dirty:_,ctx:c}),n.$set(p);const E={};_&4100&&(E.$$scope={dirty:_,ctx:c}),a.$set(E)},i(c){i||(D(e.$$.fragment,c),D(l.$$.fragment,c),D(n.$$.fragment,c),D(a.$$.fragment,c),i=!0)},o(c){F(e.$$.fragment,c),F(l.$$.fragment,c),F(n.$$.fragment,c),F(a.$$.fragment,c),i=!1},d(c){c&&(u(t),u(r),u(s)),O(e,c),O(l,c),O(n,c),O(a,c)}}}function wl(o){let e,t,l;return t=new Gt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow",sideOffset:4,side:"bottom",align:"end",transition:Jt,$$slots:{default:[$l]},$$scope:{ctx:o}}}),{c(){e=b("div"),U(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{slot:!0});var n=y(e);W(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"slot","content")},m(r,n){z(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n&4100&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),O(t)}}}function bl(o){let e,t,l;function r(s){o[10](s)}let n={align:"end",$$slots:{content:[wl],default:[pl]},$$scope:{ctx:o}};return o[1]!==void 0&&(n.show=o[1]),e=new Yt({props:n}),me.push(()=>ge(e,"show",r)),e.$on("change",o[11]),{c(){U(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:s}),!t&&a&2&&(t=!0,i.show=s[1],_e(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){O(e,s)}}}function kl(o,e,t){let l;const r=Ae(),n=Ue("i18n");Fe(o,n,$=>t(2,l=$));let{onClose:s=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},c=()=>{r("upload",{type:"directory"})},_=()=>{r("sync",{type:"directory"})},v=()=>{r("upload",{type:"text"})},m=$=>{$.stopPropagation(),t(1,a=!0)};function p($){a=$,t(1,a)}const E=$=>{$.detail===!1&&s()};return o.$$set=$=>{"onClose"in $&&t(0,s=$.onClose)},[s,a,l,r,n,i,c,_,v,m,p,E]}class yl extends we{constructor(e){super(),be(this,e,kl,bl,pe,{onClose:0})}}function El(o){let e,t,l;return{c(){e=Ee("svg"),t=Ee("path"),l=Ee("path"),this.h()},l(r){e=Ie(r,"svg",{xmlns:!0,viewBox:!0,fill:!0,class:!0});var n=y(e);t=Ie(n,"path",{d:!0}),y(t).forEach(u),l=Ie(n,"path",{d:!0}),y(l).forEach(u),n.forEach(u),this.h()},h(){f(t,"d","M7 4a3 3 0 0 1 6 0v6a3 3 0 1 1-6 0V4Z"),f(l,"d","M5.5 9.643a.75.75 0 0 0-1.5 0V10c0 3.06 2.29 5.585 5.25 5.954V17.5h-1.5a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-1.5v-1.546A6.001 6.001 0 0 0 16 10v-.357a.75.75 0 0 0-1.5 0V10a4.5 4.5 0 0 1-9 0v-.357Z"),f(e,"xmlns","http://www.w3.org/2000/svg"),f(e,"viewBox","0 0 20 20"),f(e,"fill","currentColor"),f(e,"class",o[0])},m(r,n){z(r,e,n),w(e,t),w(e,l)},p(r,[n]){n&1&&f(e,"class",r[0])},i:Z,o:Z,d(r){r&&u(e)}}}function Il(o,e,t){let{className:l="size-4"}=e;return o.$$set=r=>{"className"in r&&t(0,l=r.className)},[l]}class Dl extends we{constructor(e){super(),be(this,e,Il,El,pe,{className:0})}}function xl(o){let e,t;return e=new Pe({props:{content:o[4].t("Voice Input"),$$slots:{default:[Fl]},$$scope:{ctx:o}}}),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r&16&&(n.content=l[4].t("Voice Input")),r&65560&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Vl(o){let e,t,l,r;function n(a){o[10](a)}let s={className:"p-1"};return o[3]!==void 0&&(s.recording=o[3]),t=new Dt({props:s}),me.push(()=>ge(t,"recording",n)),t.$on("cancel",o[11]),t.$on("confirm",o[12]),{c(){e=b("div"),U(t.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=y(e);W(t.$$.fragment,i),i.forEach(u),this.h()},h(){f(e,"class","max-w-full w-64")},m(a,i){z(a,e,i),L(t,e,null),r=!0},p(a,i){const c={};!l&&i&8&&(l=!0,c.recording=a[3],_e(()=>l=!1)),t.$set(c)},i(a){r||(D(t.$$.fragment,a),r=!0)},o(a){F(t.$$.fragment,a),r=!1},d(a){a&&u(e),O(t)}}}function Fl(o){let e,t,l,r,n;return t=new Dl({props:{className:"size-5"}}),{c(){e=b("button"),U(t.$$.fragment),this.h()},l(s){e=k(s,"BUTTON",{class:!0,type:!0});var a=y(e);W(t.$$.fragment,a),a.forEach(u),this.h()},h(){f(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),f(e,"type","button")},m(s,a){z(s,e,a),L(t,e,null),l=!0,r||(n=le(e,"click",o[13]),r=!0)},p:Z,i(s){l||(D(t.$$.fragment,s),l=!0)},o(s){F(t.$$.fragment,s),l=!1},d(s){s&&u(e),O(t),r=!1,n()}}}function Sl(o){let e,t=o[4].t("Save")+"",l;return{c(){e=b("button"),l=se(t),this.h()},l(r){e=k(r,"BUTTON",{class:!0,type:!0});var n=y(e);l=oe(n,t),n.forEach(u),this.h()},h(){f(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),f(e,"type","submit")},m(r,n){z(r,e,n),w(e,l)},p(r,n){n&16&&t!==(t=r[4].t("Save")+"")&&ae(l,t)},d(r){r&&u(e)}}}function Tl(o){let e,t,l,r,n,s,a,i,c,_,v,m,p,E,$,I,C,S,V,x,T,N,X,d,g,B,R;l=new tl({props:{className:"size-3.5"}});function J(P){o[9](P)}let ee={placeholder:o[4].t("Write something...")};o[2]!==void 0&&(ee.value=o[2]),$=new Le({props:ee}),me.push(()=>ge($,"value",J));const re=[Vl,xl],te=[];function ke(P,G){return P[3]?0:1}return x=ke(o),T=te[x]=re[x](o),d=new Pe({props:{content:o[4].t("Save"),$$slots:{default:[Sl]},$$scope:{ctx:o}}}),{c(){e=b("div"),t=b("button"),U(l.$$.fragment),r=H(),n=b("div"),s=b("form"),a=b("div"),i=b("div"),c=b("div"),_=b("div"),v=b("input"),p=H(),E=b("div"),U($.$$.fragment),C=H(),S=b("div"),V=b("div"),T.c(),N=H(),X=b("div"),U(d.$$.fragment),this.h()},l(P){e=k(P,"DIV",{class:!0});var G=y(e);t=k(G,"BUTTON",{class:!0,type:!0});var ie=y(t);W(l.$$.fragment,ie),ie.forEach(u),G.forEach(u),r=K(P),n=k(P,"DIV",{class:!0});var ce=y(n);s=k(ce,"FORM",{class:!0});var ne=y(s);a=k(ne,"DIV",{class:!0});var xe=y(a);i=k(xe,"DIV",{class:!0});var ye=y(i);c=k(ye,"DIV",{class:!0});var Te=y(c);_=k(Te,"DIV",{class:!0});var Ne=y(_);v=k(Ne,"INPUT",{class:!0,type:!0,placeholder:!0}),Ne.forEach(u),Te.forEach(u),p=K(ye),E=k(ye,"DIV",{class:!0});var Ce=y(E);W($.$$.fragment,Ce),Ce.forEach(u),ye.forEach(u),xe.forEach(u),C=K(ne),S=k(ne,"DIV",{class:!0});var De=y(S);V=k(De,"DIV",{class:!0});var ze=y(V);T.l(ze),ze.forEach(u),N=K(De),X=k(De,"DIV",{class:!0});var Me=y(X);W(d.$$.fragment,Me),Me.forEach(u),De.forEach(u),ne.forEach(u),ce.forEach(u),this.h()},h(){f(t,"class","self-center dark:text-white"),f(t,"type","button"),f(e,"class","absolute top-0 right-0 p-5"),f(v,"class","w-full text-3xl font-semibold bg-transparent outline-none svelte-1vx7r9s"),f(v,"type","text"),f(v,"placeholder",m=o[4].t("Title")),v.required=!0,f(_,"class","w-full"),f(c,"class","flex-shrink-0 w-full flex justify-between items-center"),f(E,"class","flex-1 w-full h-full"),f(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),f(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),f(V,"class",""),f(X,"class","flex-shrink-0"),f(S,"class","flex flex-row items-center justify-end text-sm font-medium flex-shrink-0 mt-1 p-4 gap-1.5"),f(s,"class","flex flex-col w-full h-full"),f(n,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(P,G){z(P,e,G),w(e,t),L(l,t,null),z(P,r,G),z(P,n,G),w(n,s),w(s,a),w(a,i),w(i,c),w(c,_),w(_,v),$e(v,o[1]),w(i,p),w(i,E),L($,E,null),w(s,C),w(s,S),w(S,V),te[x].m(V,null),w(S,N),w(S,X),L(d,X,null),g=!0,B||(R=[le(t,"click",o[7]),le(v,"input",o[8]),le(s,"submit",kt(o[14]))],B=!0)},p(P,G){(!g||G&16&&m!==(m=P[4].t("Title")))&&f(v,"placeholder",m),G&2&&v.value!==P[1]&&$e(v,P[1]);const ie={};G&16&&(ie.placeholder=P[4].t("Write something...")),!I&&G&4&&(I=!0,ie.value=P[2],_e(()=>I=!1)),$.$set(ie);let ce=x;x=ke(P),x===ce?te[x].p(P,G):(ue(),F(te[ce],1,1,()=>{te[ce]=null}),de(),T=te[x],T?T.p(P,G):(T=te[x]=re[x](P),T.c()),D(T,1),T.m(V,null));const ne={};G&16&&(ne.content=P[4].t("Save")),G&65552&&(ne.$$scope={dirty:G,ctx:P}),d.$set(ne)},i(P){g||(D(l.$$.fragment,P),D($.$$.fragment,P),D(T),D(d.$$.fragment,P),g=!0)},o(P){F(l.$$.fragment,P),F($.$$.fragment,P),F(T),F(d.$$.fragment,P),g=!1},d(P){P&&(u(e),u(r),u(n)),O(l),O($),te[x].d(),O(d),B=!1,Se(R)}}}function Nl(o){let e,t,l;function r(s){o[15](s)}let n={size:"full",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Tl]},$$scope:{ctx:o}};return o[0]!==void 0&&(n.show=o[0]),e=new el({props:n}),me.push(()=>ge(e,"show",r)),{c(){U(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:s}),!t&&a&1&&(t=!0,i.show=s[0],_e(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){O(e,s)}}}function Cl(o,e,t){let l;const r=Ue("i18n");Fe(o,r,V=>t(4,l=V));const n=Ae();let{show:s=!1}=e,a="Untitled",i="",c=!1;const _=()=>{t(0,s=!1)};function v(){a=this.value,t(1,a)}function m(V){i=V,t(2,i)}function p(V){c=V,t(3,c)}const E=()=>{t(3,c=!1)},$=V=>{const x=V.detail;t(2,i=`${i}${x} `),t(3,c=!1)},I=async()=>{try{let V=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(x){return q.error(l.t("Permission denied when accessing microphone: {{error}}",{error:x})),null});V&&(t(3,c=!0),V.getTracks().forEach(T=>T.stop())),V=null}catch{q.error(l.t("Permission denied when accessing microphone"))}},C=()=>{if(a.trim()===""||i.trim()===""){q.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}n("submit",{name:a,content:i}),t(0,s=!1),t(1,a=""),t(2,i="")};function S(V){s=V,t(0,s)}return o.$$set=V=>{"show"in V&&t(0,s=V.show)},[s,a,i,c,l,r,n,_,v,m,p,E,$,I,C,S]}class zl extends we{constructor(e){super(),be(this,e,Cl,Nl,pe,{show:0})}}function Xe(o){let e,t,l,r,n,s,a;return n=new xt({props:{$$slots:{default:[Ml]},$$scope:{ctx:o}}}),{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),U(n.$$.fragment),this.h()},l(i){e=k(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var c=y(e);t=k(c,"DIV",{class:!0});var _=y(t);l=k(_,"DIV",{class:!0});var v=y(l);r=k(v,"DIV",{class:!0});var m=y(r);W(n.$$.fragment,m),m.forEach(u),v.forEach(u),_.forEach(u),c.forEach(u),this.h()},h(){f(r,"class","max-w-md"),f(l,"class","m-auto pt-64 flex flex-col justify-center"),f(t,"class","absolute w-full h-full backdrop-blur bg-gray-800/40 flex justify-center"),f(e,"class",s="fixed "+(o[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),f(e,"id","dropzone"),f(e,"role","region"),f(e,"aria-label","Drag and Drop Container")},m(i,c){z(i,e,c),w(e,t),w(t,l),w(l,r),L(n,r,null),a=!0},p(i,c){const _={};c[2]&2&&(_.$$scope={dirty:c,ctx:i}),n.$set(_),(!a||c[0]&32768&&s!==(s="fixed "+(i[15]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&f(e,"class",s)},i(i){a||(D(n.$$.fragment,i),a=!0)},o(i){F(n.$$.fragment,i),a=!1},d(i){i&&u(e),O(n)}}}function Ml(o){let e,t="Drop any files here to add to my documents";return{c(){e=b("div"),e.textContent=t,this.h()},l(l){e=k(l,"DIV",{class:!0,"data-svelte-h":!0}),We(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){f(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){z(l,e,r)},p:Z,d(l){l&&u(e)}}}function Bl(o){let e,t;return e=new Rt({}),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p:Z,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Pl(o){let e,t,l;return t=new Vt({props:{direction:"horizontal",$$slots:{default:[Xl]},$$scope:{ctx:o}}}),{c(){e=b("div"),U(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=y(e);W(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"class","flex flex-row flex-1 h-full max-h-full pb-2.5")},m(r,n){z(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n[0]&23423|n[2]&2&&(s.$$scope={dirty:n,ctx:r}),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),O(t)}}}function Al(o){let e,t=o[14].t("No content found")+"",l;return{c(){e=b("div"),l=se(t),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=y(e);l=oe(n,t),n.forEach(u),this.h()},h(){f(e,"class","m-auto text-gray-500 text-xs")},m(r,n){z(r,e,n),w(e,l)},p(r,n){n[0]&16384&&t!==(t=r[14].t("No content found")+"")&&ae(l,t)},i:Z,o:Z,d(r){r&&u(e)}}}function Ul(o){let e,t,l;return t=new sl({props:{files:o[11],selectedFileId:o[2]}}),t.$on("click",o[35]),t.$on("delete",o[36]),{c(){e=b("div"),U(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=y(e);W(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,n){z(r,e,n),L(t,e,null),l=!0},p(r,n){const s={};n[0]&2048&&(s.files=r[11]),n[0]&4&&(s.selectedFileId=r[2]),t.$set(s)},i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),O(t)}}}function Wl(o){let e,t,l,r,n,s,a='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',i,c,_,v,m,p,E,$,I,C,S,V,x;p=new yl({}),p.$on("upload",o[33]),p.$on("sync",o[34]);const T=[Ul,Al],N=[];function X(d,g){return d[11].length>0?0:1}return $=X(o),I=N[$]=T[$](o),{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("div"),s=b("div"),s.innerHTML=a,i=H(),c=b("input"),v=H(),m=b("div"),U(p.$$.fragment),E=H(),I.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var g=y(e);t=k(g,"DIV",{class:!0});var B=y(t);l=k(B,"DIV",{class:!0});var R=y(l);r=k(R,"DIV",{class:!0});var J=y(r);n=k(J,"DIV",{class:!0});var ee=y(n);s=k(ee,"DIV",{class:!0,"data-svelte-h":!0}),We(s)!=="svelte-1p16zsx"&&(s.innerHTML=a),i=K(ee),c=k(ee,"INPUT",{class:!0,placeholder:!0}),v=K(ee),m=k(ee,"DIV",{});var re=y(m);W(p.$$.fragment,re),re.forEach(u),ee.forEach(u),J.forEach(u),E=K(R),I.l(R),R.forEach(u),B.forEach(u),g.forEach(u),this.h()},h(){f(s,"class","self-center ml-1 mr-3"),f(c,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-none bg-transparent"),f(c,"placeholder",_=o[14].t("Search Collection")),f(n,"class","flex py-1"),f(r,"class","px-3"),f(l,"class","w-full h-full flex flex-col"),f(t,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),f(e,"class",C=(o[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850")},m(d,g){z(d,e,g),w(e,t),w(t,l),w(l,r),w(r,n),w(n,s),w(n,i),w(n,c),$e(c,o[1]),w(n,v),w(n,m),L(p,m,null),w(l,E),N[$].m(l,null),S=!0,V||(x=[le(c,"input",o[31]),le(c,"focus",o[32])],V=!0)},p(d,g){(!S||g[0]&16384&&_!==(_=d[14].t("Search Collection")))&&f(c,"placeholder",_),g[0]&2&&c.value!==d[1]&&$e(c,d[1]);let B=$;$=X(d),$===B?N[$].p(d,g):(ue(),F(N[B],1,1,()=>{N[B]=null}),de(),I=N[$],I?I.p(d,g):(I=N[$]=T[$](d),I.c()),D(I,1),I.m(l,null)),(!S||g[0]&8&&C!==(C=(d[3]?"flex-shrink-0":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&f(e,"class",C)},i(d){S||(D(p.$$.fragment,d),D(I),S=!0)},o(d){F(p.$$.fragment,d),F(I),S=!1},d(d){d&&u(e),O(p),N[$].d(),V=!1,Se(x)}}}function Ll(o){let e,t;return e=new Ft({props:{className:"h-full",show:o[2]!==null,$$slots:{default:[jl]},$$scope:{ctx:o}}}),e.$on("close",o[50]),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p(l,r){const n={};r[0]&4&&(n.show=l[2]!==null),r[0]&20484|r[2]&2&&(n.$$scope={dirty:r,ctx:l}),e.$set(n)},i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}function Ol(o){let e,t,l,r;return e=new St({props:{class:"relative flex w-2 items-center justify-center bg-background group",$$slots:{default:[Hl]},$$scope:{ctx:o}}}),l=new Qe({props:{$$slots:{default:[Rl]},$$scope:{ctx:o}}}),{c(){U(e.$$.fragment),t=H(),U(l.$$.fragment)},l(n){W(e.$$.fragment,n),t=K(n),W(l.$$.fragment,n)},m(n,s){L(e,n,s),z(n,t,s),L(l,n,s),r=!0},p(n,s){const a={};s[2]&2&&(a.$$scope={dirty:s,ctx:n}),e.$set(a);const i={};s[0]&20529|s[2]&2&&(i.$$scope={dirty:s,ctx:n}),l.$set(i)},i(n){r||(D(e.$$.fragment,n),D(l.$$.fragment,n),r=!0)},o(n){F(e.$$.fragment,n),F(l.$$.fragment,n),r=!1},d(n){n&&u(t),O(e,n),O(l,n)}}}function Ye(o){let e,t,l;function r(s){o[49](s)}let n={className:"input-prose-sm",placeholder:o[14].t("Add content here")};return o[12].data.content!==void 0&&(n.value=o[12].data.content),e=new Le({props:n}),me.push(()=>ge(e,"value",r)),{c(){U(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,a){const i={};a[0]&16384&&(i.placeholder=s[14].t("Add content here")),!t&&a[0]&4096&&(t=!0,i.value=s[12].data.content,_e(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){O(e,s)}}}function jl(o){var X,d;let e,t,l,r,n,s,a,i,c=((d=(X=o[12])==null?void 0:X.meta)==null?void 0:d.name)+"",_,v,m,p,E=o[14].t("Save")+"",$,I,C,S=o[12].id,V,x,T;s=new Ze({props:{strokeWidth:"2.5"}});let N=Ye(o);return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("button"),U(s.$$.fragment),a=H(),i=b("div"),_=se(c),v=H(),m=b("div"),p=b("button"),$=se(E),I=H(),C=b("div"),N.c(),this.h()},l(g){e=k(g,"DIV",{class:!0});var B=y(e);t=k(B,"DIV",{class:!0});var R=y(t);l=k(R,"DIV",{class:!0});var J=y(l);r=k(J,"DIV",{class:!0});var ee=y(r);n=k(ee,"BUTTON",{class:!0});var re=y(n);W(s.$$.fragment,re),re.forEach(u),ee.forEach(u),a=K(J),i=k(J,"DIV",{class:!0});var te=y(i);_=oe(te,c),te.forEach(u),v=K(J),m=k(J,"DIV",{});var ke=y(m);p=k(ke,"BUTTON",{class:!0});var P=y(p);$=oe(P,E),P.forEach(u),ke.forEach(u),J.forEach(u),I=K(R),C=k(R,"DIV",{class:!0});var G=y(C);N.l(G),G.forEach(u),R.forEach(u),B.forEach(u),this.h()},h(){f(n,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),f(r,"class","mr-2"),f(i,"class","flex-1 text-xl line-clamp-1"),f(p,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),f(l,"class","flex-shrink-0 mt-1 mb-2 flex items-center"),f(C,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),f(t,"class","flex flex-col w-full h-full max-h-full"),f(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(g,B){z(g,e,B),w(e,t),w(t,l),w(l,r),w(r,n),L(s,n,null),w(l,a),w(l,i),w(i,_),w(l,v),w(l,m),w(m,p),w(p,$),w(t,I),w(t,C),N.m(C,null),V=!0,x||(T=[le(n,"click",o[47]),le(p,"click",o[48])],x=!0)},p(g,B){var R,J;(!V||B[0]&4096)&&c!==(c=((J=(R=g[12])==null?void 0:R.meta)==null?void 0:J.name)+"")&&ae(_,c),(!V||B[0]&16384)&&E!==(E=g[14].t("Save")+"")&&ae($,E),B[0]&4096&&pe(S,S=g[12].id)?(ue(),F(N,1,1,Z),de(),N=Ye(g),N.c(),D(N,1),N.m(C,null)):N.p(g,B)},i(g){V||(D(s.$$.fragment,g),D(N),V=!0)},o(g){F(s.$$.fragment,g),F(N),V=!1},d(g){g&&u(e),O(s),N.d(g),x=!1,Se(T)}}}function Hl(o){let e,t,l;return t=new Tt({props:{className:"size-4 invisible group-hover:visible"}}),{c(){e=b("div"),U(t.$$.fragment),this.h()},l(r){e=k(r,"DIV",{class:!0});var n=y(e);W(t.$$.fragment,n),n.forEach(u),this.h()},h(){f(e,"class","z-10 flex h-7 w-5 items-center justify-center rounded-sm")},m(r,n){z(r,e,n),L(t,e,null),l=!0},p:Z,i(r){l||(D(t.$$.fragment,r),l=!0)},o(r){F(t.$$.fragment,r),l=!1},d(r){r&&u(e),O(t)}}}function Kl(o){let e,t,l,r,n,s,a,i,c,_,v,m,p=o[14].t("Select a file to view or drag and drop a file to upload")+"",E,$,I;return{c(){e=b("div"),t=b("div"),l=b("div"),r=b("div"),n=b("div"),s=b("div"),a=b("input"),i=H(),c=b("div"),_=b("input"),v=H(),m=b("div"),E=se(p),this.h()},l(C){e=k(C,"DIV",{class:!0});var S=y(e);t=k(S,"DIV",{});var V=y(t);l=k(V,"DIV",{class:!0});var x=y(l);r=k(x,"DIV",{class:!0});var T=y(r);n=k(T,"DIV",{class:!0});var N=y(n);s=k(N,"DIV",{class:!0});var X=y(s);a=k(X,"INPUT",{type:!0,class:!0}),X.forEach(u),N.forEach(u),i=K(T),c=k(T,"DIV",{class:!0});var d=y(c);_=k(d,"INPUT",{type:!0,class:!0}),d.forEach(u),T.forEach(u),x.forEach(u),V.forEach(u),v=K(S),m=k(S,"DIV",{class:!0});var g=y(m);E=oe(g,p),g.forEach(u),S.forEach(u),this.h()},h(){f(a,"type","text"),f(a,"class","text-center w-full font-medium text-3xl font-primary bg-transparent outline-none"),f(s,"class","w-full"),f(n,"class","flex items-center justify-between w-full px-0.5 mb-1"),f(_,"type","text"),f(_,"class","text-center w-full text-gray-500 bg-transparent outline-none"),f(c,"class","flex w-full px-1"),f(r,"class","flex-1"),f(l,"class","flex w-full mt-1 mb-3.5"),f(m,"class","mt-2 text-center text-sm text-gray-200 dark:text-gray-700 w-full"),f(e,"class","m-auto pb-32")},m(C,S){z(C,e,S),w(e,t),w(t,l),w(l,r),w(r,n),w(n,s),w(s,a),$e(a,o[0].name),w(r,i),w(r,c),w(c,_),$e(_,o[0].description),w(e,v),w(e,m),w(m,E),$||(I=[le(a,"input",o[43]),le(a,"input",o[44]),le(_,"input",o[45]),le(_,"input",o[46])],$=!0)},p(C,S){S[0]&1&&a.value!==C[0].name&&$e(a,C[0].name),S[0]&1&&_.value!==C[0].description&&$e(_,C[0].description),S[0]&16384&&p!==(p=C[14].t("Select a file to view or drag and drop a file to upload")+"")&&ae(E,p)},i:Z,o:Z,d(C){C&&u(e),$=!1,Se(I)}}}function ql(o){var N,X;let e,t,l,r,n,s=((X=(N=o[12])==null?void 0:N.meta)==null?void 0:X.name)+"",a,i,c,_,v,m=o[14].t("Save")+"",p,E,$,I=o[12].id,C,S,V,x=!o[5]&&Ge(o),T=Je(o);return{c(){e=b("div"),t=b("div"),x&&x.c(),l=H(),r=b("div"),n=b("a"),a=se(s),c=H(),_=b("div"),v=b("button"),p=se(m),E=H(),$=b("div"),T.c(),this.h()},l(d){e=k(d,"DIV",{class:!0});var g=y(e);t=k(g,"DIV",{class:!0});var B=y(t);x&&x.l(B),l=K(B),r=k(B,"DIV",{class:!0});var R=y(r);n=k(R,"A",{class:!0,href:!0,target:!0});var J=y(n);a=oe(J,s),J.forEach(u),R.forEach(u),c=K(B),_=k(B,"DIV",{});var ee=y(_);v=k(ee,"BUTTON",{class:!0});var re=y(v);p=oe(re,m),re.forEach(u),ee.forEach(u),B.forEach(u),E=K(g),$=k(g,"DIV",{class:!0});var te=y($);T.l(te),te.forEach(u),g.forEach(u),this.h()},h(){f(n,"class","hover:text-gray-500 hover:dark:text-gray-100 hover:underline flex-grow line-clamp-1"),f(n,"href",i=o[12].id?`/api/v1/files/${o[12].id}/content`:"#"),f(n,"target","_blank"),f(r,"class","flex-1 text-2xl font-medium"),f(v,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),f(t,"class","flex-shrink-0 mb-2 flex items-center"),f($,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-none overflow-y-auto scrollbar-hidden"),f(e,"class","flex flex-col w-full h-full max-h-full ml-2.5")},m(d,g){z(d,e,g),w(e,t),x&&x.m(t,null),w(t,l),w(t,r),w(r,n),w(n,a),w(t,c),w(t,_),w(_,v),w(v,p),w(e,E),w(e,$),T.m($,null),C=!0,S||(V=le(v,"click",o[41]),S=!0)},p(d,g){var B,R;d[5]?x&&(ue(),F(x,1,1,()=>{x=null}),de()):x?(x.p(d,g),g[0]&32&&D(x,1)):(x=Ge(d),x.c(),D(x,1),x.m(t,l)),(!C||g[0]&4096)&&s!==(s=((R=(B=d[12])==null?void 0:B.meta)==null?void 0:R.name)+"")&&ae(a,s),(!C||g[0]&4096&&i!==(i=d[12].id?`/api/v1/files/${d[12].id}/content`:"#"))&&f(n,"href",i),(!C||g[0]&16384)&&m!==(m=d[14].t("Save")+"")&&ae(p,m),g[0]&4096&&pe(I,I=d[12].id)?(ue(),F(T,1,1,Z),de(),T=Je(d),T.c(),D(T,1),T.m($,null)):T.p(d,g)},i(d){C||(D(x),D(T),C=!0)},o(d){F(x),F(T),C=!1},d(d){d&&u(e),x&&x.d(),T.d(d),S=!1,V()}}}function Ge(o){let e,t,l,r,n,s;return l=new Ze({props:{strokeWidth:"2.5"}}),{c(){e=b("div"),t=b("button"),U(l.$$.fragment),this.h()},l(a){e=k(a,"DIV",{class:!0});var i=y(e);t=k(i,"BUTTON",{class:!0});var c=y(t);W(l.$$.fragment,c),c.forEach(u),i.forEach(u),this.h()},h(){f(t,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),f(e,"class","-translate-x-2")},m(a,i){z(a,e,i),w(e,t),L(l,t,null),r=!0,n||(s=le(t,"click",o[40]),n=!0)},p:Z,i(a){r||(D(l.$$.fragment,a),r=!0)},o(a){F(l.$$.fragment,a),r=!1},d(a){a&&u(e),O(l),n=!1,s()}}}function Je(o){let e,t,l;function r(s){o[42](s)}let n={className:"input-prose-sm",placeholder:o[14].t("Add content here")};return o[12].data.content!==void 0&&(n.value=o[12].data.content),e=new Le({props:n}),me.push(()=>ge(e,"value",r)),{c(){U(e.$$.fragment)},l(s){W(e.$$.fragment,s)},m(s,a){L(e,s,a),l=!0},p(s,a){const i={};a[0]&16384&&(i.placeholder=s[14].t("Add content here")),!t&&a[0]&4096&&(t=!0,i.value=s[12].data.content,_e(()=>t=!1)),e.$set(i)},i(s){l||(D(e.$$.fragment,s),l=!0)},o(s){F(e.$$.fragment,s),l=!1},d(s){O(e,s)}}}function Rl(o){let e,t,l,r;const n=[ql,Kl],s=[];function a(i,c){return i[12]?0:1}return t=a(o),l=s[t]=n[t](o),{c(){e=b("div"),l.c(),this.h()},l(i){e=k(i,"DIV",{class:!0});var c=y(e);l.l(c),c.forEach(u),this.h()},h(){f(e,"class","flex-1 flex justify-start h-full max-h-full")},m(i,c){z(i,e,c),s[t].m(e,null),r=!0},p(i,c){let _=t;t=a(i),t===_?s[t].p(i,c):(ue(),F(s[_],1,1,()=>{s[_]=null}),de(),l=s[t],l?l.p(i,c):(l=s[t]=n[t](i),l.c()),D(l,1),l.m(e,null))},i(i){r||(D(l),r=!0)},o(i){F(l),r=!1},d(i){i&&u(e),s[t].d()}}}function Xl(o){let e,t,l,r,n,s,a;function i(p){o[39](p)}let c={defaultSize:o[6],collapsible:!0,maxSize:50,minSize:o[6],class:"h-full",onExpand:o[37],onCollapse:o[38],$$slots:{default:[Wl]},$$scope:{ctx:o}};o[4]!==void 0&&(c.pane=o[4]),e=new Qe({props:c}),me.push(()=>ge(e,"pane",i));const _=[Ol,Ll],v=[];function m(p,E){return p[3]?0:!p[3]&&p[2]!==null?1:-1}return~(r=m(o))&&(n=v[r]=_[r](o)),{c(){U(e.$$.fragment),l=H(),n&&n.c(),s=je()},l(p){W(e.$$.fragment,p),l=K(p),n&&n.l(p),s=je()},m(p,E){L(e,p,E),z(p,l,E),~r&&v[r].m(p,E),z(p,s,E),a=!0},p(p,E){const $={};E[0]&64&&($.defaultSize=p[6]),E[0]&64&&($.minSize=p[6]),E[0]&32&&($.onExpand=p[37]),E[0]&32&&($.onCollapse=p[38]),E[0]&19214|E[2]&2&&($.$$scope={dirty:E,ctx:p}),!t&&E[0]&16&&(t=!0,$.pane=p[4],_e(()=>t=!1)),e.$set($);let I=r;r=m(p),r===I?~r&&v[r].p(p,E):(n&&(ue(),F(v[I],1,1,()=>{v[I]=null}),de()),~r?(n=v[r],n?n.p(p,E):(n=v[r]=_[r](p),n.c()),D(n,1),n.m(s.parentNode,s)):n=null)},i(p){a||(D(e.$$.fragment,p),D(n),a=!0)},o(p){F(e.$$.fragment,p),F(n),a=!1},d(p){p&&(u(l),u(s)),O(e,p),~r&&v[r].d(p)}}}function Yl(o){let e,t,l,r,n,s,a,i,c,_,v,m,p,E,$,I=o[13]&&Xe(o);function C(d){o[25](d)}let S={message:o[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};o[9]!==void 0&&(S.show=o[9]),t=new ll({props:S}),me.push(()=>ge(t,"show",C)),t.$on("confirm",o[26]);function V(d){o[27](d)}let x={};o[8]!==void 0&&(x.show=o[8]),n=new zl({props:x}),me.push(()=>ge(n,"show",V)),n.$on("submit",o[28]);const T=[Pl,Bl],N=[];function X(d,g){return d[7]&&d[0]?0:1}return v=X(o),m=N[v]=T[v](o),{c(){I&&I.c(),e=H(),U(t.$$.fragment),r=H(),U(n.$$.fragment),a=H(),i=b("input"),c=H(),_=b("div"),m.c(),this.h()},l(d){I&&I.l(d),e=K(d),W(t.$$.fragment,d),r=K(d),W(n.$$.fragment,d),a=K(d),i=k(d,"INPUT",{id:!0,type:!0}),c=K(d),_=k(d,"DIV",{class:!0,id:!0});var g=y(_);m.l(g),g.forEach(u),this.h()},h(){f(i,"id","files-input"),f(i,"type","file"),i.multiple=!0,i.hidden=!0,f(_,"class","flex flex-col w-full h-full max-h-[100dvh]"),f(_,"id","collection-container")},m(d,g){I&&I.m(d,g),z(d,e,g),L(t,d,g),z(d,r,g),L(n,d,g),z(d,a,g),z(d,i,g),z(d,c,g),z(d,_,g),N[v].m(_,null),p=!0,E||($=[le(i,"change",o[29]),le(i,"change",o[30])],E=!0)},p(d,g){d[13]?I?(I.p(d,g),g[0]&8192&&D(I,1)):(I=Xe(d),I.c(),D(I,1),I.m(e.parentNode,e)):I&&(ue(),F(I,1,1,()=>{I=null}),de());const B={};g[0]&16384&&(B.message=d[14].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&g[0]&512&&(l=!0,B.show=d[9],_e(()=>l=!1)),t.$set(B);const R={};!s&&g[0]&256&&(s=!0,R.show=d[8],_e(()=>s=!1)),n.$set(R);let J=v;v=X(d),v===J?N[v].p(d,g):(ue(),F(N[J],1,1,()=>{N[J]=null}),de(),m=N[v],m?m.p(d,g):(m=N[v]=T[v](d),m.c()),D(m,1),m.m(_,null))},i(d){p||(D(I),D(t.$$.fragment,d),D(n.$$.fragment,d),D(m),p=!0)},o(d){F(I),F(t.$$.fragment,d),F(n.$$.fragment,d),F(m),p=!1},d(d){d&&(u(e),u(r),u(a),u(i),u(c),u(_)),I&&I.d(d),O(t,d),O(n,d),N[v].d(),E=!1,Se($)}}}function Gl(o,e,t){let l,r,n;Fe(o,Ct,h=>t(53,l=h)),Fe(o,zt,h=>t(15,n=h));const s=Ue("i18n");Fe(o,s,h=>t(14,r=h));let a=!0,i,c=!0,_=0,v=null,m=null,p="",E=!1,$=!1,I=null,C=[],S=null,V=null,x=null,T=null,N,X=!1;const d=(h,A)=>{const j=new Blob([A],{type:"text/plain"}),M=He(j,`${h}.txt`);return console.log(M),M},g=async h=>{console.log(h);const A=qt(),j={type:"file",file:"",id:null,url:"",name:h.name,size:h.size,status:"uploading",error:"",itemId:A};if(j.size==0)return q.error(r.t("You cannot upload an empty file.")),null;if(t(0,m.files=[...m.files??[],j],m),["audio/mpeg","audio/wav","audio/ogg","audio/x-m4a"].includes(h.type)){const M=await Kt(localStorage.token,h).catch(Y=>(q.error(Y),null));if(M){console.log(M);const Y=new Blob([M.text],{type:"text/plain"});h=He(Y,`${h.name}.txt`)}}try{const M=await Bt(localStorage.token,h).catch(Y=>(q.error(Y),null));M?(console.log(M),t(0,m.files=m.files.map(Y=>(Y.itemId===A&&(Y.id=M.id),delete Y.itemId,Y)),m),await ke(M.id)):q.error(r.t("Failed to upload file."))}catch(M){q.error(M)}},B=async()=>{const h="showDirectoryPicker"in window;try{h?await J():await ee()}catch(A){re(A)}},R=h=>h.split("/").some(A=>A.startsWith(".")),J=async()=>{const h=await window.showDirectoryPicker();let A=0,j=0;const M=()=>{const he=j/A*100;q.info(`Upload Progress: ${j}/${A} (${he.toFixed(2)}%)`)};async function Y(he){for await(const Q of he.values())Q.name.startsWith(".")||(Q.kind==="file"?A++:Q.kind==="directory"&&(Q.name.startsWith(".")||await Y(Q)))}async function ve(he,Q=""){for await(const fe of he.values()){if(fe.name.startsWith("."))continue;const Ve=Q?`${Q}/${fe.name}`:fe.name;if(!R(Ve))if(fe.kind==="file"){const Oe=await fe.getFile(),wt=new File([Oe],Ve,{type:Oe.type});await g(wt),j++,M()}else fe.kind==="directory"&&(fe.name.startsWith(".")||await ve(fe,Ve))}}await Y(h),M(),A>0?await ve(h):console.log("No files to upload.")},ee=async()=>new Promise((h,A)=>{const j=document.createElement("input");j.type="file",j.webkitdirectory=!0,j.directory=!0,j.multiple=!0,j.style.display="none",document.body.appendChild(j),j.onchange=async()=>{try{const M=Array.from(j.files).filter(Q=>!R(Q.webkitRelativePath));let Y=M.length,ve=0;const he=()=>{const Q=ve/Y*100;q.info(`Upload Progress: ${ve}/${Y} (${Q.toFixed(2)}%)`)};he();for(const Q of M)if(!Q.name.startsWith(".")){const fe=Q.webkitRelativePath||Q.name,Ve=new File([Q],fe,{type:Q.type});await g(Ve),ve++,he()}document.body.removeChild(j),h()}catch(M){A(M)}},j.onerror=M=>{document.body.removeChild(j),A(M)},j.click()}),re=h=>{h.name==="AbortError"?q.info("Directory selection was cancelled"):(q.error("Error accessing directory"),console.error("Directory access error:",h))},te=async()=>{if(((m==null?void 0:m.files)??[]).length>0){const h=await Ut(localStorage.token,v).catch(A=>{q.error(A)});h&&(t(0,m=h),q.success(r.t("Knowledge reset successfully.")),B())}else B()},ke=async h=>{const A=await Wt(localStorage.token,v,h).catch(j=>(q.error(j),null));A?(t(0,m=A),q.success(r.t("File added successfully."))):(q.error(r.t("Failed to add file.")),t(0,m.files=m.files.filter(j=>j.id!==h),m))},P=async h=>{const A=await Lt(localStorage.token,v,h).catch(j=>{q.error(j)});A&&(t(0,m=A),q.success(r.t("File removed successfully.")))},G=async()=>{const h=S.id,A=S.data.content,j=Pt(localStorage.token,h,A).catch(Y=>{q.error(Y)}),M=await Ot(localStorage.token,v,h).catch(Y=>{q.error(Y)});j&&M&&(t(0,m=M),q.success(r.t("File content updated successfully.")))},ie=()=>{console.log("debounce"),T&&clearTimeout(T),T=setTimeout(async()=>{if(m.name.trim()===""||m.description.trim()===""){q.error(r.t("Please fill in all fields."));return}await jt(localStorage.token,v,{name:m.name,description:m.description}).catch(A=>{q.error(A)})&&(q.success(r.t("Knowledge updated successfully")),Mt.set(await Ht(localStorage.token)))},1e3)},ce=async h=>{h.matches?t(3,a=!0):t(3,a=!1)},ne=h=>{h.preventDefault(),t(13,X=!0)},xe=()=>{t(13,X=!1)},ye=async h=>{var A,j;if(h.preventDefault(),t(13,X=!1),(A=h.dataTransfer)!=null&&A.files){const M=(j=h.dataTransfer)==null?void 0:j.files;if(M&&M.length>0)for(const Y of M)await g(Y);else q.error(r.t("File not found."))}};yt(async()=>{N=window.matchMedia("(min-width: 1024px)"),N.addEventListener("change",ce),ce(N);const h=document.getElementById("collection-container");t(6,_=a?Math.floor(300/h.clientWidth*100):100),new ResizeObserver(Y=>{for(let ve of Y){const Q=300/ve.contentRect.width*100;t(6,_=a?Math.floor(Q):100),c&&i&&i.isExpanded()&&i.getSize()<_&&i.resize(_)}}).observe(h),i&&i.expand(),t(7,v=l.params.id);const j=await At(localStorage.token,v).catch(Y=>(q.error(Y),null));j?t(0,m=j):Nt("/workspace/knowledge");const M=document.querySelector("body");M==null||M.addEventListener("dragover",ne),M==null||M.addEventListener("drop",ye),M==null||M.addEventListener("dragleave",xe)}),Et(()=>{N==null||N.removeEventListener("change",ce);const h=document.querySelector("body");h==null||h.removeEventListener("dragover",ne),h==null||h.removeEventListener("drop",ye),h==null||h.removeEventListener("dragleave",xe)});function Te(h){$=h,t(9,$)}const Ne=()=>{te()};function Ce(h){E=h,t(8,E)}const De=h=>{const A=d(h.detail.name,h.detail.content);g(A)};function ze(){I=this.files,t(10,I)}const Me=async()=>{if(I&&I.length>0){for(const A of I)await g(A);t(10,I=null);const h=document.getElementById("files-input");h&&(h.value="")}else q.error(r.t("File not found."))};function et(){p=this.value,t(1,p)}const tt=()=>{t(2,V=null)},lt=h=>{h.detail.type==="directory"?B():h.detail.type==="text"?t(8,E=!0):document.getElementById("files-input").click()},rt=h=>{t(9,$=!0)},nt=h=>{t(2,V=V===h.detail?null:h.detail)},st=h=>{console.log(h.detail),t(2,V=null),P(h.detail)},ot=()=>{t(5,c=!0)},at=()=>{t(5,c=!1)};function it(h){i=h,t(4,i)}const ct=()=>{i.expand()},ft=()=>{G()};function ut(h){o.$$.not_equal(S.data.content,h)&&(S.data.content=h,t(12,S),t(2,V),t(0,m))}function dt(){m.name=this.value,t(0,m)}const pt=()=>{ie()};function ht(){m.description=this.value,t(0,m)}const mt=()=>{ie()},_t=()=>{t(2,V=null)},gt=()=>{G()};function vt(h){o.$$.not_equal(S.data.content,h)&&(S.data.content=h,t(12,S),t(2,V),t(0,m))}const $t=()=>{t(2,V=null)};return o.$$.update=()=>{if(o.$$.dirty[0]&1&&m&&t(24,x=new It(m.files,{keys:["meta.name","meta.description"]})),o.$$.dirty[0]&16777219&&x&&t(11,C=p?x.search(p).map(h=>h.item):(m==null?void 0:m.files)??[]),o.$$.dirty[0]&5)if(V){const h=((m==null?void 0:m.files)??[]).find(A=>A.id===V);h?(h.data=h.data??{content:""},t(12,S=h)):t(12,S=null)}else t(12,S=null)},[m,p,V,a,i,c,_,v,E,$,I,C,S,X,r,n,s,d,g,B,te,P,G,ie,x,Te,Ne,Ce,De,ze,Me,et,tt,lt,rt,nt,st,ot,at,it,ct,ft,ut,dt,pt,ht,mt,_t,gt,vt,$t]}class Jl extends we{constructor(e){super(),be(this,e,Gl,Yl,pe,{},null,[-1,-1,-1])}}function Ql(o){let e,t;return e=new Jl({}),{c(){U(e.$$.fragment)},l(l){W(e.$$.fragment,l)},m(l,r){L(e,l,r),t=!0},p:Z,i(l){t||(D(e.$$.fragment,l),t=!0)},o(l){F(e.$$.fragment,l),t=!1},d(l){O(e,l)}}}class Ir extends we{constructor(e){super(),be(this,e,null,Ql,pe,{})}}export{Ir as component};
//# sourceMappingURL=18.CcTVBC02.js.map
