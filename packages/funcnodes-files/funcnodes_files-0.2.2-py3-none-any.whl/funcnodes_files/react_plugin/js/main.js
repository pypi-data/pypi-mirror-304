var e={d:(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)},n={};e.d(n,{A:()=>t});const t={RendererPlugin:{handle_preview_renderers:{},data_overlay_renderers:{},data_preview_renderers:{},data_view_renderers:{},input_renderers:{}},renderpluginfactory:function(e){var n=e.React,t=e.fnrf_zst;return{input_renderers:{"funcnodes_files.FileUpload":function(e){var r=e.io,o=n.useRef(null);return n.createElement("div",null,n.createElement("input",{className:"nodedatainput styledinput",type:"file",onChange:function(e){var n=e.target.files;if(n&&0!==n.length){var o=new FileReader;o.onload=function(){var e,l=o.result,a=l.split(",")[1],i={filename:n[0].name,content:a,path:n[0].webkitRelativePath||"/"};l&&(null===(e=t.worker)||void 0===e||e.set_io_value({nid:r.node,ioid:r.id,value:i,set_default:!1}))},o.readAsDataURL(n[0])}},disabled:r.connected,style:{display:"none"},ref:o}),n.createElement("button",{className:"nodedatainput styledinput",disabled:r.connected,onClick:function(){var e;null===(e=o.current)||void 0===e||e.click()}},"Upload File"))},"funcnodes_files.FolderUpload":function(e){var r=e.io,o=n.useRef(null);return n.createElement("div",null,n.createElement("input",{className:"nodedatainput styledinput",type:"file",onChange:function(e){var n=e.target.files;if(n&&0!==n.length){var o=Array.from(n).map((function(e){return new Promise((function(n,t){var r=new FileReader;r.onload=function(){var o=r.result.split(",")[1];o?n({filename:e.name,path:e.webkitRelativePath||e.name,content:o}):t(new Error("Failed to read file content"))},r.onerror=function(){return t(new Error("File reading failed"))},r.readAsDataURL(e)}))}));Promise.all(o).then((function(e){var n,o={nid:r.node,ioid:r.id,value:e,set_default:!1};return null===(n=t.worker)||void 0===n?void 0:n.set_io_value(o)})).then((function(){console.log("Folder uploaded")})).catch((function(e){console.error("Error uploading folder:",e)}))}},disabled:r.connected,style:{display:"none"},ref:o,webkitdirectory:""}),n.createElement("button",{className:"nodedatainput styledinput",disabled:r.connected,onClick:function(){var e;null===(e=o.current)||void 0===e||e.click()}},"Upload Folder"))}},output_renderers:{"funcnodes_files.FileDownload":function(e){var r=e.io,o=n.useRef(null);return n.createElement("div",null,n.createElement("a",{ref:o,style:{display:"none"},href:"",download:""}),n.createElement("button",{className:"nodedatainput styledinput",onClick:function(){return e=void 0,n=void 0,a=function(){var e,n,l,a,i,u,c,d,s,f,p;return function(e,n){var t,r,o,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=i(0),a.throw=i(1),a.return=i(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function i(i){return function(u){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a&&(a=0,i[0]&&(l=0)),l;)try{if(t=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((o=(o=l.trys).length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){l.label=i[1];break}if(6===i[0]&&l.label<o[1]){l.label=o[1],o=i;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(i);break}o[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(v){switch(v.label){case 0:return[4,null===(p=t.worker)||void 0===p?void 0:p.get_io_full_value({nid:r.node,ioid:r.id})];case 1:return e=v.sent(),l=(n=e).filename,a=n.content,i=atob(a),u=new Array(i.length).fill(null).map((function(e,n){return i.charCodeAt(n)})),c=new Uint8Array(u),d=new Blob([c]),s=URL.createObjectURL(d),null==(f=o.current)||f.setAttribute("href",s),null==f||f.setAttribute("download",l),null==f||f.click(),[2]}}))},new((l=void 0)||(l=Promise))((function(t,r){function o(e){try{u(a.next(e))}catch(e){r(e)}}function i(e){try{u(a.throw(e))}catch(e){r(e)}}function u(e){var n;e.done?t(e.value):(n=e.value,n instanceof l?n:new l((function(e){e(n)}))).then(o,i)}u((a=a.apply(e,n||[])).next())}));var e,n,l,a}},"Download File"))}}}}};var r=n.A;export{r as default};
